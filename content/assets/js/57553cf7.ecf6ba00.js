"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[25998],{16774:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"io-quickstart","title":"How to connect Pulsar to database","description":"This tutorial provides a hands-on look at how you can move data out of Pulsar without writing a single line of code.","source":"@site/versioned_docs/version-2.7.5/io-quickstart.md","sourceDirName":".","slug":"/io-quickstart","permalink":"/docs/2.7.5/io-quickstart","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/pulsar-site/edit/main/versioned_docs/version-2.7.5/io-quickstart.md","tags":[],"version":"2.7.5","frontMatter":{"id":"io-quickstart","title":"How to connect Pulsar to database","sidebar_label":"Get started","original_id":"io-quickstart"},"sidebar":"docsSidebar","previous":{"title":"Overview","permalink":"/docs/2.7.5/io-overview"},"next":{"title":"Use","permalink":"/docs/2.7.5/io-use"}}');var r=s(74848),i=s(28453);const t={id:"io-quickstart",title:"How to connect Pulsar to database",sidebar_label:"Get started",original_id:"io-quickstart"},c=void 0,l={},o=[{value:"Install Pulsar and built-in connector",id:"install-pulsar-and-built-in-connector",level:2},{value:"Start Pulsar standalone",id:"start-pulsar-standalone",level:2},{value:"Connect Pulsar to Cassandra",id:"connect-pulsar-to-cassandra",level:2},{value:"Setup a Cassandra cluster",id:"setup-a-cassandra-cluster",level:3},{value:"Configure a Cassandra sink",id:"configure-a-cassandra-sink",level:3},{value:"Create a Cassandra sink",id:"create-a-cassandra-sink",level:3},{value:"Note",id:"note",level:4},{value:"Inspect a Cassandra sink",id:"inspect-a-cassandra-sink",level:3},{value:"Verify a Cassandra sink",id:"verify-a-cassandra-sink",level:3},{value:"Delete a Cassandra Sink",id:"delete-a-cassandra-sink",level:3},{value:"Connect Pulsar to PostgreSQL",id:"connect-pulsar-to-postgresql",level:2},{value:"Setup a PostgreSQL cluster",id:"setup-a-postgresql-cluster",level:3},{value:"Tip",id:"tip",level:4},{value:"Configure a JDBC sink",id:"configure-a-jdbc-sink",level:3},{value:"Create a JDBC sink",id:"create-a-jdbc-sink",level:3},{value:"Tip",id:"tip-1",level:4},{value:"Inspect a JDBC sink",id:"inspect-a-jdbc-sink",level:3},{value:"Stop a JDBC sink",id:"stop-a-jdbc-sink",level:3},{value:"Restart a JDBC sink",id:"restart-a-jdbc-sink",level:3},{value:"Update a JDBC sink",id:"update-a-jdbc-sink",level:3},{value:"Delete a JDBC sink",id:"delete-a-jdbc-sink",level:3}];function d(n){const e={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.p,{children:"This tutorial provides a hands-on look at how you can move data out of Pulsar without writing a single line of code."}),"\n",(0,r.jsxs)(e.p,{children:["It is helpful to review the ",(0,r.jsx)(e.a,{href:"/docs/2.7.5/io-overview",children:"concepts"})," for Pulsar I/O with running the steps in this guide to gain a deeper understanding."]}),"\n",(0,r.jsx)(e.p,{children:"At the end of this tutorial, you are able to:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:"#Connect-Pulsar-to-Cassandra",children:"Connect Pulsar to Cassandra"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:"#Connect-Pulsar-to-PostgreSQL",children:"Connect Pulsar to PostgreSQL"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.admonition,{type:"tip",children:(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["These instructions assume you are running Pulsar in ",(0,r.jsx)(e.a,{href:"/docs/2.7.5/getting-started-standalone",children:"standalone mode"}),". However, all\nthe commands used in this tutorial can be used in a multi-nodes Pulsar cluster without any changes."]}),"\n",(0,r.jsx)(e.li,{children:"All the instructions are assumed to run at the root directory of a Pulsar binary distribution."}),"\n"]})}),"\n",(0,r.jsx)(e.h2,{id:"install-pulsar-and-built-in-connector",children:"Install Pulsar and built-in connector"}),"\n",(0,r.jsx)(e.p,{children:"Before connecting Pulsar to a database, you need to install Pulsar and the desired built-in connector."}),"\n",(0,r.jsxs)(e.p,{children:["For more information about ",(0,r.jsx)(e.strong,{children:"how to install a standalone Pulsar and built-in connectors"}),", see ",(0,r.jsx)(e.a,{href:"getting-started-standalone.md/#installing-pulsar",children:"here"}),"."]}),"\n",(0,r.jsx)(e.h2,{id:"start-pulsar-standalone",children:"Start Pulsar standalone"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Start Pulsar locally."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\nbin/pulsar standalone\n\n"})}),"\n",(0,r.jsx)(e.p,{children:"All the components of a Pulsar service are start in order."}),"\n",(0,r.jsx)(e.p,{children:"You can curl those pulsar service endpoints to make sure Pulsar service is up running correctly."}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Check Pulsar binary protocol port."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\ntelnet localhost 6650\n\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Check Pulsar Function cluster."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\ncurl -s http://localhost:8080/admin/v2/worker/cluster\n\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Example output"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'\n[{"workerId":"c-standalone-fw-localhost-6750","workerHostname":"localhost","port":6750}]\n\n'})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Make sure a public tenant and a default namespace exist."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\ncurl -s http://localhost:8080/admin/v2/namespaces/public\n\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Example output"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'\n["public/default","public/functions"]\n\n'})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"All built-in connectors should be listed as available."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\ncurl -s http://localhost:8080/admin/v2/functions/connectors\n\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Example output"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'\n[{"name":"aerospike","description":"Aerospike database sink","sinkClass":"org.apache.pulsar.io.aerospike.AerospikeStringSink"},{"name":"cassandra","description":"Writes data into Cassandra","sinkClass":"org.apache.pulsar.io.cassandra.CassandraStringSink"},{"name":"kafka","description":"Kafka source and sink connector","sourceClass":"org.apache.pulsar.io.kafka.KafkaStringSource","sinkClass":"org.apache.pulsar.io.kafka.KafkaBytesSink"},{"name":"kinesis","description":"Kinesis sink connector","sinkClass":"org.apache.pulsar.io.kinesis.KinesisSink"},{"name":"rabbitmq","description":"RabbitMQ source connector","sourceClass":"org.apache.pulsar.io.rabbitmq.RabbitMQSource"},{"name":"twitter","description":"Ingest data from Twitter firehose","sourceClass":"org.apache.pulsar.io.twitter.TwitterFireHose"}]\n\n'})}),"\n",(0,r.jsxs)(e.p,{children:["If an error occurs when starting Pulsar service, you may see an exception at the terminal running ",(0,r.jsx)(e.code,{children:"pulsar/standalone"}),",\nor you can navigate to the ",(0,r.jsx)(e.code,{children:"logs"})," directory under the Pulsar directory to view the logs."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"connect-pulsar-to-cassandra",children:"Connect Pulsar to Cassandra"}),"\n",(0,r.jsx)(e.p,{children:"This section demonstrates how to connect Pulsar to Cassandra."}),"\n",(0,r.jsx)(e.admonition,{type:"tip",children:(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Make sure you have Docker installed. If you do not have one, see ",(0,r.jsx)(e.a,{href:"https://docs.docker.com/docker-for-mac/install/",children:"install Docker"}),"."]}),"\n",(0,r.jsxs)(e.li,{children:["The Cassandra sink connector reads messages from Pulsar topics and writes the messages into Cassandra tables. For more information, see ",(0,r.jsx)(e.a,{href:"/docs/2.7.5/io-cassandra-sink",children:"Cassandra sink connector"}),"."]}),"\n"]})}),"\n",(0,r.jsx)(e.h3,{id:"setup-a-cassandra-cluster",children:"Setup a Cassandra cluster"}),"\n",(0,r.jsxs)(e.p,{children:["This example uses ",(0,r.jsx)(e.code,{children:"cassandra"})," Docker image to start a single-node Cassandra cluster in Docker."]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Start a Cassandra cluster."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\ndocker run -d --rm --name=cassandra -p 9042:9042 cassandra:3.11\n\n"})}),"\n",(0,r.jsx)(e.admonition,{type:"note",children:(0,r.jsx)(e.p,{children:"Before moving to the next steps, make sure the Cassandra cluster is running."})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Make sure the Docker process is running."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\ndocker ps\n\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Check the Cassandra logs to make sure the Cassandra process is running as expected."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\ndocker logs cassandra\n\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Check the status of the Cassandra cluster."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\ndocker exec cassandra nodetool status\n\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Example output"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\nDatacenter: datacenter1\n=======================\nStatus=Up/Down\n|/ State=Normal/Leaving/Joining/Moving\n--  Address     Load       Tokens       Owns (effective)  Host ID                               Rack\nUN  172.17.0.2  103.67 KiB  256          100.0%            af0e4b2f-84e0-4f0b-bb14-bd5f9070ff26  rack1\n\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Use ",(0,r.jsx)(e.code,{children:"cqlsh"})," to connect to the Cassandra cluster."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\n$ docker exec -ti cassandra cqlsh localhost\nConnected to Test Cluster at localhost:9042.\n[cqlsh 5.0.1 | Cassandra 3.11.2 | CQL spec 3.4.4 | Native protocol v4]\nUse HELP for help.\ncqlsh>\n\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Create a keyspace ",(0,r.jsx)(e.code,{children:"pulsar_test_keyspace"}),"."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\ncqlsh> CREATE KEYSPACE pulsar_test_keyspace WITH replication = {'class':'SimpleStrategy', 'replication_factor':1};\n\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Create a table ",(0,r.jsx)(e.code,{children:"pulsar_test_table"}),"."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\ncqlsh> USE pulsar_test_keyspace;\ncqlsh:pulsar_test_keyspace> CREATE TABLE pulsar_test_table (key text PRIMARY KEY, col text);\n\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"configure-a-cassandra-sink",children:"Configure a Cassandra sink"}),"\n",(0,r.jsx)(e.p,{children:"Now that we have a Cassandra cluster running locally."}),"\n",(0,r.jsx)(e.p,{children:"In this section, you need to configure a Cassandra sink connector."}),"\n",(0,r.jsx)(e.p,{children:"To run a Cassandra sink connector, you need to prepare a configuration file including the information that Pulsar connector runtime needs to know."}),"\n",(0,r.jsx)(e.p,{children:"For example, how Pulsar connector can find the Cassandra cluster, what is the keyspace and the table that Pulsar connector uses for writing Pulsar messages to, and so on."}),"\n",(0,r.jsx)(e.p,{children:"You can create a configuration file through one of the following methods."}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"JSON"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'\n{\n    "roots": "localhost:9042",\n    "keyspace": "pulsar_test_keyspace",\n    "columnFamily": "pulsar_test_table",\n    "keyname": "key",\n    "columnName": "col"\n}\n\n'})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"YAML"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:'\nconfigs:\n    roots: "localhost:9042"\n    keyspace: "pulsar_test_keyspace"\n    columnFamily: "pulsar_test_table"\n    keyname: "key"\n    columnName: "col"\n\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["For more information, see ",(0,r.jsx)(e.a,{href:"/docs/2.7.5/io-cassandra-sink",children:"Cassandra sink connector"}),"."]}),"\n",(0,r.jsx)(e.h3,{id:"create-a-cassandra-sink",children:"Create a Cassandra sink"}),"\n",(0,r.jsxs)(e.p,{children:["You can use the ",(0,r.jsx)(e.a,{href:"/docs/2.7.5/io-cli",children:"Connector Admin CLI"}),"\nto create a sink connector and perform other operations on them."]}),"\n",(0,r.jsxs)(e.p,{children:["Run the following command to create a Cassandra sink connector with sink type ",(0,r.jsx)(e.em,{children:"cassandra"})," and the config file ",(0,r.jsx)(e.em,{children:"examples/cassandra-sink.yml"})," created previously."]}),"\n",(0,r.jsx)(e.h4,{id:"note",children:"Note"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsxs)(e.p,{children:["The ",(0,r.jsx)(e.code,{children:"sink-type"})," parameter of the currently built-in connectors is determined by the setting of the ",(0,r.jsx)(e.code,{children:"name"})," parameter specified in the pulsar-io.yaml file."]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\nbin/pulsar-admin sinks create \\\n    --tenant public \\\n    --namespace default \\\n    --name cassandra-test-sink \\\n    --sink-type cassandra \\\n    --sink-config-file examples/cassandra-sink.yml \\\n    --inputs test_cassandra\n\n"})}),"\n",(0,r.jsxs)(e.p,{children:["Once the command is executed, Pulsar creates the sink connector ",(0,r.jsx)(e.em,{children:"cassandra-test-sink"}),"."]}),"\n",(0,r.jsxs)(e.p,{children:["This sink connector runs\nas a Pulsar Function and writes the messages produced in the topic ",(0,r.jsx)(e.em,{children:"test_cassandra"})," to the Cassandra table ",(0,r.jsx)(e.em,{children:"pulsar_test_table"}),"."]}),"\n",(0,r.jsx)(e.h3,{id:"inspect-a-cassandra-sink",children:"Inspect a Cassandra sink"}),"\n",(0,r.jsxs)(e.p,{children:["You can use the ",(0,r.jsx)(e.a,{href:"/docs/2.7.5/io-cli",children:"Connector Admin CLI"}),"\nto monitor a connector and perform other operations on it."]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Get the information of a Cassandra sink."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\nbin/pulsar-admin sinks get \\\n  --tenant public \\\n  --namespace default \\\n  --name cassandra-test-sink\n\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Example output"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'\n{\n"tenant": "public",\n"namespace": "default",\n"name": "cassandra-test-sink",\n"className": "org.apache.pulsar.io.cassandra.CassandraStringSink",\n"inputSpecs": {\n  "test_cassandra": {\n    "isRegexPattern": false\n  }\n},\n"configs": {\n  "roots": "localhost:9042",\n  "keyspace": "pulsar_test_keyspace",\n  "columnFamily": "pulsar_test_table",\n  "keyname": "key",\n  "columnName": "col"\n},\n"parallelism": 1,\n"processingGuarantees": "ATLEAST_ONCE",\n"retainOrdering": false,\n"autoAck": true,\n"archive": "builtin://cassandra"\n}\n\n'})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Check the status of a Cassandra sink."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\nbin/pulsar-admin sinks status \\\n  --tenant public \\\n  --namespace default \\\n  --name cassandra-test-sink\n\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Example output"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'\n{\n"numInstances" : 1,\n"numRunning" : 1,\n"instances" : [ {\n  "instanceId" : 0,\n  "status" : {\n    "running" : true,\n    "error" : "",\n    "numRestarts" : 0,\n    "numReadFromPulsar" : 0,\n    "numSystemExceptions" : 0,\n    "latestSystemExceptions" : [ ],\n    "numSinkExceptions" : 0,\n    "latestSinkExceptions" : [ ],\n    "numWrittenToSink" : 0,\n    "lastReceivedTime" : 0,\n    "workerId" : "c-standalone-fw-localhost-8080"\n  }\n} ]\n}\n\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"verify-a-cassandra-sink",children:"Verify a Cassandra sink"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Produce some messages to the input topic of the Cassandra sink ",(0,r.jsx)(e.em,{children:"test_cassandra"}),"."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'\nfor i in {0..9}; do bin/pulsar-client produce -m "key-$i" -n 1 test_cassandra; done\n\n'})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Inspect the status of the Cassandra sink ",(0,r.jsx)(e.em,{children:"test_cassandra"}),"."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\nbin/pulsar-admin sinks status \\\n    --tenant public \\\n    --namespace default \\\n    --name cassandra-test-sink\n\n"})}),"\n",(0,r.jsxs)(e.p,{children:["You can see 10 messages are processed by the Cassandra sink ",(0,r.jsx)(e.em,{children:"test_cassandra"}),"."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Example output"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'\n{\n  "numInstances" : 1,\n  "numRunning" : 1,\n  "instances" : [ {\n    "instanceId" : 0,\n    "status" : {\n      "running" : true,\n      "error" : "",\n      "numRestarts" : 0,\n      "numReadFromPulsar" : 10,\n      "numSystemExceptions" : 0,\n      "latestSystemExceptions" : [ ],\n      "numSinkExceptions" : 0,\n      "latestSinkExceptions" : [ ],\n      "numWrittenToSink" : 10,\n      "lastReceivedTime" : 1551685489136,\n      "workerId" : "c-standalone-fw-localhost-8080"\n    }\n  } ]\n}\n\n'})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Use ",(0,r.jsx)(e.code,{children:"cqlsh"})," to connect to the Cassandra cluster."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\ndocker exec -ti cassandra cqlsh localhost\n\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Check the data of the Cassandra table ",(0,r.jsx)(e.em,{children:"pulsar_test_table"}),"."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\ncqlsh> use pulsar_test_keyspace;\ncqlsh:pulsar_test_keyspace> select * from pulsar_test_table;\n\nkey    | col\n--------+--------\n key-5 |  key-5\n key-0 |  key-0\n key-9 |  key-9\n key-2 |  key-2\n key-1 |  key-1\n key-3 |  key-3\n key-6 |  key-6\n key-7 |  key-7\n key-4 |  key-4\n key-8 |  key-8\n\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"delete-a-cassandra-sink",children:"Delete a Cassandra Sink"}),"\n",(0,r.jsxs)(e.p,{children:["You can use the ",(0,r.jsx)(e.a,{href:"/docs/2.7.5/io-cli",children:"Connector Admin CLI"}),"\nto delete a connector and perform other operations on it."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\nbin/pulsar-admin sinks delete \\\n    --tenant public \\\n    --namespace default \\\n    --name cassandra-test-sink\n\n"})}),"\n",(0,r.jsx)(e.h2,{id:"connect-pulsar-to-postgresql",children:"Connect Pulsar to PostgreSQL"}),"\n",(0,r.jsx)(e.p,{children:"This section demonstrates how to connect Pulsar to PostgreSQL."}),"\n",(0,r.jsx)(e.admonition,{type:"tip",children:(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Make sure you have Docker installed. If you do not have one, see ",(0,r.jsx)(e.a,{href:"https://docs.docker.com/docker-for-mac/install/",children:"install Docker"}),"."]}),"\n",(0,r.jsx)(e.li,{children:"The JDBC sink connector pulls messages from Pulsar topics and persists the messages to ClickHouse, MariaDB, PostgreSQL, or SQlite."}),"\n"]})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsxs)(e.p,{children:["For more information, see ",(0,r.jsx)(e.a,{href:"/docs/2.7.5/io-jdbc-sink",children:"JDBC sink connector"}),"."]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"setup-a-postgresql-cluster",children:"Setup a PostgreSQL cluster"}),"\n",(0,r.jsx)(e.p,{children:"This example uses the PostgreSQL 12 docker image to start a single-node PostgreSQL cluster in Docker."}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Pull the PostgreSQL 12 image from Docker."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\n$ docker pull postgres:12\n\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Start PostgreSQL."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\n$ docker run -d -it --rm \\\n--name pulsar-postgres \\\n-p 5432:5432 \\\n-e POSTGRES_PASSWORD=password \\\n-e POSTGRES_USER=postgres \\\npostgres:12\n\n"})}),"\n",(0,r.jsx)(e.h4,{id:"tip",children:"Tip"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Flag"}),(0,r.jsx)(e.th,{children:"Description"}),(0,r.jsx)(e.th,{children:"This example"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"-d"})}),(0,r.jsx)(e.td,{children:"To start a container in detached mode."}),(0,r.jsx)(e.td,{children:"/"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"-it"})}),(0,r.jsx)(e.td,{children:"Keep STDIN open even if not attached and allocate a terminal."}),(0,r.jsx)(e.td,{children:"/"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"--rm"})}),(0,r.jsx)(e.td,{children:"Remove the container automatically when it exits."}),(0,r.jsx)(e.td,{children:"/"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"-name"})}),(0,r.jsx)(e.td,{children:"Assign a name to the container."}),(0,r.jsxs)(e.td,{children:["This example specifies ",(0,r.jsx)(e.em,{children:"pulsar-postgres"})," for the container."]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"-p"})}),(0,r.jsx)(e.td,{children:"Publish the port of the container to the host."}),(0,r.jsxs)(e.td,{children:["This example publishes the port ",(0,r.jsx)(e.em,{children:"5432"})," of the container to the host."]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"-e"})}),(0,r.jsx)(e.td,{children:"Set environment variables."}),(0,r.jsxs)(e.td,{children:["This example sets the following variables:",(0,r.jsx)("br",{}),"- The password for the user is ",(0,r.jsx)(e.em,{children:"password"}),".",(0,r.jsx)("br",{}),"- The name for the user is ",(0,r.jsx)(e.em,{children:"postgres"}),"."]})]})]})]}),"\n",(0,r.jsx)(e.admonition,{type:"tip",children:(0,r.jsxs)(e.p,{children:["For more information about Docker commands, see ",(0,r.jsx)(e.a,{href:"https://docs.docker.com/engine/reference/commandline/run/",children:"Docker CLI"}),"."]})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Check if PostgreSQL has been started successfully."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\n$ docker logs -f pulsar-postgres\n\n"})}),"\n",(0,r.jsx)(e.p,{children:"PostgreSQL has been started successfully if the following message appears."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-text",children:'\n2020-05-11 20:09:24.492 UTC [1] LOG:  starting PostgreSQL 12.2 (Debian 12.2-2.pgdg100+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 8.3.0-6) 8.3.0, 64-bit\n2020-05-11 20:09:24.492 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432\n2020-05-11 20:09:24.492 UTC [1] LOG:  listening on IPv6 address "::", port 5432\n2020-05-11 20:09:24.499 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"\n2020-05-11 20:09:24.523 UTC [55] LOG:  database system was shut down at 2020-05-11 20:09:24 UTC\n2020-05-11 20:09:24.533 UTC [1] LOG:  database system is ready to accept connections\n\n'})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Access to PostgreSQL."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\n$ docker exec -it pulsar-postgres /bin/bash\n\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Create a PostgreSQL table ",(0,r.jsx)(e.em,{children:"pulsar_postgres_jdbc_sink"}),"."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\n$ psql -U postgres postgres\n\npostgres=# create table if not exists pulsar_postgres_jdbc_sink\n(\nid serial PRIMARY KEY,\nname VARCHAR(255) NOT NULL\n);\n\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"configure-a-jdbc-sink",children:"Configure a JDBC sink"}),"\n",(0,r.jsx)(e.p,{children:"Now we have a PostgreSQL running locally."}),"\n",(0,r.jsx)(e.p,{children:"In this section, you need to configure a JDBC sink connector."}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Add a configuration file."}),"\n",(0,r.jsx)(e.p,{children:"To run a JDBC sink connector, you need to prepare a YAML configuration file including the information that Pulsar connector runtime needs to know."}),"\n",(0,r.jsx)(e.p,{children:"For example, how Pulsar connector can find the PostgreSQL cluster, what is the JDBC URL and the table that Pulsar connector uses for writing messages to."}),"\n",(0,r.jsxs)(e.p,{children:["Create a ",(0,r.jsx)(e.em,{children:"pulsar-postgres-jdbc-sink.yaml"})," file, copy the following contents to this file, and place the file in the ",(0,r.jsx)(e.code,{children:"pulsar/connectors"})," folder."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:'\nconfigs:\n  userName: "postgres"\n  password: "password"\n  jdbcUrl: "jdbc:postgresql://localhost:5432/pulsar_postgres_jdbc_sink"\n  tableName: "pulsar_postgres_jdbc_sink"\n\n'})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Create a schema."}),"\n",(0,r.jsxs)(e.p,{children:["Create a ",(0,r.jsx)(e.em,{children:"avro-schema"})," file, copy the following contents to this file, and place the file in the ",(0,r.jsx)(e.code,{children:"pulsar/connectors"})," folder."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'\n{\n  "type": "AVRO",\n  "schema": "{\\"type\\":\\"record\\",\\"name\\":\\"Test\\",\\"fields\\":[{\\"name\\":\\"id\\",\\"type\\":[\\"null\\",\\"int\\"]},{\\"name\\":\\"name\\",\\"type\\":[\\"null\\",\\"string\\"]}]}",\n  "properties": {}\n}\n\n'})}),"\n",(0,r.jsx)(e.admonition,{type:"tip",children:(0,r.jsxs)(e.p,{children:["For more information about AVRO, see ",(0,r.jsx)(e.a,{href:"https://avro.apache.org/docs/1.9.1/",children:"Apache Avro"}),"."]})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Upload a schema to a topic."}),"\n",(0,r.jsxs)(e.p,{children:["This example uploads the ",(0,r.jsx)(e.em,{children:"avro-schema"})," schema to the ",(0,r.jsx)(e.em,{children:"pulsar-postgres-jdbc-sink-topic"})," topic."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\n$ bin/pulsar-admin schemas upload pulsar-postgres-jdbc-sink-topic -f ./connectors/avro-schema\n\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Check if the schema has been uploaded successfully."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\n$ bin/pulsar-admin schemas get pulsar-postgres-jdbc-sink-topic\n\n"})}),"\n",(0,r.jsx)(e.p,{children:"The schema has been uploaded successfully if the following message appears."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'\n{"name":"pulsar-postgres-jdbc-sink-topic","schema":"{\\"type\\":\\"record\\",\\"name\\":\\"Test\\",\\"fields\\":[{\\"name\\":\\"id\\",\\"type\\":[\\"null\\",\\"int\\"]},{\\"name\\":\\"name\\",\\"type\\":[\\"null\\",\\"string\\"]}]}","type":"AVRO","properties":{}}\n\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"create-a-jdbc-sink",children:"Create a JDBC sink"}),"\n",(0,r.jsxs)(e.p,{children:["You can use the ",(0,r.jsx)(e.a,{href:"/docs/2.7.5/io-cli",children:"Connector Admin CLI"}),"\nto create a sink connector and perform other operations on it."]}),"\n",(0,r.jsx)(e.p,{children:"This example creates a sink connector and specifies the desired information."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\n$ bin/pulsar-admin sinks create \\\n--archive ./connectors/pulsar-io-jdbc-postgres-2.7.5.nar \\\n--inputs pulsar-postgres-jdbc-sink-topic \\\n--name pulsar-postgres-jdbc-sink \\\n--sink-config-file ./connectors/pulsar-postgres-jdbc-sink.yaml \\\n--parallelism 1\n\n"})}),"\n",(0,r.jsxs)(e.p,{children:["Once the command is executed, Pulsar creates a sink connector ",(0,r.jsx)(e.em,{children:"pulsar-postgres-jdbc-sink"}),"."]}),"\n",(0,r.jsxs)(e.p,{children:["This sink connector runs as a Pulsar Function and writes the messages produced in the topic ",(0,r.jsx)(e.em,{children:"pulsar-postgres-jdbc-sink-topic"})," to the PostgreSQL table ",(0,r.jsx)(e.em,{children:"pulsar_postgres_jdbc_sink"}),"."]}),"\n",(0,r.jsx)(e.h4,{id:"tip-1",children:"Tip"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Flag"}),(0,r.jsx)(e.th,{children:"Description"}),(0,r.jsx)(e.th,{children:"This example"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"--archive"})}),(0,r.jsx)(e.td,{children:"The path to the archive file for the sink."}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.em,{children:"pulsar-io-jdbc-postgres-2.7.5.nar"})})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"--inputs"})}),(0,r.jsxs)(e.td,{children:["The input topic(s) of the sink. ",(0,r.jsx)("br",{}),(0,r.jsx)("br",{})," Multiple topics can be specified as a comma-separated list."]}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"--name"})}),(0,r.jsx)(e.td,{children:"The name of the sink."}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.em,{children:"pulsar-postgres-jdbc-sink"})})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"--sink-config-file"})}),(0,r.jsx)(e.td,{children:"The path to a YAML config file specifying the configuration of the sink."}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.em,{children:"pulsar-postgres-jdbc-sink.yaml"})})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"--parallelism"})}),(0,r.jsxs)(e.td,{children:["The parallelism factor of the sink. ",(0,r.jsx)("br",{}),(0,r.jsx)("br",{})," For example, the number of sink instances to run."]}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.em,{children:"1"})})]})]})]}),"\n",(0,r.jsx)(e.admonition,{type:"tip",children:(0,r.jsxs)(e.p,{children:["For more information about ",(0,r.jsx)(e.code,{children:"pulsar-admin sinks create options"}),", see ",(0,r.jsx)(e.a,{href:"/docs/2.7.5/io-cli#sinks",children:"here"}),"."]})}),"\n",(0,r.jsx)(e.p,{children:"The sink has been created successfully if the following message appears."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'\n"Created successfully"\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"inspect-a-jdbc-sink",children:"Inspect a JDBC sink"}),"\n",(0,r.jsxs)(e.p,{children:["You can use the ",(0,r.jsx)(e.a,{href:"/docs/2.7.5/io-cli",children:"Connector Admin CLI"}),"\nto monitor a connector and perform other operations on it."]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"List all running JDBC sink(s)."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\n$ bin/pulsar-admin sinks list \\\n--tenant public \\\n--namespace default\n\n"})}),"\n",(0,r.jsx)(e.admonition,{type:"tip",children:(0,r.jsxs)(e.p,{children:["For more information about ",(0,r.jsx)(e.code,{children:"pulsar-admin sinks list options"}),", see ",(0,r.jsx)(e.a,{href:"io-cli.md/#list-1",children:"here"}),"."]})}),"\n",(0,r.jsxs)(e.p,{children:["The result shows that only the ",(0,r.jsx)(e.em,{children:"postgres-jdbc-sink"})," sink is running."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'\n[\n"pulsar-postgres-jdbc-sink"\n]\n\n'})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Get the information of a JDBC sink."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\n$ bin/pulsar-admin sinks get \\\n--tenant public \\\n--namespace default \\\n--name pulsar-postgres-jdbc-sink\n\n"})}),"\n",(0,r.jsx)(e.admonition,{type:"tip",children:(0,r.jsxs)(e.p,{children:["For more information about ",(0,r.jsx)(e.code,{children:"pulsar-admin sinks get options"}),", see ",(0,r.jsx)(e.a,{href:"io-cli.md/#get-1",children:"here"}),"."]})}),"\n",(0,r.jsx)(e.p,{children:"The result shows the information of the sink connector, including tenant, namespace, topic and so on."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'\n{\n"tenant": "public",\n"namespace": "default",\n"name": "pulsar-postgres-jdbc-sink",\n"className": "org.apache.pulsar.io.jdbc.PostgresJdbcAutoSchemaSink",\n"inputSpecs": {\n  "pulsar-postgres-jdbc-sink-topic": {\n    "isRegexPattern": false\n  }\n},\n"configs": {\n  "password": "password",\n  "jdbcUrl": "jdbc:postgresql://localhost:5432/pulsar_postgres_jdbc_sink",\n  "userName": "postgres",\n  "tableName": "pulsar_postgres_jdbc_sink"\n},\n"parallelism": 1,\n"processingGuarantees": "ATLEAST_ONCE",\n"retainOrdering": false,\n"autoAck": true\n}\n\n'})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Get the status of a JDBC sink"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\n$ bin/pulsar-admin sinks status \\\n--tenant public \\\n--namespace default \\\n--name pulsar-postgres-jdbc-sink\n\n"})}),"\n",(0,r.jsx)(e.admonition,{type:"tip",children:(0,r.jsxs)(e.p,{children:["For more information about ",(0,r.jsx)(e.code,{children:"pulsar-admin sinks status options"}),", see ",(0,r.jsx)(e.a,{href:"io-cli.md/#status-1",children:"here"}),"."]})}),"\n",(0,r.jsx)(e.p,{children:"The result shows the current status of sink connector, including the number of instance, running status, worker ID and so on."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'\n{\n"numInstances" : 1,\n"numRunning" : 1,\n"instances" : [ {\n  "instanceId" : 0,\n  "status" : {\n    "running" : true,\n    "error" : "",\n    "numRestarts" : 0,\n    "numReadFromPulsar" : 0,\n    "numSystemExceptions" : 0,\n    "latestSystemExceptions" : [ ],\n    "numSinkExceptions" : 0,\n    "latestSinkExceptions" : [ ],\n    "numWrittenToSink" : 0,\n    "lastReceivedTime" : 0,\n    "workerId" : "c-standalone-fw-192.168.2.52-8080"\n  }\n} ]\n}\n\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"stop-a-jdbc-sink",children:"Stop a JDBC sink"}),"\n",(0,r.jsxs)(e.p,{children:["You can use the ",(0,r.jsx)(e.a,{href:"/docs/2.7.5/io-cli",children:"Connector Admin CLI"}),"\nto stop a connector and perform other operations on it."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\n$ bin/pulsar-admin sinks stop \\\n--tenant public \\\n--namespace default \\\n--name pulsar-postgres-jdbc-sink\n\n"})}),"\n",(0,r.jsx)(e.admonition,{type:"tip",children:(0,r.jsxs)(e.p,{children:["For more information about ",(0,r.jsx)(e.code,{children:"pulsar-admin sinks stop options"}),", see ",(0,r.jsx)(e.a,{href:"io-cli.md/#stop-1",children:"here"}),"."]})}),"\n",(0,r.jsx)(e.p,{children:"The sink instance has been stopped successfully if the following message disappears."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'\n"Stopped successfully"\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"restart-a-jdbc-sink",children:"Restart a JDBC sink"}),"\n",(0,r.jsxs)(e.p,{children:["You can use the ",(0,r.jsx)(e.a,{href:"/docs/2.7.5/io-cli",children:"Connector Admin CLI"}),"\nto restart a connector and perform other operations on it."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\n$ bin/pulsar-admin sinks restart \\\n--tenant public \\\n--namespace default \\\n--name pulsar-postgres-jdbc-sink\n\n"})}),"\n",(0,r.jsx)(e.admonition,{type:"tip",children:(0,r.jsxs)(e.p,{children:["For more information about ",(0,r.jsx)(e.code,{children:"pulsar-admin sinks restart options"}),", see ",(0,r.jsx)(e.a,{href:"io-cli.md/#restart-1",children:"here"}),"."]})}),"\n",(0,r.jsx)(e.p,{children:"The sink instance has been started successfully if the following message disappears."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'\n"Started successfully"\n\n'})}),"\n",(0,r.jsx)(e.admonition,{type:"tip",children:(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Optionally, you can run a standalone sink connector using ",(0,r.jsx)(e.code,{children:"pulsar-admin sinks localrun options"}),".\nNote that ",(0,r.jsx)(e.code,{children:"pulsar-admin sinks localrun options"})," ",(0,r.jsx)(e.strong,{children:"runs a sink connector locally"}),", while ",(0,r.jsx)(e.code,{children:"pulsar-admin sinks start options"})," ",(0,r.jsx)(e.strong,{children:"starts a sink connector in a cluster"}),"."]}),"\n",(0,r.jsxs)(e.li,{children:["For more information about ",(0,r.jsx)(e.code,{children:"pulsar-admin sinks localrun options"}),", see ",(0,r.jsx)(e.a,{href:"/docs/2.7.5/io-cli#localrun-1",children:"here"}),"."]}),"\n"]})}),"\n",(0,r.jsx)(e.h3,{id:"update-a-jdbc-sink",children:"Update a JDBC sink"}),"\n",(0,r.jsxs)(e.p,{children:["You can use the ",(0,r.jsx)(e.a,{href:"/docs/2.7.5/io-cli",children:"Connector Admin CLI"}),"\nto update a connector and perform other operations on it."]}),"\n",(0,r.jsxs)(e.p,{children:["This example updates the parallelism of the ",(0,r.jsx)(e.em,{children:"pulsar-postgres-jdbc-sink"})," sink connector to 2."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\n$ bin/pulsar-admin sinks update \\\n--name pulsar-postgres-jdbc-sink \\\n--parallelism 2\n\n"})}),"\n",(0,r.jsx)(e.admonition,{type:"tip",children:(0,r.jsxs)(e.p,{children:["For more information about ",(0,r.jsx)(e.code,{children:"pulsar-admin sinks update options"}),", see ",(0,r.jsx)(e.a,{href:"io-cli.md/#update-1",children:"here"}),"."]})}),"\n",(0,r.jsx)(e.p,{children:"The sink connector has been updated successfully if the following message disappears."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'\n"Updated successfully"\n\n'})}),"\n",(0,r.jsx)(e.p,{children:"This example double-checks the information."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\n$ bin/pulsar-admin sinks get \\\n--tenant public \\\n--namespace default \\\n--name pulsar-postgres-jdbc-sink\n\n"})}),"\n",(0,r.jsx)(e.p,{children:"The result shows that the parallelism is 2."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'\n{\n  "tenant": "public",\n  "namespace": "default",\n  "name": "pulsar-postgres-jdbc-sink",\n  "className": "org.apache.pulsar.io.jdbc.PostgresJdbcAutoSchemaSink",\n  "inputSpecs": {\n    "pulsar-postgres-jdbc-sink-topic": {\n      "isRegexPattern": false\n    }\n  },\n  "configs": {\n    "password": "password",\n    "jdbcUrl": "jdbc:postgresql://localhost:5432/pulsar_postgres_jdbc_sink",\n    "userName": "postgres",\n    "tableName": "pulsar_postgres_jdbc_sink"\n  },\n  "parallelism": 2,\n  "processingGuarantees": "ATLEAST_ONCE",\n  "retainOrdering": false,\n  "autoAck": true\n}\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"delete-a-jdbc-sink",children:"Delete a JDBC sink"}),"\n",(0,r.jsxs)(e.p,{children:["You can use the ",(0,r.jsx)(e.a,{href:"/docs/2.7.5/io-cli",children:"Connector Admin CLI"}),"\nto delete a connector and perform other operations on it."]}),"\n",(0,r.jsxs)(e.p,{children:["This example deletes the ",(0,r.jsx)(e.em,{children:"pulsar-postgres-jdbc-sink"})," sink connector."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\n$ bin/pulsar-admin sinks delete \\\n--tenant public \\\n--namespace default \\\n--name pulsar-postgres-jdbc-sink\n\n"})}),"\n",(0,r.jsx)(e.admonition,{type:"tip",children:(0,r.jsxs)(e.p,{children:["For more information about ",(0,r.jsx)(e.code,{children:"pulsar-admin sinks delete options"}),", see ",(0,r.jsx)(e.a,{href:"io-cli.md/#delete-1",children:"here"}),"."]})}),"\n",(0,r.jsx)(e.p,{children:"The sink connector has been deleted successfully if the following message appears."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-text",children:'\n"Deleted successfully"\n\n'})}),"\n",(0,r.jsx)(e.p,{children:"This example double-checks the status of the sink connector."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\n$ bin/pulsar-admin sinks get \\\n--tenant public \\\n--namespace default \\\n--name pulsar-postgres-jdbc-sink\n\n"})}),"\n",(0,r.jsx)(e.p,{children:"The result shows that the sink connector does not exist."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-text",children:"\nHTTP 404 Not Found\n\nReason: Sink pulsar-postgres-jdbc-sink doesn't exist\n\n"})})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}},28453:(n,e,s)=>{s.d(e,{R:()=>t,x:()=>c});var a=s(96540);const r={},i=a.createContext(r);function t(n){const e=a.useContext(i);return a.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:t(n.components),a.createElement(i.Provider,{value:e},n.children)}}}]);