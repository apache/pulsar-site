"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[51328],{94357:(e,n,c)=>{c.r(n),c.d(n,{assets:()=>t,contentTitle:()=>i,default:()=>u,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"security-bouncy-castle","title":"Bouncy Castle Providers","description":"BouncyCastle Introduce","source":"@site/versioned_docs/version-2.6.3/security-bouncy-castle.md","sourceDirName":".","slug":"/security-bouncy-castle","permalink":"/docs/2.6.3/security-bouncy-castle","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/pulsar-site/edit/main/versioned_docs/version-2.6.3/security-bouncy-castle.md","tags":[],"version":"2.6.3","frontMatter":{"id":"security-bouncy-castle","title":"Bouncy Castle Providers","sidebar_label":"Bouncy Castle Providers","original_id":"security-bouncy-castle"},"sidebar":"docsSidebar","previous":{"title":"Extending","permalink":"/docs/2.6.3/security-extending"},"next":{"title":"Pulsar Perf","permalink":"/docs/2.6.3/performance-pulsar-perf"}}');var o=c(74848),r=c(28453);const d={id:"security-bouncy-castle",title:"Bouncy Castle Providers",sidebar_label:"Bouncy Castle Providers",original_id:"security-bouncy-castle"},i=void 0,t={},a=[{value:"BouncyCastle Introduce",id:"bouncycastle-introduce",level:2},{value:"Include dependencies of BC-non-FIPS",id:"include-dependencies-of-bc-non-fips",level:2},{value:"Pulsar Client and Broker dependencies on BC-non-FIPS",id:"pulsar-client-and-broker-dependencies-on-bc-non-fips",level:3},{value:"Exclude BC-non-FIPS and include BC-FIPS",id:"exclude-bc-non-fips-and-include-bc-fips",level:2},{value:"BC-FIPS",id:"bc-fips",level:3}];function l(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"bouncycastle-introduce",children:"BouncyCastle Introduce"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"Bouncy Castle"})," is a Java library that complements the default Java Cryptographic Extension (JCE),\nand it many more cipher suites and algorithms than the default JCE provided by Sun."]}),"\n",(0,o.jsxs)(n.p,{children:["In addition to that, ",(0,o.jsx)(n.code,{children:"Bouncy Castle"})," has lots of utilities for reading arcane formats like PEM and ASN.1 that no sane person would want to rewrite themselves."]}),"\n",(0,o.jsxs)(n.p,{children:["In Pulsar, security and crypto have dependencies on BouncyCastle Jars. For the detailed installing and configuring Bouncy Castle FIPS, see ",(0,o.jsx)(n.a,{href:"https://www.bouncycastle.org/documentation.html",children:"BC FIPS Documentation"}),", especially the ",(0,o.jsx)(n.strong,{children:"User Guides"})," and ",(0,o.jsx)(n.strong,{children:"Security Policy"})," PDFs."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"Bouncy Castle"})," provides both ",(0,o.jsx)(n.a,{href:"https://www.bouncycastle.org/fips_faq.html",children:"FIPS"})," and non-FIPS version. But in a JVM, you can not include both of the 2 versions, and you need to exclude the current version before include the other."]}),"\n",(0,o.jsxs)(n.p,{children:["In Pulsar, the security and crypto methods also depends on ",(0,o.jsx)(n.code,{children:"Bouncy Castle"}),", especially in ",(0,o.jsx)(n.a,{href:"/docs/2.6.3/security-tls-authentication",children:"TLS Authentication"})," and ",(0,o.jsx)(n.a,{href:"/docs/2.6.3/security-encryption",children:"Transport Encryption"}),". This document contains the configuration between BouncyCastle FIPS(BC-FIPS) and non-FIPS(BC-non-FIPS) version while using Pulsar."]}),"\n",(0,o.jsx)(n.h2,{id:"include-dependencies-of-bc-non-fips",children:"Include dependencies of BC-non-FIPS"}),"\n",(0,o.jsx)(n.p,{children:"By default, BouncyCastle non-FIPS version is build along with Pulsar's Broker and Java client."}),"\n",(0,o.jsxs)(n.p,{children:["Pulsar module ",(0,o.jsx)(n.code,{children:"bouncy-castle-bc"}),", which defined by ",(0,o.jsx)(n.code,{children:"bouncy-castle/bc/pom.xml"})," contains the needed non-FIPS jars for Pulsar."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:"\n    <dependency>\n      <groupId>org.bouncycastle</groupId>\n      <artifactId>bcpkix-jdk15on</artifactId>\n      <version>${bouncycastle.version}</version>\n    </dependency>\n\n    <dependency>\n      <groupId>org.bouncycastle</groupId>\n      <artifactId>bcprov-ext-jdk15on</artifactId>\n      <version>${bouncycastle.version}</version>\n    </dependency>\n\n"})}),"\n",(0,o.jsxs)(n.p,{children:["And based on Pulsar module ",(0,o.jsx)(n.code,{children:"bouncy-castle-bc"}),", Pulsar shades a fat jar in module ",(0,o.jsx)(n.code,{children:"bouncy-castle-bc-shaded"})," that contains needed classes of BouncyCastle non-FIPS jars.\nBy using this ",(0,o.jsx)(n.code,{children:"bouncy-castle-bc-shaded"})," module, user can easily include and exclude BouncyCastle non-FIPS jars."]}),"\n",(0,o.jsx)(n.h3,{id:"pulsar-client-and-broker-dependencies-on-bc-non-fips",children:"Pulsar Client and Broker dependencies on BC-non-FIPS"}),"\n",(0,o.jsxs)(n.p,{children:["Pulsar Client(",(0,o.jsx)(n.code,{children:"pulsar-client-original"}),") module include BouncyCastle non-FIPS jars by add dependency like this:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:"\n    <dependency>\n      <groupId>org.apache.pulsar</groupId>\n      <artifactId>bouncy-castle-bc-shaded</artifactId>\n      <version>${project.parent.version}</version>\n    </dependency>\n\n"})}),"\n",(0,o.jsxs)(n.p,{children:["And Pulsar Broker (",(0,o.jsx)(n.code,{children:"pulsar-broker"}),") module include BouncyCastle non-FIPS jars by indirectly include Pulsar Client(",(0,o.jsx)(n.code,{children:"pulsar-client-original"}),") module."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:"\n    <dependency>\n      <groupId>org.apache.pulsar</groupId>\n      <artifactId>pulsar-client-original</artifactId>\n      <version>${project.version}</version>\n    </dependency>\n\n"})}),"\n",(0,o.jsx)(n.h2,{id:"exclude-bc-non-fips-and-include-bc-fips",children:"Exclude BC-non-FIPS and include BC-FIPS"}),"\n",(0,o.jsx)(n.p,{children:"After understanding the above dependencies, user can easily exclude non-FIPS version and include FIPS version."}),"\n",(0,o.jsx)(n.h3,{id:"bc-fips",children:"BC-FIPS"}),"\n",(0,o.jsxs)(n.p,{children:["Pulsar module ",(0,o.jsx)(n.code,{children:"bouncy-castle-bcfips"}),", which defined by ",(0,o.jsx)(n.code,{children:"bouncy-castle/bcfips/pom.xml"})," contains the needed FIPS jars for Pulsar."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:"\n    <dependency>\n      <groupId>org.bouncycastle</groupId>\n      <artifactId>bc-fips</artifactId>\n      <version>${bouncycastlefips.version}</version>\n    </dependency>\n\n    <dependency>\n      <groupId>org.bouncycastle</groupId>\n      <artifactId>bcpkix-fips</artifactId>\n      <version>${bouncycastlefips.version}</version>\n    </dependency>\n\n"})}),"\n",(0,o.jsxs)(n.p,{children:["User can choose include module ",(0,o.jsx)(n.code,{children:"bouncy-castle-bcfips"})," module directly, or include original BC-FIPS jars."]}),"\n",(0,o.jsx)(n.p,{children:"For example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:"\n    <dependency>\n      <groupId>${project.groupId}</groupId>\n      <artifactId>pulsar-broker</artifactId>\n      <version>${project.version}</version>\n      <exclusions>\n        <exclusion>\n          <groupId>${project.groupId}</groupId>\n          <artifactId>bouncy-castle-bc-shaded</artifactId>\n        </exclusion>\n      </exclusions>\n    </dependency>\n\n    \x3c!--exclude bouncy castle non-FIPS version, then load fips version--\x3e\n    <dependency>\n      <groupId>org.bouncycastle</groupId>\n      <artifactId>bc-fips</artifactId>\n      <version>${bouncycastlefips.version}</version>\n    </dependency>\n\n    <dependency>\n      <groupId>org.bouncycastle</groupId>\n      <artifactId>bcpkix-fips</artifactId>\n      <version>${bouncycastlefips.version}</version>\n    </dependency>\n\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Besides this, module ",(0,o.jsx)(n.code,{children:"bouncy-castle-bcfips"})," builds contain an output with format NAR, you can set java environment by ",(0,o.jsx)(n.code,{children:"-DBcPath='nar/file/path'"}),", Pulsar will auto load it."]}),"\n",(0,o.jsxs)(n.p,{children:["For more example, you can reference module ",(0,o.jsx)(n.code,{children:"bcfips-include-test"})," and ",(0,o.jsx)(n.code,{children:"bcfips-nar-test"}),"."]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,n,c)=>{c.d(n,{R:()=>d,x:()=>i});var s=c(96540);const o={},r=s.createContext(o);function d(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:d(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);