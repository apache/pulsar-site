"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[36910],{68397:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"functions-deploy-trigger","title":"Trigger a function","description":"Triggering a function means that you invoke a function by producing a message to one of the input topics via the CLI. You can use the trigger command to trigger a function at any time.","source":"@site/versioned_docs/version-2.11.x/functions-deploy-trigger.md","sourceDirName":".","slug":"/functions-deploy-trigger","permalink":"/docs/2.11.x/functions-deploy-trigger","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/pulsar-site/edit/main/versioned_docs/version-2.11.x/functions-deploy-trigger.md","tags":[],"version":"2.11.x","frontMatter":{"id":"functions-deploy-trigger","title":"Trigger a function","sidebar_label":"Trigger a function"},"sidebar":"docsSidebar","previous":{"title":"Use built-in functions","permalink":"/docs/2.11.x/functions-deploy-cluster-builtin"},"next":{"title":"How to develop","permalink":"/docs/2.11.x/functions-develop"}}');var s=t(74848),o=t(28453);const r={id:"functions-deploy-trigger",title:"Trigger a function",sidebar_label:"Trigger a function"},c=void 0,a={},l=[];function u(n){const e={a:"a",admonition:"admonition",code:"code",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.p,{children:["Triggering a function means that you invoke a function by producing a message to one of the input topics via the CLI. You can use the ",(0,s.jsx)(e.code,{children:"trigger"})," command to trigger a function at any time."]}),"\n",(0,s.jsx)(e.admonition,{type:"tip",children:(0,s.jsxs)(e.p,{children:["With the ",(0,s.jsx)(e.a,{href:"pathname:///reference/#/2.11.x/pulsar-admin/",children:(0,s.jsx)(e.code,{children:"pulsar-admin"})})," CLI, you can send messages to functions without using the ",(0,s.jsx)(e.a,{href:"pathname:///reference/#/2.11.x/pulsar-client/",children:(0,s.jsx)(e.code,{children:"pulsar-client"})})," tool or a language-specific client library."]})}),"\n",(0,s.jsx)(e.p,{children:"To learn how to trigger a function, you can start with a Python function that returns a simple string based on the input as follows."}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'# myfunc.py\ndef process(input):\n    return "This function has been triggered with a value of {0}".format(input)\n'})}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"Run the function in cluster mode."}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"bin/pulsar-admin functions create \\\n  --tenant public \\\n  --namespace default \\\n  --name myfunc \\\n  --py myfunc.py \\\n  --classname myfunc \\\n  --inputs persistent://public/default/in \\\n  --output persistent://public/default/out\n"})}),"\n",(0,s.jsxs)(e.ol,{start:"2",children:["\n",(0,s.jsxs)(e.li,{children:["Assign a consumer to listen on the output topic for messages from the ",(0,s.jsx)(e.code,{children:"myfunc"})," function with the ",(0,s.jsx)(e.a,{href:"/docs/2.11.x/reference-cli-tools",children:(0,s.jsx)(e.code,{children:"pulsar-client consume"})})," command."]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"bin/pulsar-client consume persistent://public/default/out \\\n  --subscription-name my-subscription \\\n  --num-messages 0 # Listen indefinitely\n"})}),"\n",(0,s.jsxs)(e.ol,{start:"3",children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Trigger the function."}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'bin/pulsar-admin functions trigger \\\n  --tenant public \\\n  --namespace default \\\n  --name myfunc \\\n  --trigger-value "hello world"\n'})}),"\n",(0,s.jsx)(e.admonition,{type:"tip",children:(0,s.jsxs)(e.p,{children:["In the ",(0,s.jsx)(e.code,{children:"trigger"})," command, topic info is not required. You only need to specify basic information about the function, such as tenant, namespace, and function name."]})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"The consumer listening on the output topic produces something as follows in the log."}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-text",children:"----- got message -----\nThis function has been triggered with a value of hello world\n"})})]})}function d(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(u,{...n})}):u(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>c});var i=t(96540);const s={},o=i.createContext(s);function r(n){const e=i.useContext(o);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:r(n.components),i.createElement(o.Provider,{value:e},n.children)}}}]);