"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[35922],{28356:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"admin-api-permissions","title":"Managing permissions","description":"Permissions in Pulsar are managed at the namespace level","source":"@site/versioned_docs/version-2.6.0/admin-api-permissions.md","sourceDirName":".","slug":"/admin-api-permissions","permalink":"/docs/2.6.0/admin-api-permissions","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/pulsar-site/edit/main/versioned_docs/version-2.6.0/admin-api-permissions.md","tags":[],"version":"2.6.0","frontMatter":{"id":"admin-api-permissions","title":"Managing permissions","sidebar_label":"Permissions","original_id":"admin-api-permissions"},"sidebar":"docsSidebar","previous":{"title":"Namespaces","permalink":"/docs/2.6.0/admin-api-namespaces"},"next":{"title":"Persistent topics","permalink":"/docs/2.6.0/admin-api-persistent-topics"}}');var a=s(74848),r=s(28453);const o={id:"admin-api-permissions",title:"Managing permissions",sidebar_label:"Permissions",original_id:"admin-api-permissions"},c=void 0,l={},d=[{value:"Grant permissions",id:"grant-permissions",level:2},{value:"pulsar-admin",id:"pulsar-admin",level:3},{value:"REST API",id:"rest-api",level:3},{value:"Java",id:"java",level:3},{value:"Get permissions",id:"get-permissions",level:2},{value:"pulsar-admin",id:"pulsar-admin-1",level:3},{value:"REST API",id:"rest-api-1",level:3},{value:"Java",id:"java-1",level:3},{value:"Revoke permissions",id:"revoke-permissions",level:2},{value:"pulsar-admin",id:"pulsar-admin-2",level:3},{value:"REST API",id:"rest-api-2",level:3},{value:"Java",id:"java-2",level:3}];function t(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.p,{children:["Permissions in Pulsar are managed at the ",(0,a.jsx)(n.a,{href:"/docs/2.6.0/reference-terminology#namespace",children:"namespace"})," level\n(that is, within ",(0,a.jsx)(n.a,{href:"/docs/2.6.0/reference-terminology#tenant",children:"tenants"})," and ",(0,a.jsx)(n.a,{href:"/docs/2.6.0/reference-terminology#cluster",children:"clusters"}),")."]}),"\n",(0,a.jsx)(n.h2,{id:"grant-permissions",children:"Grant permissions"}),"\n",(0,a.jsxs)(n.p,{children:["You can grant permissions to specific roles for lists of operations such as ",(0,a.jsx)(n.code,{children:"produce"})," and ",(0,a.jsx)(n.code,{children:"consume"}),"."]}),"\n",(0,a.jsx)(n.h3,{id:"pulsar-admin",children:"pulsar-admin"}),"\n",(0,a.jsxs)(n.p,{children:["Use the ",(0,a.jsx)(n.a,{href:"/docs/2.6.0/reference-pulsar-admin#grant-permission",children:(0,a.jsx)(n.code,{children:"grant-permission"})})," subcommand and specify a namespace, actions using the ",(0,a.jsx)(n.code,{children:"--actions"})," flag, and a role using the ",(0,a.jsx)(n.code,{children:"--role"})," flag:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"\n$ pulsar-admin namespaces grant-permission test-tenant/ns1 \\\n  --actions produce,consume \\\n  --role admin10\n\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Wildcard authorization can be performed when ",(0,a.jsx)(n.code,{children:"authorizationAllowWildcardsMatching"})," is set to ",(0,a.jsx)(n.code,{children:"true"})," in ",(0,a.jsx)(n.code,{children:"broker.conf"}),"."]}),"\n",(0,a.jsx)(n.p,{children:"e.g."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"\n$ pulsar-admin namespaces grant-permission test-tenant/ns1 \\\n                        --actions produce,consume \\\n                        --role 'my.role.*'\n\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Then, roles ",(0,a.jsx)(n.code,{children:"my.role.1"}),", ",(0,a.jsx)(n.code,{children:"my.role.2"}),", ",(0,a.jsx)(n.code,{children:"my.role.foo"}),", ",(0,a.jsx)(n.code,{children:"my.role.bar"}),", etc. can produce and consume."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"\n$ pulsar-admin namespaces grant-permission test-tenant/ns1 \\\n                        --actions produce,consume \\\n                        --role '*.role.my'\n\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Then, roles ",(0,a.jsx)(n.code,{children:"1.role.my"}),", ",(0,a.jsx)(n.code,{children:"2.role.my"}),", ",(0,a.jsx)(n.code,{children:"foo.role.my"}),", ",(0,a.jsx)(n.code,{children:"bar.role.my"}),", etc. can produce and consume."]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Note"}),": A wildcard matching works at ",(0,a.jsx)(n.strong,{children:"the beginning or end of the role name only"}),"."]}),"\n",(0,a.jsx)(n.p,{children:"e.g."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"\n$ pulsar-admin namespaces grant-permission test-tenant/ns1 \\\n                        --actions produce,consume \\\n                        --role 'my.*.role'\n\n"})}),"\n",(0,a.jsxs)(n.p,{children:["In this case, only the role ",(0,a.jsx)(n.code,{children:"my.*.role"})," has permissions.\nRoles ",(0,a.jsx)(n.code,{children:"my.1.role"}),", ",(0,a.jsx)(n.code,{children:"my.2.role"}),", ",(0,a.jsx)(n.code,{children:"my.foo.role"}),", ",(0,a.jsx)(n.code,{children:"my.bar.role"}),", etc. ",(0,a.jsx)(n.strong,{children:"cannot"})," produce and consume."]}),"\n",(0,a.jsx)(n.h3,{id:"rest-api",children:"REST API"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsxs)(n.a,{href:"https://pulsar.apache.org/admin-rest-api?version=2.6.0&apiversion=v2#operation/grantPermissionOnNamespace",children:["POST /admin/v2/namespaces/",":tenant","/",":namespace","/permissions/",":role","/grantPermissionOnNamespace"]})}),"\n",(0,a.jsx)(n.h3,{id:"java",children:"Java"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"\nadmin.namespaces().grantPermissionOnNamespace(namespace, role, getAuthActions(actions));\n\n"})}),"\n",(0,a.jsx)(n.h2,{id:"get-permissions",children:"Get permissions"}),"\n",(0,a.jsx)(n.p,{children:"You can see which permissions have been granted to which roles in a namespace."}),"\n",(0,a.jsx)(n.h3,{id:"pulsar-admin-1",children:"pulsar-admin"}),"\n",(0,a.jsxs)(n.p,{children:["Use the ",(0,a.jsx)(n.a,{href:"reference-pulsar-admin#permissions",children:(0,a.jsx)(n.code,{children:"permissions"})})," subcommand and specify a namespace:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:'\n$ pulsar-admin namespaces permissions test-tenant/ns1\n{\n  "admin10": [\n    "produce",\n    "consume"\n  ]\n}\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"rest-api-1",children:"REST API"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsxs)(n.a,{href:"https://pulsar.apache.org/admin-rest-api?version=2.6.0&apiversion=v2#operation/getPermissions",children:["GET /admin/v2/namespaces/",":tenant","/",":namespace","/permissions/getPermissions"]})}),"\n",(0,a.jsx)(n.h3,{id:"java-1",children:"Java"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"\nadmin.namespaces().getPermissions(namespace);\n\n"})}),"\n",(0,a.jsx)(n.h2,{id:"revoke-permissions",children:"Revoke permissions"}),"\n",(0,a.jsx)(n.p,{children:"You can revoke permissions from specific roles, which means that those roles will no longer have access to the specified namespace."}),"\n",(0,a.jsx)(n.h3,{id:"pulsar-admin-2",children:"pulsar-admin"}),"\n",(0,a.jsxs)(n.p,{children:["Use the ",(0,a.jsx)(n.a,{href:"/docs/2.6.0/reference-pulsar-admin#revoke-permission",children:(0,a.jsx)(n.code,{children:"revoke-permission"})})," subcommand and specify a namespace and a role using the ",(0,a.jsx)(n.code,{children:"--role"})," flag:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"\n$ pulsar-admin namespaces revoke-permission test-tenant/ns1 \\\n  --role admin10\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"rest-api-2",children:"REST API"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsxs)(n.a,{href:"https://pulsar.apache.org/admin-rest-api?version=2.6.0&apiversion=v2#operation/revokePermissionsOnNamespace",children:["DELETE /admin/v2/namespaces/",":tenant","/",":namespace","/permissions/",":role","/revokePermissionsOnNamespace"]})}),"\n",(0,a.jsx)(n.h3,{id:"java-2",children:"Java"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"\nadmin.namespaces().revokePermissionsOnNamespace(namespace, role);\n\n"})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(t,{...e})}):t(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>c});var i=s(96540);const a={},r=i.createContext(a);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);