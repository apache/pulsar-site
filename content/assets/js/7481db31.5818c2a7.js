"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[43221],{20817:(e,l,s)=>{s.r(l),s.d(l,{assets:()=>h,contentTitle:()=>n,default:()=>o,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"versioned/pulsar-2.7.4","title":"Apache Pulsar 2.7.4","description":"2021-12-14","source":"@site/release-notes/versioned/pulsar-2.7.4.md","sourceDirName":"versioned","slug":"/versioned/pulsar-2.7.4","permalink":"/release-notes/versioned/pulsar-2.7.4","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/pulsar-site/edit/main/release-notes/versioned/pulsar-2.7.4.md","tags":[],"version":"current","frontMatter":{"id":"pulsar-2.7.4","title":"Apache Pulsar 2.7.4","sidebar_label":"Apache Pulsar 2.7.4"}}');var r=s(74848),t=s(28453);const a={id:"pulsar-2.7.4",title:"Apache Pulsar 2.7.4",sidebar_label:"Apache Pulsar 2.7.4"},n=void 0,h={},c=[{value:"2021-12-14",id:"2021-12-14",level:4},{value:"Security",id:"security",level:4},{value:"Broker",id:"broker",level:4},{value:"Dependency upgrade",id:"dependency-upgrade",level:4},{value:"Client",id:"client",level:4},{value:"Functions and Pulsar IO",id:"functions-and-pulsar-io",level:4},{value:"Tiered Storage",id:"tiered-storage",level:4},{value:"Build",id:"build",level:4}];function p(e){const l={a:"a",h4:"h4",li:"li",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.h4,{id:"2021-12-14",children:"2021-12-14"}),"\n",(0,r.jsx)(l.h4,{id:"security",children:"Security"}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsxs)(l.li,{children:["Upgrade log4j to 2.17.0 - ",(0,r.jsx)(l.a,{href:"https://pulsar.apache.org/blog/2021/12/11/Log4j-CVE/",children:"CVE-2021-45105"}),". ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/13392",children:"#13392"})]}),"\n",(0,r.jsxs)(l.li,{children:["Upgrade commons-compress to 1.21 - CVE-2021-35515, CVE-2021-35516, CVE-2021-35517 and CVE-2021-36090. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11345",children:"#11345"})]}),"\n"]}),"\n",(0,r.jsx)(l.h4,{id:"broker",children:"Broker"}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsxs)(l.li,{children:["Fix DispatchRateLimiter does not take effect. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/8611",children:"#8611"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix set-publish-rate when using preciseTopicPublishRateLimiterEnable=true. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/10384",children:"#10384"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix retention policy in topic policy not work. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11021",children:"#11021"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix GetTopicsOfNamespace with binary lookup service not check auth. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11172",children:"#11172"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix retention of keys in compaction. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11287",children:"#11287"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix using partitioned topic name to get Policy. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11294",children:"#11294"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix NPE when unloading persistent partitioned topic. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11310",children:"#11310"})]}),"\n",(0,r.jsxs)(l.li,{children:["Remove RateLimiter constructors and replace with builder usage. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11599",children:"#11599"})]}),"\n",(0,r.jsxs)(l.li,{children:["Add backoff for setting for getting topic policies. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11574",children:"#11574"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix decode compression managedLedgerInfo data. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11569",children:"#11569"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix some topic policy operation without backoff. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11560",children:"#11560"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix data lost when using earliest position to subscribe to a topic. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11547",children:"#11547"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix the schema deletion when delete topic with delete schema. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11501",children:"#11501"})]}),"\n",(0,r.jsxs)(l.li,{children:["Do not create system topic for heartbeat namespace. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11499",children:"#11499"})]}),"\n",(0,r.jsxs)(l.li,{children:["Compress managed ledger info. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11490",children:"#11490"})]}),"\n",(0,r.jsxs)(l.li,{children:["Add backoff for setting for getting topic policies. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11487",children:"#11487"})]}),"\n",(0,r.jsxs)(l.li,{children:["Solving precise rate limiting does not take effect. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11446",children:"#11446"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix replicated subscriptions direct memory leak. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11396",children:"#11396"})]}),"\n",(0,r.jsxs)(l.li,{children:["Close the replicator and replication client when deleting cluster. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11390",children:"#11390"})]}),"\n",(0,r.jsxs)(l.li,{children:["Invalidate the read handle after all cursors are consumed. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11389",children:"#11389"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix NPE when unloading persistent partitioned topic. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11386",children:"#11386"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix retention of keys in compaction. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11384",children:"#11384"})]}),"\n",(0,r.jsxs)(l.li,{children:["Disable replicate system topic across clusters. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11376",children:"#11376"})]}),"\n",(0,r.jsxs)(l.li,{children:["Parallel Precise Publish Rate Limiting Fix. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11372",children:"#11372"})]}),"\n",(0,r.jsxs)(l.li,{children:["Pulsar Admin List Subscription lists only subscriptions created for Partition-0 when partition specific subscriptions are created. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11355",children:"#11355"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix inconsistent behavior for Namespace bundles cache. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11346",children:"#11346"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix update ledger list to znode version mismatch failed, ledger not delete. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/12015",children:"#12015"})]}),"\n",(0,r.jsxs)(l.li,{children:["Print position info when can't find next valid position. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11969",children:"#11969"})]}),"\n",(0,r.jsxs)(l.li,{children:["Forbid to read other topic's data in managedLedger layer. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11913",children:"#11913"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix using partitioned topic name to get topic policies. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11897",children:"#11897"})]}),"\n",(0,r.jsxs)(l.li,{children:["Refine topic level backlog quota policies warning log. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11863",children:"#11863"})]}),"\n",(0,r.jsxs)(l.li,{children:["Producer getting producer busy is removing existing producer from list. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11804",children:"#11804"})]}),"\n",(0,r.jsxs)(l.li,{children:["Handle NPE and memory leak when full key range isn't covered with active consumers. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11749",children:"#11749"})]}),"\n",(0,r.jsxs)(l.li,{children:["Call .release() when discarding entry to prevent direct memory leak. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11748",children:"#11748"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix the topic in fenced state and can not recover. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11737",children:"#11737"})]}),"\n",(0,r.jsxs)(l.li,{children:["Support disabling non-TLS service ports. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11724",children:"#11724"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix the bug, can not update topic when the update topicName is contained by an existed topic as a part. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11686",children:"#11686"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix Pulsar didn't respond error messages when throw InterceptException. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11650",children:"#11650"})]}),"\n",(0,r.jsxs)(l.li,{children:["Avoid redundant calls for getting the offload policies from the offloader. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11629",children:"#11629"})]}),"\n",(0,r.jsxs)(l.li,{children:["Optimize ManagedLedger Ledger Ownership Check. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/13222",children:"#13222"})]}),"\n",(0,r.jsxs)(l.li,{children:["Do not reuse the Failed OpAddEntry object which lead bundle unloading timeout. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/12993",children:"#12993"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix producer getting incorrectly removed from topic's producers map. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/12846",children:"#12846"})]}),"\n",(0,r.jsxs)(l.li,{children:["Allow to configure schema compatibility policy for system topics. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/12598",children:"#12598"})]}),"\n",(0,r.jsxs)(l.li,{children:["Cleanup already deleted namespace topics. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/12583",children:"#12583"})]}),"\n",(0,r.jsxs)(l.li,{children:["Add OpAddEntry to pendingAddEntries after the state check. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/12570",children:"#12570"})]}),"\n",(0,r.jsxs)(l.li,{children:["Cancel scheduled tasks when deleting ManagedLedgerImpl. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/12565",children:"#12565"})]}),"\n",(0,r.jsxs)(l.li,{children:["NPE on OpAddEntry while ManagedLedger is closing. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/12364",children:"#12364"})]}),"\n",(0,r.jsxs)(l.li,{children:["Avoid potentially blocking calls to metadata on critical threads. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/12340",children:"#12340"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix used after recycle issue in OpAddEntry. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/12103",children:"#12103"})]}),"\n",(0,r.jsxs)(l.li,{children:["Optimize the memory usage of Cache Eviction. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/12045",children:"#12045"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix wrong key-hash selector used for new consumers after all the previous consumers disconnected. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/12035",children:"#12035"})]}),"\n",(0,r.jsxs)(l.li,{children:["Only auth_errors should log at error level. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/9325",children:"#9325"})]}),"\n"]}),"\n",(0,r.jsx)(l.h4,{id:"dependency-upgrade",children:"Dependency upgrade"}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsxs)(l.li,{children:["Remove Boost::System runtime dependency. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/9498",children:"#9498"})]}),"\n",(0,r.jsxs)(l.li,{children:["Upgrade Jetty to 9.4.43.v20210629. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11660",children:"#11660"})]}),"\n",(0,r.jsxs)(l.li,{children:["Add maven.restlet.org repository. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/13248",children:"#13248"})]}),"\n",(0,r.jsxs)(l.li,{children:["Upgrade ZooKeeper version to 3.5.9. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/12981",children:"#12981"})]}),"\n",(0,r.jsxs)(l.li,{children:["Remove pulsar-dashboard from the publish process of images. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/12534",children:"#12534"})]}),"\n",(0,r.jsxs)(l.li,{children:["Roll back to using Java 8 for docker images. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/12357",children:"#12357"})]}),"\n",(0,r.jsxs)(l.li,{children:["Upgrade TestContainers to 1.15.1. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/9120",children:"#9120"})]}),"\n"]}),"\n",(0,r.jsx)(l.h4,{id:"client",children:"Client"}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsxs)(l.li,{children:["[Pulsar perf] Fix log level config for pulsar-admin, pulsar-client and pulsar-perf. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/12915",children:"#12915"})]}),"\n"]}),"\n",(0,r.jsx)(l.h4,{id:"functions-and-pulsar-io",children:"Functions and Pulsar IO"}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsxs)(l.li,{children:["Fix source stats exposing empty exceptions list. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11478",children:"#11478"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix function API can not use authdata to check superuser. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11418",children:"#11418"})]}),"\n",(0,r.jsxs)(l.li,{children:["Support setting KEY_BASED batch builder for Pulsar Sinks. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11710",children:"#11710"})]}),"\n",(0,r.jsxs)(l.li,{children:["Detect .nar files and prevent spammy logs on functions boot. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/12665",children:"#12665"})]}),"\n",(0,r.jsxs)(l.li,{children:["Remove the deprecated api usage in hdfs. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/12080",children:"#12080"})]}),"\n"]}),"\n",(0,r.jsx)(l.h4,{id:"tiered-storage",children:"Tiered Storage"}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsxs)(l.li,{children:["Fix the potential race condition in the BlobStore readhandler. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/12123",children:"#12123"})]}),"\n"]}),"\n",(0,r.jsx)(l.h4,{id:"build",children:"Build"}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsxs)(l.li,{children:["Force CMake to find Python2. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/9690",children:"#9690"})]}),"\n",(0,r.jsxs)(l.li,{children:["Use ubuntu 20.04 as docker image base. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/12017",children:"#12017"})]}),"\n",(0,r.jsxs)(l.li,{children:["Fix docker image install python3.7-dev problem. ",(0,r.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/11942",children:"#11942"})]}),"\n"]})]})}function o(e={}){const{wrapper:l}={...(0,t.R)(),...e.components};return l?(0,r.jsx)(l,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},28453:(e,l,s)=>{s.d(l,{R:()=>a,x:()=>n});var i=s(96540);const r={},t=i.createContext(r);function a(e){const l=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(l):{...l,...e}}),[l,e])}function n(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:l},e.children)}}}]);