"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[16935],{32002:(e,l,r)=>{r.r(l),r.d(l,{assets:()=>h,contentTitle:()=>t,default:()=>p,frontMatter:()=>n,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"versioned/pulsar-3.1.1","title":"Apache Pulsar 3.1.1","description":"2023-10-24","source":"@site/release-notes/versioned/pulsar-3.1.1.md","sourceDirName":"versioned","slug":"/versioned/pulsar-3.1.1","permalink":"/release-notes/versioned/pulsar-3.1.1","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/pulsar-site/edit/main/release-notes/versioned/pulsar-3.1.1.md","tags":[],"version":"current","frontMatter":{"id":"pulsar-3.1.1","title":"Apache Pulsar 3.1.1","sidebar_label":"Apache Pulsar 3.1.1"}}');var i=r(74848),a=r(28453);const n={id:"pulsar-3.1.1",title:"Apache Pulsar 3.1.1",sidebar_label:"Apache Pulsar 3.1.1"},t=void 0,h={},c=[{value:"2023-10-24",id:"2023-10-24",level:4},{value:"Broker",id:"broker",level:3},{value:"Pulsar IO and Pulsar Functions",id:"pulsar-io-and-pulsar-functions",level:3},{value:"CLI",id:"cli",level:3},{value:"Others",id:"others",level:3},{value:"Library updates",id:"library-updates",level:3}];function o(e){const l={a:"a",blockquote:"blockquote",h3:"h3",h4:"h4",li:"li",p:"p",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.h4,{id:"2023-10-24",children:"2023-10-24"}),"\n",(0,i.jsx)(l.h3,{id:"broker",children:"Broker"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["Fix incorrect number of read compacted entries ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/20978",children:"#20978"})]}),"\n",(0,i.jsxs)(l.li,{children:["Fix message loss during topic compaction ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/20980",children:"#20980"})]}),"\n",(0,i.jsxs)(l.li,{children:["Fix get outdated compactedTopicContext after compactionHorizon has been updated ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/20984",children:"#20984"})]}),"\n",(0,i.jsxs)(l.li,{children:["Fix compaction subscription delete by inactive subscription check ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/20983",children:"#20983"})]}),"\n",(0,i.jsxs)(l.li,{children:["Fix incorrect unack msk count when dup ack a message ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/20990",children:"#20990"})]}),"\n",(0,i.jsxs)(l.li,{children:["Fix ModularLoadManagerImpl always delete active bundle-data ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/20620",children:"#20620"})]}),"\n",(0,i.jsxs)(l.li,{children:["Use MessageDigest.isEqual when comparing digests ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21061",children:"#21061"})]}),"\n",(0,i.jsxs)(l.li,{children:["Fix can't stop phase-two of compaction even though messageId read reaches lastReadId ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/20988",children:"#20988"})]}),"\n",(0,i.jsxs)(l.li,{children:["Make sure all inflight writes have finished before completion of compaction ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21067",children:"#21067"})]}),"\n",(0,i.jsxs)(l.li,{children:["Fix chunked messages will be filtered by duplicating ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/20948",children:"#20948"})]}),"\n",(0,i.jsxs)(l.li,{children:["Fix potential case cause retention policy not working on topic level ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21041",children:"#21041"})]}),"\n",(0,i.jsxs)(l.li,{children:["Make read compacted entries support maxReadSizeBytes limitation ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21065",children:"#21065"})]}),"\n",(0,i.jsxs)(l.li,{children:["Remove bundle-data in local metadata store ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21078",children:"#21078"})]}),"\n",(0,i.jsxs)(l.li,{children:["Fix write duplicate entries into the compacted ledger after RawReader reconnects ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21081",children:"#21081"})]}),"\n",(0,i.jsxs)(l.li,{children:["Cleanup correctly heartbeat bundle ownership when handling broker deletion event ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21083",children:"#21083"})]}),"\n",(0,i.jsxs)(l.li,{children:["Avoid splitting one batch message into two entries in StrategicTwoPhaseCompactor ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21091",children:"#21091"})]}),"\n",(0,i.jsxs)(l.li,{children:["Fix unsubscribe non-durable subscription error ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21099",children:"#21099"})]}),"\n",(0,i.jsxs)(l.li,{children:["Fix isolated group not work problem ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21096",children:"#21096"})]}),"\n",(0,i.jsxs)(l.li,{children:["Consider iowait as idle ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/19110",children:"#19110"})]}),"\n",(0,i.jsxs)(l.li,{children:["Fix deleting topic not delete the related topic policy and schema ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21093",children:"#21093"})]}),"\n",(0,i.jsxs)(l.li,{children:["Revert remove duplicate topics name when deleteNamespace ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21087",children:"#21087"})]}),"\n",(0,i.jsxs)(l.li,{children:["Improve logs for troubleshooting ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21141",children:"#21141"})]}),"\n",(0,i.jsxs)(l.li,{children:["Fix web tls url null cause NPE ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21137",children:"#21137"})]}),"\n",(0,i.jsxs)(l.li,{children:["Fix unack count when mixing non batch index and batch index acks ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21126",children:"#21126"})]}),"\n",(0,i.jsxs)(l.li,{children:["Backport fix UniformLoadShedder selecet wrong overloadbroker and underloadbroker ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21180",children:"#21180"})]}),"\n",(0,i.jsxs)(l.li,{children:["Fix bug caused by optimistic locking ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/18390",children:"#18390"})]}),"\n",(0,i.jsxs)(l.li,{children:["Disable balancing based on DirectMemory ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21168",children:"#21168"})]}),"\n",(0,i.jsxs)(l.li,{children:["Fix replicator leak when removeReplicator in NonPersistentTopic ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21205",children:"#21205"})]}),"\n",(0,i.jsxs)(l.li,{children:["Fixed reset for AggregatedNamespaceStats ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21225",children:"#21225"})]}),"\n",(0,i.jsxs)(l.li,{children:["Fixed produce and consume when anonymousUserRole enabled ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21237",children:"#21237"})]}),"\n"]}),"\n",(0,i.jsx)(l.h3,{id:"pulsar-io-and-pulsar-functions",children:"Pulsar IO and Pulsar Functions"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["[FN] Fix ProducerConfig cannot update error ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21037",children:"#21037"})]}),"\n",(0,i.jsxs)(l.li,{children:["[FN] Fix the --batch-builder not working error for functions ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21023",children:"#21023"})]}),"\n",(0,i.jsxs)(l.li,{children:["[FN] Fix functions_log4j2.xml delete strategy config ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21215",children:"#21215"})]}),"\n",(0,i.jsxs)(l.li,{children:["[IO] Fix --retain[-key]-ordering not working error for sink ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21060",children:"#21060"})]}),"\n"]}),"\n",(0,i.jsx)(l.h3,{id:"cli",children:"CLI"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["[Admin] Fix get topic stats fail if a subscription catch up concurrently ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/20971",children:"#20971"})]}),"\n"]}),"\n",(0,i.jsx)(l.h3,{id:"others",children:"Others"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["[META] Fix deadlock in AutoRecovery ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21010",children:"#21010"})]}),"\n",(0,i.jsxs)(l.li,{children:["[META] Improve fault tolerance of blocking calls by supporting timeout ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21028",children:"#21028"})]}),"\n",(0,i.jsxs)(l.li,{children:["[META] Improve to the ReplicaitonWorker performance by deleting invalid underreplication nodes ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21059",children:"#21059"})]}),"\n",(0,i.jsxs)(l.li,{children:["[META] Fix metadata store deadlock due to BookkeeperInternalCallbacks.Processor ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21159",children:"#21159"})]}),"\n",(0,i.jsxs)(l.li,{children:["[META] Fix PulsarLedgerUnderreplicationManager notify problem ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21161",children:"#21161"})]}),"\n",(0,i.jsxs)(l.li,{children:["[META] Fix pulsar ledger auditor dead lock problem ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21181",children:"#21181"})]}),"\n",(0,i.jsxs)(l.li,{children:["[ML] Persist mark deleted ops to ZK if create cursor ledger was failed ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/20935",children:"#20935"})]}),"\n",(0,i.jsxs)(l.li,{children:["[BK] Improve getIsolationGroup by avoid creating arrayList ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/20952",children:"#20952"})]}),"\n",(0,i.jsxs)(l.li,{children:["[BK] Fix RocksDB configuration ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21157",children:"#21157"})]}),"\n",(0,i.jsxs)(l.li,{children:["[Proxy] Support disabling metrics endpoint ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21031",children:"#21031"})]}),"\n",(0,i.jsxs)(l.li,{children:["[Proxy] Fix Proxy 502 gateway error when it is configured with Keystore TLS and admin API is called ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21077",children:"#21077"})]}),"\n",(0,i.jsxs)(l.li,{children:["[TXN] Fix the consumer stuck due to deduplicated messages in pending ack state ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21177",children:"#21177"})]}),"\n"]}),"\n",(0,i.jsx)(l.h3,{id:"library-updates",children:"Library updates"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["Bump GRPC version to 1.55.3 to fix CVE ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21057",children:"#21057"})]}),"\n",(0,i.jsxs)(l.li,{children:["Bump broker okio version to 3.4.0 ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21064",children:"#21064"})]}),"\n",(0,i.jsxs)(l.li,{children:["Upgrade bookkeeper to 4.16.3 ",(0,i.jsx)(l.a,{href:"https://github.com/apache/pulsar/pull/21146",children:"#21146"})]}),"\n"]}),"\n",(0,i.jsxs)(l.blockquote,{children:["\n",(0,i.jsx)(l.p,{children:"A special thanks to the following contributors who contributed to Pulsar 3.1.1:\nmattisonchao, tuteng, poorbarcode, asafm, hanmz, horizonzy, aloyszhang, hrzzzz, thetumbled, hangc0276, zymap, Technoboy-, erobot, liangyepianzhou, Shawyeok, Demogorgon314, TakaHiR07, coderzc, Apurva007, RobertIndie, Crispy-fried-chicken, jiangpengcheng, michaeljmarshall, lifepuzzlefun, AnonHxy, codelipenghui"}),"\n"]})]})}function p(e={}){const{wrapper:l}={...(0,a.R)(),...e.components};return l?(0,i.jsx)(l,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},28453:(e,l,r)=>{r.d(l,{R:()=>n,x:()=>t});var s=r(96540);const i={},a=s.createContext(i);function n(e){const l=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(l):{...l,...e}}),[l,e])}function t(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:n(e.components),s.createElement(a.Provider,{value:l},e.children)}}}]);