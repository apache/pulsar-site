"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[80214],{73330:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>h,contentTitle:()=>t,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"versioned/pulsar-3.1.2","title":"Apache Pulsar 3.1.2","description":"2024-01-02","source":"@site/release-notes/versioned/pulsar-3.1.2.md","sourceDirName":"versioned","slug":"/versioned/pulsar-3.1.2","permalink":"/release-notes/versioned/pulsar-3.1.2","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/pulsar-site/edit/main/release-notes/versioned/pulsar-3.1.2.md","tags":[],"version":"current","frontMatter":{"id":"pulsar-3.1.2","title":"Apache Pulsar 3.1.2","sidebar_label":"Apache Pulsar 3.1.2"}}');var n=s(74848),a=s(28453);const r={id:"pulsar-3.1.2",title:"Apache Pulsar 3.1.2",sidebar_label:"Apache Pulsar 3.1.2"},t=void 0,h={},c=[{value:"2024-01-02",id:"2024-01-02",level:4},{value:"PIPs",id:"pips",level:2},{value:"Broker",id:"broker",level:3},{value:"Transaction",id:"transaction",level:3},{value:"CI and Test",id:"ci-and-test",level:3},{value:"Security",id:"security",level:3},{value:"Build",id:"build",level:3},{value:"Others",id:"others",level:3}];function o(e){const i={a:"a",h2:"h2",h3:"h3",h4:"h4",li:"li",ul:"ul",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.h4,{id:"2024-01-02",children:"2024-01-02"}),"\n",(0,n.jsx)(i.h2,{id:"pips",children:"PIPs"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["PIP-318: Support not retaining null-key message during topic compaction by @coderzc in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21578",children:"#21578"})]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"broker",children:"Broker"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["Fixed ServiceUnitStateChannel monitor to tombstone only inactive bundle states by @heesung-sn in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21721",children:"#21721"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix typo in the config key by @coderzc in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21690",children:"#21690"})]}),"\n",(0,n.jsxs)(i.li,{children:["Record GeoPersistentReplicator.msgOut before producer#sendAsync by @nodece in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21673",children:"#21673"})]}),"\n",(0,n.jsxs)(i.li,{children:["Print recoverBucketSnapshot log if cursorProperties are empty by @coderzc in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21651",children:"#21651"})]}),"\n",(0,n.jsxs)(i.li,{children:["Support not retaining null-key message during topic compaction by @coderzc in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21601",children:"#21601"})]}),"\n",(0,n.jsxs)(i.li,{children:["Delete topic timeout due to NPE by @poorbarcode in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21595",children:"#21595"})]}),"\n",(0,n.jsxs)(i.li,{children:["Duplicate LedgerOffloader creation when namespace/topic policies are updated by @shibd in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21591",children:"#21591"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix issue with consumer read uncommitted messages from compacted topic by @coderzc in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21571",children:"#21571"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix create topic with different auto creation strategies causes race condition by @mattisonchao in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21545",children:"#21545"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix orphan scheduled task for ledger create timeout check by @poorbarcode in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21542",children:"#21542"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix thousands orphan PersistentTopic caused OOM by @poorbarcode in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21540",children:"#21540"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix unfinished callback when deleting managed ledger by @mattisonchao in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21530",children:"#21530"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix setReplicatedSubscriptionStatus incorrect behavior by @liudezhi2098 in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21510",children:"#21510"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix failure while creating non-durable cursor with inactive managed-ledger by @rdhabalia in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21508",children:"#21508"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix PulsarService/BrokerService shutdown when brokerShutdownTimeoutMs=0 by @lhotari in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21496",children:"#21496"})]}),"\n",(0,n.jsxs)(i.li,{children:["Do not write replicated snapshot marker when the topic which is not enable replication by @liangyepianzhou in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21495",children:"#21495"})]}),"\n",(0,n.jsxs)(i.li,{children:["Avoid pass null role in MultiRolesTokenAuthorizationProvider by @mattisonchao in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21486",children:"#21486"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix the deadlock when using BookieRackAffinityMapping with rackaware policy by @erobot in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21481",children:"#21481"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix issue with consumer read uncommitted messages from compacted topic by @coderzc in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21465",children:"#21465"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix resource_quota_zpath by @AnonHxy in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21461",children:"#21461"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix namespace bundle stuck in unloading status by @mattisonchao in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21445",children:"#21445"})]}),"\n",(0,n.jsxs)(i.li,{children:["Ignore individual acknowledgment for CompactorSubscription when an entry has been filtered. by @coderzc in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21434",children:"#21434"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix MultiRoles token provider NPE when using anonymous clients by @Technoboy- in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21429",children:"#21429"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix heartbeat namespace create event topic and cannot delete heartbeat topic by @TakaHiR07 in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21360",children:"#21360"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix heartbeat namespace create transaction internal topic by @TakaHiR07 in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21348",children:"#21348"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix unload operation stuck when use ExtensibleLoadManager by @Demogorgon314 in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21332",children:"#21332"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix lookup heartbeat and sla namespace bundle when using extensible load manager(#21213) by @Demogorgon314 in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21314",children:"#21314"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix thread safe issue with RangeCache.put and RangeCache.clear by @lhotari in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21302",children:"#21302"})]}),"\n",(0,n.jsxs)(i.li,{children:["use ConcurrentHashMap in ServiceUnitStateChannel and avoid recursive update error by @heesung-sn in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21282",children:"#21282"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix inconsistent topic policy by @mattisonchao in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21255",children:"#21255"})]}),"\n",(0,n.jsxs)(i.li,{children:["Let the producer request success at the first time if the previous one is inactive by @poorbarcode in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21220",children:"#21220"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix lookup heartbeat and sla namespace bundle when using extensible load manager by @Demogorgon314 in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21213",children:"#21213"})]}),"\n",(0,n.jsxs)(i.li,{children:["Avoid record inactiveproducers when deduplication is disable by @lifepuzzlefun in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21193",children:"#21193"})]}),"\n",(0,n.jsxs)(i.li,{children:["Make specified producer could override the previous one by @poorbarcode in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21155",children:"#21155"})]}),"\n",(0,n.jsxs)(i.li,{children:["Rackaware policy is ineffective when delete zk rack info after bkclient initialize by @TakaHiR07 in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/20944",children:"#20944"})]}),"\n",(0,n.jsxs)(i.li,{children:["Check that the super user role is in the MultiRolesTokenAuthorizationProvider plugin by @tuteng in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/20939",children:"#20939"})]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"transaction",children:"Transaction"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["OpRequestSend reuse problem cause tbClient commitTxnOnTopic timeout unexpectedly by @TakaHiR07 in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21505",children:"#21505"})]}),"\n",(0,n.jsxs)(i.li,{children:["Ack all message ids when ack chunk messages with transaction by @liangyepianzhou in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21268",children:"#21268"})]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"ci-and-test",children:"CI and Test"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["Fix LocalBookkeeperEnsemble resource leak in tests by @lhotari in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21407",children:"#21407"})]}),"\n",(0,n.jsxs)(i.li,{children:['Add new CI unit test group "Broker Group 4" with cluster migration tests by @lhotari in ',(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21391",children:"#21391"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix resource leaks with Pulsar Functions tests by @lhotari in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21378",children:"#21378"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix some resource leaks in compaction tests by @lhotari in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21374",children:"#21374"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix a resource leak in ClusterMigrationTest by @lhotari in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21366",children:"#21366"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix docker image building by releasing more disk space before building by @lhotari in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21365",children:"#21365"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix flaky CompactionTest.testDispatcherMaxReadSizeBytes by @lhotari in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21329",children:"#21329"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix flaky test NarUnpackerTest by @lhotari in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21328",children:"#21328"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix zookeeper related flacky test by @horizonzy in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21310",children:"#21310"})]}),"\n",(0,n.jsxs)(i.li,{children:["fix flaky test PatternTopicsConsumerImplTest by @poorbarcode in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21222",children:"#21222"})]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"security",children:"Security"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["Upgrade rabbitmq client to address CVE-2023-46120 by @liangyepianzhou in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21619",children:"#21619"})]}),"\n",(0,n.jsxs)(i.li,{children:["Upgrade Zookeeper to 3.8.3 to address CVE-2023-44981 by @lhotari in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21398",children:"#21398"})]}),"\n",(0,n.jsxs)(i.li,{children:["Upgrade Netty to 4.1.100 to address CVE-2023-44487 by @lhotari in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21397",children:"#21397"})]}),"\n",(0,n.jsxs)(i.li,{children:["Upgrade Jetty to 9.4.53 to address CVE-2023-44487 by @lhotari in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21395",children:"#21395"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix MultiRoles token provider when using anonymous clients by @merlimat in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21338",children:"#21338"})]}),"\n",(0,n.jsxs)(i.li,{children:["Add OWASP Dependency Check suppressions by @lhotari in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21281",children:"#21281"})]}),"\n",(0,n.jsxs)(i.li,{children:["Upgrade snappy-java to 1.1.10.5 by @lhotari in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21280",children:"#21280"})]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"build",children:"Build"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["Fix Stage Docker images fail on M1 Mac by @AnonHxy in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21659",children:"#21659"})]}),"\n",(0,n.jsxs)(i.li,{children:["Fix apt download issue in building the docker image by @lhotari in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21489",children:"#21489"})]}),"\n",(0,n.jsxs)(i.li,{children:["Rename schema_example.conf to schema_example.json by @poorbarcode in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21447",children:"#21447"})]}),"\n",(0,n.jsxs)(i.li,{children:["Upgrade Lombok to 1.18.30 to support compiling with JDK21 by @lhotari in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21278",children:"#21278"})]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"others",children:"Others"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["[offload] Don't cleanup data when offload met MetaStore exception by @zymap in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21686",children:"#21686"})]}),"\n",(0,n.jsxs)(i.li,{children:["[proxy] Move status endpoint out of auth coverage by @mattisonchao in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21428",children:"#21428"})]}),"\n",(0,n.jsxs)(i.li,{children:["[auto-recovery] Migrate the replication testing from BookKeeper to Pulsar by @horizonzy in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21340",children:"#21340"})]}),"\n",(0,n.jsxs)(i.li,{children:["[bk-client] Fix bk client MinNumRacksPerWriteQuorum and EnforceMinNumRacksPerWriteQuorum not work problem by @horizonzy in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21327",children:"#21327"})]}),"\n",(0,n.jsxs)(i.li,{children:["[sql] Support UUID for json and avro by @liangyepianzhou in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21267",children:"#21267"})]}),"\n",(0,n.jsxs)(i.li,{children:["[log] fix the vague response if topic not found by @poorbarcode in ",(0,n.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/20932",children:"#20932"})]}),"\n"]})]})}function p(e={}){const{wrapper:i}={...(0,a.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},28453:(e,i,s)=>{s.d(i,{R:()=>r,x:()=>t});var l=s(96540);const n={},a=l.createContext(n);function r(e){const i=l.useContext(a);return l.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function t(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),l.createElement(a.Provider,{value:i},e.children)}}}]);