"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[55970],{96787:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>d});var a=n(59071),r=n(74848),t=n(28453);const o={author:"gaoran10, Anonymitaet",title:"What\u2019s New in Apache Pulsar 2.9.2"},i="Notable bug fixes and enhancements",l={authorsImageUrls:[void 0]},d=[{value:"Readers continue to read data from the compacted ledgers. PR-13629",id:"readers-continue-to-read-data-from-the-compacted-ledgers-pr-13629",level:3},{value:"Issue",id:"issue",level:4},{value:"Resolution",id:"resolution",level:4},{value:"Brokers decrease the number of unacked messages. PR-13383",id:"brokers-decrease-the-number-of-unacked-messages-pr-13383",level:3},{value:"Issue",id:"issue-1",level:4},{value:"Resolution",id:"resolution-1",level:4},{value:"Chunked messages can be queried through Pulsar SQL. PR-12720",id:"chunked-messages-can-be-queried-through-pulsar-sql-pr-12720",level:3},{value:"Issue",id:"issue-2",level:4},{value:"Resolution",id:"resolution-2",level:4},{value:"Support enable or disable schema upload at the broker level. PR-12786",id:"support-enable-or-disable-schema-upload-at-the-broker-level-pr-12786",level:3},{value:"Issue",id:"issue-3",level:4},{value:"Resolution",id:"resolution-3",level:4},{value:"Readers can read the latest messages in compacted topics. PR-14449",id:"readers-can-read-the-latest-messages-in-compacted-topics-pr-14449",level:3},{value:"Issue",id:"issue-4",level:4},{value:"Resolution",id:"resolution-4",level:4},{value:"Transaction sequenceId can be recovered correctly. PR-13209",id:"transaction-sequenceid-can-be-recovered-correctly-pr-13209",level:3},{value:"Issue",id:"issue-5",level:4},{value:"Resolution",id:"resolution-5",level:4},{value:"Transactions performance test tool is available. PR-11933",id:"transactions-performance-test-tool-is-available-pr-11933",level:3},{value:"Issue",id:"issue-6",level:4},{value:"Resolution",id:"resolution-6",level:4},{value:"Port exhaustion and connection issues no longer exist in Pulsar Proxy. PR-14078",id:"port-exhaustion-and-connection-issues-no-longer-exist-in-pulsar-proxy-pr-14078",level:3},{value:"Issue",id:"issue-7",level:4},{value:"Resolution",id:"resolution-7",level:4},{value:"No race condition in <code>OpSendMsgQueue</code> when publishing messages. PR-14231",id:"no-race-condition-in-opsendmsgqueue-when-publishing-messages-pr-14231",level:3},{value:"Issue",id:"issue-8",level:4},{value:"Resolution",id:"resolution-8",level:4},{value:"Change <code>ContextClassLoader</code> to <code>NarClassLoader</code> in AdditionalServlet. PR-13501",id:"change-contextclassloader-to-narclassloader-in-additionalservlet-pr-13501",level:3},{value:"Issue",id:"issue-9",level:4},{value:"Resolution",id:"resolution-9",level:4}];function c(e){const s={a:"a",code:"code",h1:"h1",h3:"h3",h4:"h4",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.p,{children:"The Apache Pulsar community releases version 2.9.2! 60 contributors provided improvements and bug fixes that delivered 317 commits."}),"\n",(0,r.jsx)(s.p,{children:"Highlights of this release are as below:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Transactions performance test tool is available. ",(0,r.jsx)(s.a,{href:"https://github.com/apache/pulsar/pull/11933",children:"PR-11933"})]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Brokers decrease the number of unacked messages. ",(0,r.jsx)(s.a,{href:"https://github.com/apache/pulsar/pull/13383",children:"PR-13383"})]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Readers continue to read data from the compacted ledgers. ",(0,r.jsx)(s.a,{href:"https://github.com/apache/pulsar/pull/13629",children:"PR-13629"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["This blog walks through the most noteworthy changes grouped by the affected functionalities. For the complete list including all features, enhancements, and bug fixes, check out the ",(0,r.jsx)(s.a,{href:"https://github.com/apache/pulsar/releases/tag/v2.9.2",children:"Pulsar 2.9.2 Release Notes"}),"."]}),"\n",(0,r.jsxs)(s.h3,{id:"readers-continue-to-read-data-from-the-compacted-ledgers-pr-13629",children:["Readers continue to read data from the compacted ledgers. ",(0,r.jsx)(s.a,{href:"https://github.com/apache/pulsar/pull/13629",children:"PR-13629"})]}),"\n",(0,r.jsx)(s.h4,{id:"issue",children:"Issue"}),"\n",(0,r.jsx)(s.p,{children:"Previously, when topics were unloaded, some data was lost to be read by readers if they have consumed some messages from some compacted ledgers."}),"\n",(0,r.jsx)(s.h4,{id:"resolution",children:"Resolution"}),"\n",(0,r.jsxs)(s.p,{children:["Rewound the reader cursor to the next message of the mark delete position if ",(0,r.jsx)(s.code,{children:"readCompacted = true"}),"."]}),"\n",(0,r.jsxs)(s.h3,{id:"brokers-decrease-the-number-of-unacked-messages-pr-13383",children:["Brokers decrease the number of unacked messages. ",(0,r.jsx)(s.a,{href:"https://github.com/apache/pulsar/pull/13383",children:"PR-13383"})]}),"\n",(0,r.jsx)(s.h4,{id:"issue-1",children:"Issue"}),"\n",(0,r.jsxs)(s.p,{children:["Previously, brokers did not decrease the number of unacked messages if batch ack was enabled. Consequently, consumers were blocked if they reached ",(0,r.jsx)(s.code,{children:"maxUnackedMessagesPerConsumer"})," limit."]}),"\n",(0,r.jsx)(s.h4,{id:"resolution-1",children:"Resolution"}),"\n",(0,r.jsxs)(s.p,{children:["Decreased the number of unacked messages when ",(0,r.jsx)(s.code,{children:"individualAckNormal"})," was called."]}),"\n",(0,r.jsxs)(s.h3,{id:"chunked-messages-can-be-queried-through-pulsar-sql-pr-12720",children:["Chunked messages can be queried through Pulsar SQL. ",(0,r.jsx)(s.a,{href:"https://github.com/apache/pulsar/pull/12720",children:"PR-12720"})]}),"\n",(0,r.jsx)(s.h4,{id:"issue-2",children:"Issue"}),"\n",(0,r.jsx)(s.p,{children:"Previously, chunked messages could not be queried through Pulsar SQL."}),"\n",(0,r.jsx)(s.h4,{id:"resolution-2",children:"Resolution"}),"\n",(0,r.jsxs)(s.p,{children:["Add a chunked message map in ",(0,r.jsx)(s.code,{children:"PulsarRecordCursor"})," to maintain incomplete chunked messages. If one chunked message was received completely, it would be offered in the message queue to wait for deserialization."]}),"\n",(0,r.jsxs)(s.h3,{id:"support-enable-or-disable-schema-upload-at-the-broker-level-pr-12786",children:["Support enable or disable schema upload at the broker level. ",(0,r.jsx)(s.a,{href:"https://github.com/apache/pulsar/pull/12786",children:"PR-12786"})]}),"\n",(0,r.jsx)(s.h4,{id:"issue-3",children:"Issue"}),"\n",(0,r.jsx)(s.p,{children:"Previously, Pulsar didn't support enabling or disabling schema upload at the broker level."}),"\n",(0,r.jsx)(s.h4,{id:"resolution-3",children:"Resolution"}),"\n",(0,r.jsxs)(s.p,{children:["Added the configuration ",(0,r.jsx)(s.code,{children:"isSchemaAutoUploadEnabled"})," on the broker side."]}),"\n",(0,r.jsxs)(s.h3,{id:"readers-can-read-the-latest-messages-in-compacted-topics-pr-14449",children:["Readers can read the latest messages in compacted topics. ",(0,r.jsx)(s.a,{href:"https://github.com/apache/pulsar/pull/14449",children:"PR-14449"})]}),"\n",(0,r.jsx)(s.h4,{id:"issue-4",children:"Issue"}),"\n",(0,r.jsxs)(s.p,{children:["Previously, readers were not able to read the latest messages in compacted topics if readers enabled ",(0,r.jsx)(s.code,{children:"readCompacted"})," and all the data of topics has been compacted to compacted ledgers."]}),"\n",(0,r.jsx)(s.h4,{id:"resolution-4",children:"Resolution"}),"\n",(0,r.jsxs)(s.p,{children:["Added the ",(0,r.jsx)(s.code,{children:"forceReset"})," configuration for the managed cursor, so that the cursor could be reset to a given position and readers can read data from compacted ledgers."]}),"\n",(0,r.jsxs)(s.h3,{id:"transaction-sequenceid-can-be-recovered-correctly-pr-13209",children:["Transaction sequenceId can be recovered correctly. ",(0,r.jsx)(s.a,{href:"https://github.com/apache/pulsar/pull/13209",children:"PR-13209"})]}),"\n",(0,r.jsx)(s.h4,{id:"issue-5",children:"Issue"}),"\n",(0,r.jsxs)(s.p,{children:["Previously, the wrong transaction sequenceId was recovered due to incorrect ",(0,r.jsx)(s.code,{children:"managedLedger"})," properties."]}),"\n",(0,r.jsx)(s.h4,{id:"resolution-5",children:"Resolution"}),"\n",(0,r.jsxs)(s.p,{children:["Used ",(0,r.jsx)(s.code,{children:"ManagedLedgerInterceptor "})," to update current sequenceId to ",(0,r.jsx)(s.code,{children:"managedLedger"})," properties and more."]}),"\n",(0,r.jsxs)(s.h3,{id:"transactions-performance-test-tool-is-available-pr-11933",children:["Transactions performance test tool is available. ",(0,r.jsx)(s.a,{href:"https://github.com/apache/pulsar/pull/11933",children:"PR-11933"})]}),"\n",(0,r.jsx)(s.h4,{id:"issue-6",children:"Issue"}),"\n",(0,r.jsx)(s.p,{children:"Previously, it was hard to test transaction performance (such as the delay and rate of sending and consuming messages) when opening a transaction."}),"\n",(0,r.jsx)(s.h4,{id:"resolution-6",children:"Resolution"}),"\n",(0,r.jsxs)(s.p,{children:["Added ",(0,r.jsx)(s.code,{children:"PerformanceTransaction"})," class to support this enhancement."]}),"\n",(0,r.jsxs)(s.h3,{id:"port-exhaustion-and-connection-issues-no-longer-exist-in-pulsar-proxy-pr-14078",children:["Port exhaustion and connection issues no longer exist in Pulsar Proxy. ",(0,r.jsx)(s.a,{href:"https://github.com/apache/pulsar/pull/14078",children:"PR-14078"})]}),"\n",(0,r.jsx)(s.h4,{id:"issue-7",children:"Issue"}),"\n",(0,r.jsx)(s.p,{children:"Previously, Pulsar proxy would get into a state where it stopped proxying broker connections while Admin API proxying kept working."}),"\n",(0,r.jsx)(s.h4,{id:"resolution-7",children:"Resolution"}),"\n",(0,r.jsx)(s.p,{children:"Optimized the proxy connection to fail-fast if the target broker was not active, added connect timeout handling to proxy connection, and more."}),"\n",(0,r.jsxs)(s.h3,{id:"no-race-condition-in-opsendmsgqueue-when-publishing-messages-pr-14231",children:["No race condition in ",(0,r.jsx)(s.code,{children:"OpSendMsgQueue"})," when publishing messages. ",(0,r.jsx)(s.a,{href:"https://github.com/apache/pulsar/pull/14231",children:"PR-14231"})]}),"\n",(0,r.jsx)(s.h4,{id:"issue-8",children:"Issue"}),"\n",(0,r.jsxs)(s.p,{children:["After the method ",(0,r.jsx)(s.code,{children:"getPendingQueueSize()"})," was called and the send receipt came back, the peek from the ",(0,r.jsx)(s.code,{children:"pendingMessages"})," might get NPE during the process."]}),"\n",(0,r.jsx)(s.h4,{id:"resolution-8",children:"Resolution"}),"\n",(0,r.jsxs)(s.p,{children:["Added a thread-safe message count object in ",(0,r.jsx)(s.code,{children:"OpSendMsgQueue"})," for each compute process."]}),"\n",(0,r.jsxs)(s.h3,{id:"change-contextclassloader-to-narclassloader-in-additionalservlet-pr-13501",children:["Change ",(0,r.jsx)(s.code,{children:"ContextClassLoader"})," to ",(0,r.jsx)(s.code,{children:"NarClassLoader"})," in AdditionalServlet. ",(0,r.jsx)(s.a,{href:"https://github.com/apache/pulsar/pull/13501",children:"PR-13501"})]}),"\n",(0,r.jsx)(s.h4,{id:"issue-9",children:"Issue"}),"\n",(0,r.jsxs)(s.p,{children:["Previously, if a class was dynamically loaded by ",(0,r.jsx)(s.code,{children:"NarClassLoader"}),", ",(0,r.jsx)(s.code,{children:"ClassNotFoundException"})," occurred when it was used by the default class load."]}),"\n",(0,r.jsx)(s.h4,{id:"resolution-9",children:"Resolution"}),"\n",(0,r.jsxs)(s.p,{children:["Changed context class loader through ",(0,r.jsx)(s.code,{children:"Thread.currentThread().setContextClassLoader(classLoader)"})," before every plugin calling back and changed the context class loader back to original class loader afterwards."]}),"\n",(0,r.jsx)(s.h1,{id:"whats-next",children:"What\u2019s Next?"}),"\n",(0,r.jsxs)(s.p,{children:["If you are interested in learning more about Pulsar 2.9.2, you can ",(0,r.jsx)(s.a,{href:"https://pulsar.apache.org/en/versions/",children:"download"})," and try it out now!"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Pulsar Summit San Francisco 2022"})," will take place on August 18th, 2022. ",(0,r.jsx)(s.a,{href:"https://pulsar-summit.org/",children:"Register now"})," and help us make it an even bigger success by spreading the word on social media!"]}),"\n",(0,r.jsxs)(s.p,{children:["For more information about the Apache Pulsar project and current progress, visit\nthe ",(0,r.jsx)(s.a,{href:"https://pulsar.apache.org",children:"Pulsar website"}),", follow the project on Twitter ",(0,r.jsx)(s.a,{href:"https://twitter.com/apache_pulsar",children:"@apache_pulsar"}),", and join ",(0,r.jsx)(s.a,{href:"https://apache-pulsar.herokuapp.com/",children:"Pulsar Slack"}),"!"]})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>i});var a=n(96540);const r={},t=a.createContext(r);function o(e){const s=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),a.createElement(t.Provider,{value:s},e.children)}},59071:e=>{e.exports=JSON.parse('{"permalink":"/blog/2022/04/08/Apache-Pulsar-2-9-2","editUrl":"https://github.com/apache/pulsar-site/edit/main/blog/2022-04-08-Apache-Pulsar-2-9-2.md","source":"@site/blog/2022-04-08-Apache-Pulsar-2-9-2.md","title":"What\u2019s New in Apache Pulsar 2.9.2","description":"The Apache Pulsar community releases version 2.9.2! 60 contributors provided improvements and bug fixes that delivered 317 commits.","date":"2022-04-08T00:00:00.000Z","tags":[],"readingTime":3.37,"hasTruncateMarker":true,"authors":[{"name":"gaoran10, Anonymitaet","key":null,"page":null}],"frontMatter":{"author":"gaoran10, Anonymitaet","title":"What\u2019s New in Apache Pulsar 2.9.2"},"unlisted":false,"prevItem":{"title":"The Apache Pulsar Community Welcomes 500th Contributor!","permalink":"/blog/2022/05/11/apache-pulsar-community-welcomes-500th-contributor"},"nextItem":{"title":"What\u2019s New in Apache Pulsar 2.7.4","permalink":"/blog/2021/12/14/Apache-Pulsar-2-7-4"}}')}}]);