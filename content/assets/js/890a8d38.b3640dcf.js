"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[79646],{39398:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"client-libraries-rest","title":"Pulsar REST","description":"Pulsar not only provides REST endpoints to manage resources in Pulsar clusters, but also provides methods to query the state for those resources. In addition, Pulsar REST provides a simple way to interact with Pulsar without using client libraries, which is convenient for applications to use HTTP to interact with Pulsar.","source":"@site/versioned_docs/version-3.1.x/client-libraries-rest.md","sourceDirName":".","slug":"/client-libraries-rest","permalink":"/docs/3.1.x/client-libraries-rest","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/pulsar-site/edit/main/versioned_docs/version-3.1.x/client-libraries-rest.md","tags":[],"version":"3.1.x","frontMatter":{"id":"client-libraries-rest","title":"Pulsar REST","sidebar_label":"REST"},"sidebar":"docsSidebar","previous":{"title":"WebSocket","permalink":"/docs/3.1.x/client-libraries-websocket"},"next":{"title":"Work with clients","permalink":"/docs/3.1.x/client-libraries-clients"}}');var r=n(74848),t=n(28453);const l={id:"client-libraries-rest",title:"Pulsar REST",sidebar_label:"REST"},d=void 0,c={},o=[{value:"Connection",id:"connection",level:2},{value:"Producer",id:"producer",level:2},{value:"Message",id:"message",level:3},{value:"Schema",id:"schema",level:3},{value:"Example",id:"example",level:3}];function a(e){const s={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.p,{children:["Pulsar not only provides REST endpoints to manage resources in Pulsar clusters, but also provides methods to query the state for those resources. In addition, Pulsar REST provides a simple way to interact with Pulsar ",(0,r.jsx)(s.strong,{children:"without using client libraries"}),", which is convenient for applications to use HTTP to interact with Pulsar."]}),"\n",(0,r.jsx)(s.h2,{id:"connection",children:"Connection"}),"\n",(0,r.jsx)(s.p,{children:"To connect to Pulsar, you need to specify a URL."}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Produce messages to non-partitioned or partitioned topics"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"brokerUrl:{8080/8081}/topics/{persistent/non-persistent}/{my-tenant}/{my-namespace}/{my-topic}\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Produce messages to specific partitions of partitioned topics"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"brokerUrl:{8080/8081}/topics/{persistent/non-persistent}/{my-tenant}/{my-namespace}/{my-topic}/partitions/{partition-number}\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"producer",children:"Producer"}),"\n",(0,r.jsx)(s.p,{children:"Currently, you can produce messages to the following destinations with tools like cURL or Postman via REST."}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Non-partitioned or partitioned topics"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Specific partitions of partitioned topics"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["You can only produce messages to ",(0,r.jsx)(s.strong,{children:"topics that already exist"})," in Pulsar via REST."]})}),"\n",(0,r.jsx)(s.p,{children:"Consuming and reading messages via REST will be supported in the future."}),"\n",(0,r.jsx)(s.h3,{id:"message",children:"Message"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Below is the structure of a request payload."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Required?"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"schemaVersion"})}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsxs)(s.td,{children:["Schema version of existing schema used for this message ",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"You need provide one of the following: ",(0,r.jsx)("br",{}),(0,r.jsx)("br",{})," - ",(0,r.jsx)(s.code,{children:"schemaVersion"})," ",(0,r.jsx)("br",{})," - ",(0,r.jsx)(s.code,{children:"keySchema"}),"/",(0,r.jsx)(s.code,{children:"valueSchema"}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"If both of them are provided, then ",(0,r.jsx)(s.code,{children:"schemaVersion"})," is used"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"keySchema/valueSchema"})}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"Key schema / Value schema used for this message"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"producerName"})}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"Producer name"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"Messages[] SingleMessage"})}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsx)(s.td,{children:"Messages to be sent"})]})]})]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Below is the structure of a message."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Required?"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"payload"})}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"String"})}),(0,r.jsxs)(s.td,{children:["Actual message payload ",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"Messages are sent in strings and encoded with given schemas on the server side"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"properties"})}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"Map<String, String>"})}),(0,r.jsx)(s.td,{children:"Custom properties"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"key"})}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"String"})}),(0,r.jsx)(s.td,{children:"Partition key"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"replicationClusters"})}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"List<String>"})}),(0,r.jsx)(s.td,{children:"Clusters to which messages replicate"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"eventTime"})}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"String"})}),(0,r.jsx)(s.td,{children:"Message event time"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"sequenceId"})}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"long"})}),(0,r.jsx)(s.td,{children:"Message sequence ID"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"disableReplication"})}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"boolean"})}),(0,r.jsx)(s.td,{children:"Whether to disable replication of messages"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"deliverAt"})}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"long"})}),(0,r.jsx)(s.td,{children:"Deliver messages only at or after specified absolute timestamp"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"deliverAfterMs"})}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"long"})}),(0,r.jsx)(s.td,{children:"Deliver messages only after specified relative delay (in milliseconds)"})]})]})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"schema",children:"Schema"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Currently, Primitive, Avro, JSON, and KeyValue schemas are supported."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"For Primitive, Avro and JSON schemas, schemas should be provided as the full schema encoded as a string."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"If the schema is not set, messages are encoded with string schema."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"example",children:"Example"}),"\n",(0,r.jsx)(s.p,{children:"Below is an example of sending messages to topics using JSON schema via REST."}),"\n",(0,r.jsx)(s.p,{children:"Assume that you send messages representing the following class."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"   class Seller {\n        public String state;\n        public String street;\n        public long zipCode;\n    }\n\n    class PC {\n        public String brand;\n        public String model;\n        public int year;\n        public GPU gpu;\n        public Seller seller;\n    }\n"})}),"\n",(0,r.jsx)(s.p,{children:"Send messages to topics with JSON schema using the command below."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:'curl --location --request POST \'brokerUrl:{8080/8081}/topics/{persistent/non-persistent}/{my-tenant}/{my-namespace}/{my-topic}\' \\\n--header \'Content-Type: application/json\' \\\n--data-raw \'{\n  "valueSchema": "{\\"name\\":\\"\\",\\"schema\\":\\"eyJ0eXBlIjoicmVjb3JkIiwibmFtZSI6IlBDIiwibmFtZXNwYWNlIjoib3JnLmFwYWNoZS5wdWxzYXIuYnJva2VyLmFkbWluLlRvcGljc1Rlc3QiLCJmaWVsZHMiOlt7Im5hbWUiOiJicmFuZCIsInR5cGUiOlsibnVsbCIsInN0cmluZyJdLCJkZWZhdWx0IjpudWxsfSx7Im5hbWUiOiJncHUiLCJ0eXBlIjpbIm51bGwiLHsidHlwZSI6ImVudW0iLCJuYW1lIjoiR1BVIiwic3ltYm9scyI6WyJBTUQiLCJOVklESUEiXX1dLCJkZWZhdWx0IjpudWxsfSx7Im5hbWUiOiJtb2RlbCIsInR5cGUiOlsibnVsbCIsInN0cmluZyJdLCJkZWZhdWx0IjpudWxsfSx7Im5hbWUiOiJzZWxsZXIiLCJ0eXBlIjpbIm51bGwiLHsidHlwZSI6InJlY29yZCIsIm5hbWUiOiJTZWxsZXIiLCJmaWVsZHMiOlt7Im5hbWUiOiJzdGF0ZSIsInR5cGUiOlsibnVsbCIsInN0cmluZyJdLCJkZWZhdWx0IjpudWxsfSx7Im5hbWUiOiJzdHJlZXQiLCJ0eXBlIjpbIm51bGwiLCJzdHJpbmciXSwiZGVmYXVsdCI6bnVsbH0seyJuYW1lIjoiemlwQ29kZSIsInR5cGUiOiJsb25nIn1dfV0sImRlZmF1bHQiOm51bGx9LHsibmFtZSI6InllYXIiLCJ0eXBlIjoiaW50In1dfQ==\\",\\"type\\":\\"JSON\\",\\"properties\\":{\\"__jsr310ConversionEnabled\\":\\"false\\",\\"__alwaysAllowNull\\":\\"true\\"},\\"schemaDefinition\\":\\"{\\\\\\"type\\\\\\":\\\\\\"record\\\\\\",\\\\\\"name\\\\\\":\\\\\\"PC\\\\\\",\\\\\\"namespace\\\\\\":\\\\\\"org.apache.pulsar.broker.admin.TopicsTest\\\\\\",\\\\\\"fields\\\\\\":[{\\\\\\"name\\\\\\":\\\\\\"brand\\\\\\",\\\\\\"type\\\\\\":[\\\\\\"null\\\\\\",\\\\\\"string\\\\\\"],\\\\\\"default\\\\\\":null},{\\\\\\"name\\\\\\":\\\\\\"gpu\\\\\\",\\\\\\"type\\\\\\":[\\\\\\"null\\\\\\",{\\\\\\"type\\\\\\":\\\\\\"enum\\\\\\",\\\\\\"name\\\\\\":\\\\\\"GPU\\\\\\",\\\\\\"symbols\\\\\\":[\\\\\\"AMD\\\\\\",\\\\\\"NVIDIA\\\\\\"]}],\\\\\\"default\\\\\\":null},{\\\\\\"name\\\\\\":\\\\\\"model\\\\\\",\\\\\\"type\\\\\\":[\\\\\\"null\\\\\\",\\\\\\"string\\\\\\"],\\\\\\"default\\\\\\":null},{\\\\\\"name\\\\\\":\\\\\\"seller\\\\\\",\\\\\\"type\\\\\\":[\\\\\\"null\\\\\\",{\\\\\\"type\\\\\\":\\\\\\"record\\\\\\",\\\\\\"name\\\\\\":\\\\\\"Seller\\\\\\",\\\\\\"fields\\\\\\":[{\\\\\\"name\\\\\\":\\\\\\"state\\\\\\",\\\\\\"type\\\\\\":[\\\\\\"null\\\\\\",\\\\\\"string\\\\\\"],\\\\\\"default\\\\\\":null},{\\\\\\"name\\\\\\":\\\\\\"street\\\\\\",\\\\\\"type\\\\\\":[\\\\\\"null\\\\\\",\\\\\\"string\\\\\\"],\\\\\\"default\\\\\\":null},{\\\\\\"name\\\\\\":\\\\\\"zipCode\\\\\\",\\\\\\"type\\\\\\":\\\\\\"long\\\\\\"}]}],\\\\\\"default\\\\\\":null},{\\\\\\"name\\\\\\":\\\\\\"year\\\\\\",\\\\\\"type\\\\\\":\\\\\\"int\\\\\\"}]}\\"}",\n\n// Schema data is just the base 64 encoded schemaDefinition.\n\n  "producerName": "rest-producer",\n  "messages": [\n    {\n      "key":"my-key",\n      "payload":"{\\"brand\\":\\"dell\\",\\"model\\":\\"alienware\\",\\"year\\":2021,\\"gpu\\":\\"AMD\\",\\"seller\\":{\\"state\\":\\"WA\\",\\"street\\":\\"main street\\",\\"zipCode\\":98004}}",\n      "eventTime":1603045262772,\n      "sequenceId":1\n    },\n    {\n      "key":"my-key",\n      "payload":"{\\"brand\\":\\"asus\\",\\"model\\":\\"rog\\",\\"year\\":2020,\\"gpu\\":\\"NVIDIA\\",\\"seller\\":{\\"state\\":\\"CA\\",\\"street\\":\\"back street\\",\\"zipCode\\":90232}}",\n      "eventTime":1603045262772,\n      "sequenceId":2\n    }\n  ]\n}\n`\n// Sample message\n'})})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>d});var i=n(96540);const r={},t=i.createContext(r);function l(e){const s=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);