"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[68373],{27303:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>h,contentTitle:()=>n,default:()=>o,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"versioned/pulsar-3.0.8","title":"Apache Pulsar 3.0.8","description":"2024-12-02","source":"@site/release-notes/versioned/pulsar-3.0.8.md","sourceDirName":"versioned","slug":"/versioned/pulsar-3.0.8","permalink":"/release-notes/versioned/pulsar-3.0.8","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/pulsar-site/edit/main/release-notes/versioned/pulsar-3.0.8.md","tags":[],"version":"current","frontMatter":{"id":"pulsar-3.0.8","title":"Apache Pulsar 3.0.8","sidebar_label":"Apache Pulsar 3.0.8"}}');var l=s(74848),t=s(28453);const a={id:"pulsar-3.0.8",title:"Apache Pulsar 3.0.8",sidebar_label:"Apache Pulsar 3.0.8"},n=void 0,h={},c=[{value:"2024-12-02",id:"2024-12-02",level:4},{value:"Library updates",id:"library-updates",level:3},{value:"Broker",id:"broker",level:3},{value:"Client",id:"client",level:3},{value:"Pulsar IO and Pulsar Functions",id:"pulsar-io-and-pulsar-functions",level:3},{value:"Others",id:"others",level:3},{value:"Tests &amp; CI",id:"tests--ci",level:3}];function p(e){const i={a:"a",code:"code",h3:"h3",h4:"h4",li:"li",p:"p",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.h4,{id:"2024-12-02",children:"2024-12-02"}),"\n",(0,l.jsx)(i.h3,{id:"library-updates",children:"Library updates"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:["[fix][sec] Upgrade Zookeeper to 3.9.3 to address CVE-2024-51504 (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23581",children:"#23581"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][sec] Upgrade to Netty 4.1.115.Final to address CVE-2024-47535 (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23596",children:"#23596"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[improve][misc] Upgrade Jetty to 9.4.56.v20240826 (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23405",children:"#23405"}),")"]}),"\n"]}),"\n",(0,l.jsx)(i.h3,{id:"broker",children:"Broker"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:["[fix][broker] Avoid orphan ledgers in BucketDelayedDeliveryTracker (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/22802",children:"#22802"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][broker] Broker is failing to create non-durable sub if topic is fenced (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23579",children:"#23579"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][broker] Continue closing even when executor is shut down (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/22599",children:"#22599"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][broker] Fix AvgShedder strategy check (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23156",children:"#23156"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][broker] Fix currently client retries until operation timeout if the topic does not exist (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23530",children:"#23530"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][broker] Fix failed TokenAuthenticatedProducerConsumerTest (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23602",children:"#23602"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][broker] Fix ownership loss (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23515",children:"#23515"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][broker] Fix race-condition causing repeated delete topic (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23522",children:"#23522"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][broker] Increase readBuffer size for bookkeeper.DLOutputStream (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23548",children:"#23548"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][broker] Topics failed to delete after remove cluster from replicated clusters set and caused OOM (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23360",children:"#23360"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][broker] fix null lookup result when brokers are starting (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23642",children:"#23642"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][broker] normalize path (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23438",children:"#23438"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[improve][broker] Add log to track issue when ",(0,l.jsx)(i.code,{children:"handleGetTopicsOfNamespace"})," (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23434",children:"#23434"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[improve][broker] Close TopicPoliciesService to allow Pulsar broker graceful shutdown (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/22589",children:"#22589"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[improve][broker] Decouple pulsar_storage_backlog_age_seconds metric with backlogQuota check (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23619",children:"#23619"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[improve][broker] Don't use forkjoin pool by default for deleting partitioned topics (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/22598",children:"#22598"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[improve][broker] Exclude system topics from namespace level publish and dispatch rate limiting (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23589",children:"#23589"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[improve][broker] Make cluster metadata init command support metadata config path (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23269",children:"#23269"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[improve][broker] Make cluster metadata teardown command support metadata config path (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23520",children:"#23520"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[improve][broker] PIP-392: Add configuration to enable consistent hashing to select active consumer for partitioned topic (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23584",children:"#23584"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[improve][broker] Support cleanup ",(0,l.jsx)(i.code,{children:"replication cluster"})," and ",(0,l.jsx)(i.code,{children:"allowed cluster"})," when cluster metadata teardown (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23561",children:"#23561"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[improve][broker] replace HashMap with inner implementation ConcurrentLongLongPairHashMap in Negative Ack Tracker. (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23582",children:"#23582"}),")"]}),"\n"]}),"\n",(0,l.jsx)(i.h3,{id:"client",children:"Client"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:["[fix][admin] Fix lookup get a null result if uses proxy (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23556",children:"#23556"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][client] Fix Reader.hasMessageAvailable return wrong value after seeking by timestamp with startMessageIdInclusive (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23502",children:"#23502"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][client] Fix deadlock of NegativeAcksTracker (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23651",children:"#23651"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][client] Fix producer/consumer stop to reconnect or Pub/Sub due to IO thread race-condition  (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23499",children:"#23499"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][client] Fix race-condition causing doReconsumeLater to hang when creating retryLetterProducer has failed (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23560",children:"#23560"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][client] Fix the javadoc for ConsumerBuilder.isAckReceiptEnabled (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23452",children:"#23452"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][client] Fixed an issue where a cert chain could not be used in TLS authentication (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23644",children:"#23644"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][client] Initializing client-authentication using configured auth params (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23610",children:"#23610"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][client] Make protobuf-java dependency optional in java client libraries (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23632",children:"#23632"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][client] Prevent embedding protobuf-java class files in pulsar-client-admin and pulsar-client-all (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23468",children:"#23468"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][client] The partitionedProducer maxPendingMessages always is 0 (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23593",children:"#23593"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][client] Use dedicated executor for requests in BinaryProtoLookupService (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23378",children:"#23378"}),") (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23461",children:"#23461"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][client] fix incomingMessageSize and client memory usage is negative (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23624",children:"#23624"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][client] fix the beforeConsume() method earlier hit with message listener (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23578",children:"#23578"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[improve][admin] Print error log if handle http response fails (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23563",children:"#23563"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[improve][client] Enhance error handling for non-exist subscription in consumer creation (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23254",children:"#23254"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[improve][client] Increase default Java client connectionMaxIdleSeconds to 60 seconds (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23430",children:"#23430"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[improve][client] Reduce unshaded dependencies and shading warnings in shaded Java client modules (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23647",children:"#23647"}),")"]}),"\n"]}),"\n",(0,l.jsx)(i.h3,{id:"pulsar-io-and-pulsar-functions",children:"Pulsar IO and Pulsar Functions"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:["[fix][fn] ack messages for window function when its result is null (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23618",children:"#23618"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][sql][branch-3.0] Fix long decimal compatibility in Trino 368. (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23419",children:"#23419"}),")"]}),"\n",(0,l.jsx)(i.li,{children:"[fix][sql][branch-3.0] Fix shading configuration for presto-pulsar"}),"\n",(0,l.jsxs)(i.li,{children:["[improve][io] Support update subscription position for sink connector (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23538",children:"#23538"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[improve][io] Upgrade Spring version to 6.1.13 in IO Connectors (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23459",children:"#23459"}),")"]}),"\n"]}),"\n",(0,l.jsx)(i.h3,{id:"others",children:"Others"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:["[fix] Restored method as deprecated in AbstractMetadataStore (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/21950",children:"#21950"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][misc] Class conflict during jetcd-core-shaded shading process (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23641",children:"#23641"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][misc] Unable to connect an etcd metastore with recent releases due to jetc-core sharding problem (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23604",children:"#23604"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][ml] Managed ledger should recover after open ledger failed (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23368",children:"#23368"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][proxy] Fix pattern consumer does not work when using Proxy (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23489",children:"#23489"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][standalone] correctly delete bookie registration znode (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23497",children:"#23497"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[improve] Improve logic for enabling Netty leak detection (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23613",children:"#23613"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[improve] Use single buffer for metrics when noUnsafe use (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23612",children:"#23612"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][ws] Implement missing http header data functions in AuthenticationDataSubscription (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23638",children:"#23638"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[improve][ml] Avoid repetitive nested lock for isMessageDeleted in ManagedCursorImpl (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23609",children:"#23609"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[improve][offload] Use filesystemURI as the storage path (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23591",children:"#23591"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["Enabling DNS retryOnTimeout with TCP in DnsNameResolver (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23590",children:"#23590"}),")"]}),"\n"]}),"\n",(0,l.jsx)(i.h3,{id:"tests--ci",children:"Tests & CI"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:["[cleanup][build] skip generating pom.xml.versionsBackup (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23639",children:"#23639"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][build] Add basic support for vscode-java and Eclipse IDE (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23448",children:"#23448"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:['[fix][build] Fix error "Element encoding is not allowed here" in pom.xml (',(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23655",children:"#23655"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][test] Address flaky GetPartitionMetadataMultiBrokerTest (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23456",children:"#23456"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][test] Fix DeadLetterTopicTest.testDeadLetterTopicWithInitialSubscriptionAndMultiConsumers (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23552",children:"#23552"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][test] Fix SimpleProducerConsumerTest.testMultiTopicsConsumerImplPauseForManualSubscription (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23546",children:"#23546"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][test] Fix flaky GetPartitionMetadataMultiBrokerTest.testCompatibilityDifferentBrokersForNonPersistentTopic (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23259",children:"#23259"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][test] Fix flaky test ManagedLedgerTest.testDeleteCurrentLedgerWhenItIsClosed (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23437",children:"#23437"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[fix][test][branch-3.0] Fix PrecisTopicPublishRateThrottleTest that broke after ",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23589",children:"#23589"})," changes"]}),"\n",(0,l.jsx)(i.li,{children:"[fix][test][branch-3.0] Fix cherry-picking issue in 2f6c1a3 where Cleanup import was missing"}),"\n",(0,l.jsxs)(i.li,{children:["[improve][build] Require Java 17 for building Pulsar branch-3.0 (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/22875",children:"#22875"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[improve][build] Update maven-wrapper (mvnw) to recent stable version 3.3.2 (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23410",children:"#23410"}),")"]}),"\n",(0,l.jsx)(i.li,{children:"[improve][build][branch-3.0] Upgrade docker-maven-plugin to 0.45.1"}),"\n",(0,l.jsxs)(i.li,{children:["[improve][test] Added message properties tests for batch and non-batch messages (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23473",children:"#23473"}),")"]}),"\n",(0,l.jsxs)(i.li,{children:["[improve][test] Reduce OneWayReplicatorUsingGlobalZKTest.testRemoveCluster execution time (",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23633",children:"#23633"}),")"]}),"\n"]}),"\n",(0,l.jsxs)(i.p,{children:["For the complete list, check the ",(0,l.jsx)(i.a,{href:"https://github.com/apache/pulsar/compare/v3.0.7...v3.0.8",children:"full changelog"}),"."]})]})}function o(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,l.jsx)(i,{...e,children:(0,l.jsx)(p,{...e})}):p(e)}},28453:(e,i,s)=>{s.d(i,{R:()=>a,x:()=>n});var r=s(96540);const l={},t=r.createContext(l);function a(e){const i=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function n(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),r.createElement(t.Provider,{value:i},e.children)}}}]);