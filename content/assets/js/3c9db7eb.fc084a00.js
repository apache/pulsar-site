"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[4454],{49079:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>d,contentTitle:()=>c,default:()=>a,frontMatter:()=>l,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"reference-metrics","title":"Pulsar Metrics","description":"Pulsar exposes metrics in Prometheus format that can be collected and used for monitoring the health of the cluster.","source":"@site/versioned_docs/version-2.4.0/reference-metrics.md","sourceDirName":".","slug":"/reference-metrics","permalink":"/docs/2.4.0/reference-metrics","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/pulsar-site/edit/main/versioned_docs/version-2.4.0/reference-metrics.md","tags":[],"version":"2.4.0","frontMatter":{"id":"reference-metrics","title":"Pulsar Metrics","sidebar_label":"Pulsar Metrics","original_id":"reference-metrics"}}');var i=r(74848),n=r(28453);const l={id:"reference-metrics",title:"Pulsar Metrics",sidebar_label:"Pulsar Metrics",original_id:"reference-metrics"},c=void 0,d={},h=[{value:"Overview",id:"overview",level:2},{value:"ZooKeeper",id:"zookeeper",level:2},{value:"Server metrics",id:"server-metrics",level:3},{value:"Request metrics",id:"request-metrics",level:3},{value:"BookKeeper",id:"bookkeeper",level:2},{value:"Server metrics",id:"server-metrics-1",level:3},{value:"Journal metrics",id:"journal-metrics",level:3},{value:"Storage metrics",id:"storage-metrics",level:3},{value:"Broker",id:"broker",level:2},{value:"Namespace metrics",id:"namespace-metrics",level:3},{value:"Replication metrics",id:"replication-metrics",level:4},{value:"Topic metrics",id:"topic-metrics",level:3},{value:"Replication metrics",id:"replication-metrics-1",level:4},{value:"Subscription metrics",id:"subscription-metrics",level:3},{value:"Consumer metrics",id:"consumer-metrics",level:3},{value:"Jetty metrics",id:"jetty-metrics",level:3},{value:"Monitor",id:"monitor",level:2}];function o(e){const s={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.p,{children:"Pulsar exposes metrics in Prometheus format that can be collected and used for monitoring the health of the cluster."}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#zookeeper",children:"ZooKeeper"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#bookkeeper",children:"BookKeeper"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#broker",children:"Broker"})}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(s.p,{children:"The metrics exposed by Pulsar are in Prometheus format. The types of metrics are:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"https://prometheus.io/docs/concepts/metric_types/#counter",children:"Counter"}),": a cumulative metric that represents a single monotonically increasing counter whose value can only increase or be reset to zero on restart."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"https://prometheus.io/docs/concepts/metric_types/#gauge",children:"Gauge"}),": a ",(0,i.jsx)(s.em,{children:"gauge"})," is a metric that represents a single numerical value that can arbitrarily go up and down."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"https://prometheus.io/docs/concepts/metric_types/#histogram",children:"Histogram"}),": a histogram samples observations (usually things like request durations or response sizes) and counts them in configurable buckets. The ",(0,i.jsx)(s.code,{children:"_bucket"})," suffix is the number of observations within a histogram bucket, configured with parameter ",(0,i.jsx)(s.code,{children:'{le="<upper inclusive bound>"}'}),". The ",(0,i.jsx)(s.code,{children:"_count"})," suffix is the number of observations, shown as a time series and behaves like a counter. The ",(0,i.jsx)(s.code,{children:"_sum"})," suffix is the sum of observed values, also shown as a time series and behaves like a counter. These suffixes are together denoted by ",(0,i.jsx)(s.code,{children:"_*"})," in this doc."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"https://prometheus.io/docs/concepts/metric_types/#summary",children:"Summary"}),": similar to a histogram, a summary samples observations (usually things like request durations and response sizes). While it also provides a total count of observations and a sum of all observed values, it calculates configurable quantiles over a sliding time window."]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"zookeeper",children:"ZooKeeper"}),"\n",(0,i.jsxs)(s.p,{children:['The ZooKeeper metrics are exposed under "/metrics" at port 8000. You can use a different port\nby configuring the ',(0,i.jsx)(s.code,{children:"stats_server_port"})," system property."]}),"\n",(0,i.jsx)(s.h3,{id:"server-metrics",children:"Server metrics"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Name"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"zookeeper_server_znode_count"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The number of z-nodes stored."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"zookeeper_server_data_size_bytes"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total size of all of z-nodes stored."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"zookeeper_server_connections"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The number of currently opened connections."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"zookeeper_server_watches_count"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The number of watchers registered."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"zookeeper_server_ephemerals_count"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The number of ephemeral z-nodes."})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"request-metrics",children:"Request metrics"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Name"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"zookeeper_server_requests"}),(0,i.jsx)(s.td,{children:"Counter"}),(0,i.jsx)(s.td,{children:"The total number of requests received by a particular server."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"zookeeper_server_requests_latency_ms"}),(0,i.jsx)(s.td,{children:"Summary"}),(0,i.jsxs)(s.td,{children:["The requests latency calculated in milliseconds. ",(0,i.jsx)("br",{})," Available labels: ",(0,i.jsx)(s.em,{children:"type"})," (write, read). ",(0,i.jsx)("br",{})," ",(0,i.jsxs)("ul",{children:[(0,i.jsxs)("li",{children:[(0,i.jsx)(s.em,{children:"write"}),": the requests that write data to ZooKeeper."]}),(0,i.jsxs)("li",{children:[(0,i.jsx)(s.em,{children:"read"}),": the requests that read data from ZooKeeper."]})]})]})]})]})]}),"\n",(0,i.jsx)(s.h2,{id:"bookkeeper",children:"BookKeeper"}),"\n",(0,i.jsxs)(s.p,{children:['The BookKeeper metrics are exposed under "/metrics" at port 8000. You can change the port by updating ',(0,i.jsx)(s.code,{children:"prometheusStatsHttpPort"}),"\nin ",(0,i.jsx)(s.code,{children:"bookkeeper.conf"})," configuration file."]}),"\n",(0,i.jsx)(s.h3,{id:"server-metrics-1",children:"Server metrics"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Name"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"bookie_SERVER_STATUS"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsxs)(s.td,{children:["The server status for bookie server. ",(0,i.jsx)("br",{}),(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:"1: the bookie is running in writable mode."}),(0,i.jsx)("li",{children:"0: the bookie is running in readonly mode."})]})]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"bookkeeper_server_ADD_ENTRY_count"}),(0,i.jsx)(s.td,{children:"Counter"}),(0,i.jsxs)(s.td,{children:["The total number of ADD_ENTRY requests received at the bookie. The ",(0,i.jsx)(s.code,{children:"success"})," label is used to distinguish successes and failures."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"bookkeeper_server_READ_ENTRY_count"}),(0,i.jsx)(s.td,{children:"Counter"}),(0,i.jsxs)(s.td,{children:["The total number of READ_ENTRY requests received at the bookie. The ",(0,i.jsx)(s.code,{children:"success"})," label is used to distinguish successes and failures."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"bookie_WRITE_BYTES"}),(0,i.jsx)(s.td,{children:"Counter"}),(0,i.jsx)(s.td,{children:"The total number of bytes written to the bookie."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"bookie_READ_BYTES"}),(0,i.jsx)(s.td,{children:"Counter"}),(0,i.jsx)(s.td,{children:"The total number of bytes read from the bookie."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"bookkeeper_server_ADD_ENTRY_REQUEST"}),(0,i.jsx)(s.td,{children:"Summary"}),(0,i.jsxs)(s.td,{children:["The summary of request latency of ADD_ENTRY requests at the bookie. The ",(0,i.jsx)(s.code,{children:"success"})," label is used to distinguish successes and failures."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"bookkeeper_server_READ_ENTRY_REQUEST"}),(0,i.jsx)(s.td,{children:"Summary"}),(0,i.jsxs)(s.td,{children:["The summary of request latency of READ_ENTRY requests at the bookie. The ",(0,i.jsx)(s.code,{children:"success"})," label is used to distinguish successes and failures."]})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"journal-metrics",children:"Journal metrics"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Name"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"bookie_journal_JOURNAL_SYNC_count"}),(0,i.jsx)(s.td,{children:"Counter"}),(0,i.jsxs)(s.td,{children:["The total number of journal fsync operations happening at the bookie. The ",(0,i.jsx)(s.code,{children:"success"})," label is used to distinguish successes and failures."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"bookie_journal_JOURNAL_QUEUE_SIZE"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total number of requests pending in the journal queue."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"bookie_journal_JOURNAL_FORCE_WRITE_QUEUE_SIZE"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total number of force write (fsync) requests pending in the force-write queue."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"bookie_journal_JOURNAL_CB_QUEUE_SIZE"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total number of callbacks pending in the callback queue."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"bookie_journal_JOURNAL_ADD_ENTRY"}),(0,i.jsx)(s.td,{children:"Summary"}),(0,i.jsx)(s.td,{children:"The summary of request latency of adding entries to the journal."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"bookie_journal_JOURNAL_SYNC"}),(0,i.jsx)(s.td,{children:"Summary"}),(0,i.jsx)(s.td,{children:"The summary of fsync latency of syncing data to the journal disk."})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"storage-metrics",children:"Storage metrics"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Name"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"bookie_ledgers_count"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total number of ledgers stored in the bookie."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"bookie_entries_count"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total number of entries stored in the bookie."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"bookie_write_cache_size"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The bookie write cache size (in bytes)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"bookie_read_cache_size"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The bookie read cache size (in bytes)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"bookie_DELETED_LEDGER_COUNT"}),(0,i.jsx)(s.td,{children:"Counter"}),(0,i.jsx)(s.td,{children:"The total number of ledgers deleted since the bookie has started."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"bookie_ledger_writable_dirs"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The number of writable directories in the bookie."})]})]})]}),"\n",(0,i.jsx)(s.h2,{id:"broker",children:"Broker"}),"\n",(0,i.jsxs)(s.p,{children:['The broker metrics are exposed under "/metrics/" at port 8080. You can change the port by updating ',(0,i.jsx)(s.code,{children:"webServicePort"})," to a different port\nin ",(0,i.jsx)(s.code,{children:"broker.conf"})," configuration file."]}),"\n",(0,i.jsxs)(s.p,{children:["All the metrics exposed by a broker are labelled with ",(0,i.jsx)(s.code,{children:"cluster=\\$\\{pulsar_cluster\\}"}),". The value of ",(0,i.jsx)(s.code,{children:"\\$\\{pulsar_cluster\\}"})," is the pulsar cluster\nname you configured in ",(0,i.jsx)(s.code,{children:"broker.conf"}),"."]}),"\n",(0,i.jsx)(s.p,{children:"Broker has the following kinds of metrics:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"#namespace-metrics",children:"Namespace metrics"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#replication-metrics",children:"Replication metrics"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"#topic-metrics",children:"Topic metrics"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#replication-metrics-1",children:"Replication metrics"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#subscription-metrics",children:"Subscription metrics"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#consumer-metrics",children:"Consumer metrics"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#jetty-metrics",children:"Jetty metrics"})}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"namespace-metrics",children:"Namespace metrics"}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsxs)(s.p,{children:["Namespace metrics are only exposed when ",(0,i.jsx)(s.code,{children:"exposeTopicLevelMetricsInPrometheus"})," is set to ",(0,i.jsx)(s.code,{children:"false"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"All the namespace metrics are labelled with the following labels:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.em,{children:"cluster"}),": ",(0,i.jsx)(s.code,{children:"cluster=\\$\\{pulsar_cluster\\}"}),". ",(0,i.jsx)(s.code,{children:"\\$\\{pulsar_cluster\\}"})," is the cluster name that you configured in ",(0,i.jsx)(s.code,{children:"broker.conf"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.em,{children:"namespace"}),": ",(0,i.jsx)(s.code,{children:"namespace=\\$\\{pulsar_namespace\\}"}),". ",(0,i.jsx)(s.code,{children:"\\$\\{pulsar_namespace\\}"})," is the namespace name."]}),"\n"]}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Name"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_topics_count"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The number of Pulsar topics of the namespace owned by this broker."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_subscriptions_count"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The number of Pulsar subscriptions of the namespace served by this broker."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_producers_count"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The number of active producers of the namespace connected to this broker."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_consumers_count"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The number of active consumers of the namespace connected to this broker."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_rate_in"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total message rate of the namespace coming into this broker (messages/second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_rate_out"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total message rate of the namespace going out from this broker (messages/second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_throughput_in"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total throughput of the namespace coming into this broker (bytes/second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_throughput_out"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total throughput of the namespace going out from this broker (bytes/second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_storage_size"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total storage size of the topics in this namespace owned by this broker (bytes)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_storage_backlog_size"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total backlog size of the topics of this namespace owned by this broker (messages)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_storage_offloaded_size"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total amount of the data in this namespace offloaded to the tiered storage (bytes)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_storage_write_rate"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total message batches (entries) written to the storage for this namespace (message batches / second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_storage_read_rate"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total message batches (entries) read from the storage for this namespace (message batches / second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_subscription_delayed"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total message batches (entries) are delayed for dispatching."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_storage_write_latency_le_*"}),(0,i.jsx)(s.td,{children:"Histogram"}),(0,i.jsxs)(s.td,{children:["The entry rate of a namespace that the storage write latency is smaller with a given threshold.",(0,i.jsx)("br",{})," Available thresholds: ",(0,i.jsx)("br",{}),(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:"pulsar_storage_write_latency_le_0_5: <= 0.5ms "}),(0,i.jsx)("li",{children:"pulsar_storage_write_latency_le_1: <= 1ms"}),(0,i.jsx)("li",{children:"pulsar_storage_write_latency_le_5: <= 5ms"}),(0,i.jsx)("li",{children:"pulsar_storage_write_latency_le_10: <= 10ms"}),(0,i.jsx)("li",{children:"pulsar_storage_write_latency_le_20: <= 20ms"}),(0,i.jsx)("li",{children:"pulsar_storage_write_latency_le_50: <= 50ms"}),(0,i.jsx)("li",{children:"pulsar_storage_write_latency_le_100: <= 100ms"}),(0,i.jsx)("li",{children:"pulsar_storage_write_latency_le_200: <= 200ms"}),(0,i.jsx)("li",{children:"pulsar_storage_write_latency_le_1000: <= 1s"}),(0,i.jsx)("li",{children:"pulsar_storage_write_latency_le_overflow: > 1s"})]})]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_entry_size_le_*"}),(0,i.jsx)(s.td,{children:"Histogram"}),(0,i.jsxs)(s.td,{children:["The entry rate of a namespace that the entry size is smaller with a given threshold.",(0,i.jsx)("br",{})," Available thresholds: ",(0,i.jsx)("br",{}),(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:"pulsar_entry_size_le_128: <= 128 bytes "}),(0,i.jsx)("li",{children:"pulsar_entry_size_le_512: <= 512 bytes"}),(0,i.jsx)("li",{children:"pulsar_entry_size_le_1_kb: <= 1 KB"}),(0,i.jsx)("li",{children:"pulsar_entry_size_le_2_kb: <= 2 KB"}),(0,i.jsx)("li",{children:"pulsar_entry_size_le_4_kb: <= 4 KB"}),(0,i.jsx)("li",{children:"pulsar_entry_size_le_16_kb: <= 16 KB"}),(0,i.jsx)("li",{children:"pulsar_entry_size_le_100_kb: <= 100 KB"}),(0,i.jsx)("li",{children:"pulsar_entry_size_le_1_mb: <= 1 MB"}),(0,i.jsx)("li",{children:"pulsar_entry_size_le_overflow: > 1 MB"})]})]})]})]})]}),"\n",(0,i.jsx)(s.h4,{id:"replication-metrics",children:"Replication metrics"}),"\n",(0,i.jsxs)(s.p,{children:["If a namespace is configured to be replicated between multiple Pulsar clusters, the corresponding replication metrics will also be exposed when ",(0,i.jsx)(s.code,{children:"replicationMetricsEnabled"})," is enabled."]}),"\n",(0,i.jsxs)(s.p,{children:["All the replication metrics will also be labelled with ",(0,i.jsx)(s.code,{children:"remoteCluster=\\$\\{pulsar_remote_cluster\\}"}),"."]}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Name"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_replication_rate_in"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total message rate of the namespace replicating from remote cluster (messages/second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_replication_rate_out"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total message rate of the namespace replicating to remote cluster (messages/second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_replication_throughput_in"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total throughput of the namespace replicating from remote cluster (bytes/second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_replication_throughput_out"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total throughput of the namespace replicating to remote cluster (bytes/second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_replication_backlog"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total backlog of the namespace replicating to remote cluster (messages)."})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"topic-metrics",children:"Topic metrics"}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsxs)(s.p,{children:["Topic metrics are only exposed when ",(0,i.jsx)(s.code,{children:"exposeTopicLevelMetricsInPrometheus"})," is set to true."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"All the topic metrics are labelled with the following labels:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.em,{children:"cluster"}),": ",(0,i.jsx)(s.code,{children:"cluster=\\$\\{pulsar_cluster\\}"}),". ",(0,i.jsx)(s.code,{children:"\\$\\{pulsar_cluster\\}"})," is the cluster name that you configured in ",(0,i.jsx)(s.code,{children:"broker.conf"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.em,{children:"namespace"}),": ",(0,i.jsx)(s.code,{children:"namespace=\\$\\{pulsar_namespace\\}"}),". ",(0,i.jsx)(s.code,{children:"\\$\\{pulsar_namespace\\}"})," is the namespace name."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.em,{children:"topic"}),": ",(0,i.jsx)(s.code,{children:"topic=\\$\\{pulsar_topic\\}"}),". ",(0,i.jsx)(s.code,{children:"\\$\\{pulsar_topic\\}"})," is the topic name."]}),"\n"]}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Name"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_subscriptions_count"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The number of Pulsar subscriptions of the topic served by this broker."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_producers_count"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The number of active producers of the topic connected to this broker."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_consumers_count"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The number of active consumers of the topic connected to this broker."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_rate_in"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total message rate of the topic coming into this broker (messages/second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_rate_out"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total message rate of the topic going out from this broker (messages/second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_throughput_in"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total throughput of the topic coming into this broker (bytes/second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_throughput_out"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total throughput of the topic going out from this broker (bytes/second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_storage_size"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total storage size of the topics in this topic owned by this broker (bytes)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_storage_backlog_size"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total backlog size of the topics of this topic owned by this broker (messages)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_storage_offloaded_size"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total amount of the data in this topic offloaded to the tiered storage (bytes)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_storage_backlog_quota_limit"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total amount of the data in this topic that limit the backlog quota (bytes)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_storage_write_rate"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total message batches (entries) written to the storage for this topic (message batches / second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_storage_read_rate"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total message batches (entries) read from the storage for this topic (message batches / second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_subscription_delayed"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total message batches (entries) are delayed for dispatching."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_storage_write_latency_le_*"}),(0,i.jsx)(s.td,{children:"Histogram"}),(0,i.jsxs)(s.td,{children:["The entry rate of a topic that the storage write latency is smaller with a given threshold.",(0,i.jsx)("br",{})," Available thresholds: ",(0,i.jsx)("br",{}),(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:"pulsar_storage_write_latency_le_0_5: <= 0.5ms "}),(0,i.jsx)("li",{children:"pulsar_storage_write_latency_le_1: <= 1ms"}),(0,i.jsx)("li",{children:"pulsar_storage_write_latency_le_5: <= 5ms"}),(0,i.jsx)("li",{children:"pulsar_storage_write_latency_le_10: <= 10ms"}),(0,i.jsx)("li",{children:"pulsar_storage_write_latency_le_20: <= 20ms"}),(0,i.jsx)("li",{children:"pulsar_storage_write_latency_le_50: <= 50ms"}),(0,i.jsx)("li",{children:"pulsar_storage_write_latency_le_100: <= 100ms"}),(0,i.jsx)("li",{children:"pulsar_storage_write_latency_le_200: <= 200ms"}),(0,i.jsx)("li",{children:"pulsar_storage_write_latency_le_1000: <= 1s"}),(0,i.jsx)("li",{children:"pulsar_storage_write_latency_le_overflow: > 1s"})]})]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_entry_size_le_*"}),(0,i.jsx)(s.td,{children:"Histogram"}),(0,i.jsxs)(s.td,{children:["The entry rate of a topic that the entry size is smaller with a given threshold.",(0,i.jsx)("br",{})," Available thresholds: ",(0,i.jsx)("br",{}),(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:"pulsar_entry_size_le_128: <= 128 bytes "}),(0,i.jsx)("li",{children:"pulsar_entry_size_le_512: <= 512 bytes"}),(0,i.jsx)("li",{children:"pulsar_entry_size_le_1_kb: <= 1 KB"}),(0,i.jsx)("li",{children:"pulsar_entry_size_le_2_kb: <= 2 KB"}),(0,i.jsx)("li",{children:"pulsar_entry_size_le_4_kb: <= 4 KB"}),(0,i.jsx)("li",{children:"pulsar_entry_size_le_16_kb: <= 16 KB"}),(0,i.jsx)("li",{children:"pulsar_entry_size_le_100_kb: <= 100 KB"}),(0,i.jsx)("li",{children:"pulsar_entry_size_le_1_mb: <= 1 MB"}),(0,i.jsx)("li",{children:"pulsar_entry_size_le_overflow: > 1 MB"})]})]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_in_bytes_total"}),(0,i.jsx)(s.td,{children:"Counter"}),(0,i.jsx)(s.td,{children:"The total number of bytes received for this topic"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_producers_count"}),(0,i.jsx)(s.td,{children:"Counter"}),(0,i.jsx)(s.td,{children:"The total number of messages received for this topic"})]})]})]}),"\n",(0,i.jsx)(s.h4,{id:"replication-metrics-1",children:"Replication metrics"}),"\n",(0,i.jsxs)(s.p,{children:["If a namespace that a topic belongs to is configured to be replicated between multiple Pulsar clusters, the corresponding replication metrics will also be exposed when ",(0,i.jsx)(s.code,{children:"replicationMetricsEnabled"})," is enabled."]}),"\n",(0,i.jsxs)(s.p,{children:["All the replication metrics will also be labelled with ",(0,i.jsx)(s.code,{children:"remoteCluster=\\$\\{pulsar_remote_cluster\\}"}),"."]}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Name"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_replication_rate_in"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total message rate of the topic replicating from remote cluster (messages/second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_replication_rate_out"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total message rate of the topic replicating to remote cluster (messages/second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_replication_throughput_in"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total throughput of the topic replicating from remote cluster (bytes/second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_replication_throughput_out"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total throughput of the topic replicating to remote cluster (bytes/second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_replication_backlog"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total backlog of the topic replicating to remote cluster (messages)."})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"subscription-metrics",children:"Subscription metrics"}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsxs)(s.p,{children:["Subscription metrics are only exposed when ",(0,i.jsx)(s.code,{children:"exposeTopicLevelMetricsInPrometheus"})," is set to true."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"All the subscription metrics are labelled with the following labels:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.em,{children:"cluster"}),": ",(0,i.jsx)(s.code,{children:"cluster=\\$\\{pulsar_cluster\\}"}),". ",(0,i.jsx)(s.code,{children:"\\$\\{pulsar_cluster\\}"})," is the cluster name that you configured in ",(0,i.jsx)(s.code,{children:"broker.conf"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.em,{children:"namespace"}),": ",(0,i.jsx)(s.code,{children:"namespace=\\$\\{pulsar_namespace\\}"}),". ",(0,i.jsx)(s.code,{children:"\\$\\{pulsar_namespace\\}"})," is the namespace name."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.em,{children:"topic"}),": ",(0,i.jsx)(s.code,{children:"topic=\\$\\{pulsar_topic\\}"}),". ",(0,i.jsx)(s.code,{children:"\\$\\{pulsar_topic\\}"})," is the topic name."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.em,{children:"subscription"}),": ",(0,i.jsx)(s.code,{children:"subscription=\\$\\{subscription\\}"}),". ",(0,i.jsx)(s.code,{children:"\\$\\{subscription\\}"})," is the topic subscription name."]}),"\n"]}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Name"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_subscription_back_log"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total backlog of a subscription (messages)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_subscription_delayed"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total number of messages are delayed to be dispatched for a subscription (messages)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_subscription_msg_rate_redeliver"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total message rate for message being redelivered (messages/second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_subscription_unacked_messages"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total number of unacknowledged messages of a subscription (messages)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_subscription_blocked_on_unacked_messages"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsxs)(s.td,{children:["Indicate whether a subscription is blocked on unacknowledged messages or not. ",(0,i.jsx)("br",{})," ",(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:"1 means the subscription is blocked on waiting unacknowledged messages to be acked."}),(0,i.jsx)("li",{children:"0 means the subscription is not blocked on waiting unacknowledged messages to be acked."})]})]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_subscription_msg_rate_out"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total message dispatch rate for a subscription (messages/second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_subscription_msg_throughput_out"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total message dispatch throughput for a subscription (bytes/second)."})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"consumer-metrics",children:"Consumer metrics"}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsxs)(s.p,{children:["Consumer metrics are only exposed when both ",(0,i.jsx)(s.code,{children:"exposeTopicLevelMetricsInPrometheus"})," and ",(0,i.jsx)(s.code,{children:"exposeConsumerLevelMetricsInPrometheus"}),"\nare set to true."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"All the consumer metrics are labelled with the following labels:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.em,{children:"cluster"}),": ",(0,i.jsx)(s.code,{children:"cluster=\\$\\{pulsar_cluster\\}"}),". ",(0,i.jsx)(s.code,{children:"\\$\\{pulsar_cluster\\}"})," is the cluster name that you configured in ",(0,i.jsx)(s.code,{children:"broker.conf"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.em,{children:"namespace"}),": ",(0,i.jsx)(s.code,{children:"namespace=\\$\\{pulsar_namespace\\}"}),". ",(0,i.jsx)(s.code,{children:"\\$\\{pulsar_namespace\\}"})," is the namespace name."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.em,{children:"topic"}),": ",(0,i.jsx)(s.code,{children:"topic=\\$\\{pulsar_topic\\}"}),". ",(0,i.jsx)(s.code,{children:"\\$\\{pulsar_topic\\}"})," is the topic name."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.em,{children:"subscription"}),": ",(0,i.jsx)(s.code,{children:"subscription=\\$\\{subscription\\}"}),". ",(0,i.jsx)(s.code,{children:"\\$\\{subscription\\}"})," is the topic subscription name."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.em,{children:"consumer_name"}),": ",(0,i.jsx)(s.code,{children:"consumer_name=\\$\\{consumer_name\\}"}),". ",(0,i.jsx)(s.code,{children:"\\$\\{consumer_name\\}"})," is the topic consumer name."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.em,{children:"consumer_id"}),": ",(0,i.jsx)(s.code,{children:"consumer_id=\\$\\{consumer_id\\}"}),". ",(0,i.jsx)(s.code,{children:"\\$\\{consumer_id\\}"})," is the topic consumer id."]}),"\n"]}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Name"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_consumer_msg_rate_redeliver"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total message rate for message being redelivered (messages/second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_consumer_unacked_messages"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total number of unacknowledged messages of a consumer (messages)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_consumer_blocked_on_unacked_messages"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsxs)(s.td,{children:["Indicate whether a consumer is blocked on unacknowledged messages or not. ",(0,i.jsx)("br",{})," ",(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:"1 means the consumer is blocked on waiting unacknowledged messages to be acked."}),(0,i.jsx)("li",{children:"0 means the consumer is not blocked on waiting unacknowledged messages to be acked."})]})]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_consumer_msg_rate_out"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total message dispatch rate for a consumer (messages/second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_consumer_msg_throughput_out"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The total message dispatch throughput for a consumer (bytes/second)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pulsar_consumer_available_permits"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"The available permits for for a consumer."})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"jetty-metrics",children:"Jetty metrics"}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsxs)(s.p,{children:["For a functions-worker running separately from brokers, its Jetty metrics are only exposed when ",(0,i.jsx)(s.code,{children:"includeStandardPrometheusMetrics"})," is set to ",(0,i.jsx)(s.code,{children:"true"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"All the jetty metrics are labelled with the following labels:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.em,{children:"cluster"}),": ",(0,i.jsx)(s.code,{children:"cluster=\\$\\{pulsar_cluster\\}"}),". ",(0,i.jsx)(s.code,{children:"\\$\\{pulsar_cluster\\}"})," is the cluster name that you have configured in the ",(0,i.jsx)(s.code,{children:"broker.conf"})," file."]}),"\n"]}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Name"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"jetty_requests_total"}),(0,i.jsx)(s.td,{children:"Counter"}),(0,i.jsx)(s.td,{children:"Number of requests."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"jetty_requests_active"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"Number of requests currently active."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"jetty_requests_active_max"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"Maximum number of requests that have been active at once."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"jetty_request_time_max_seconds"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"Maximum time spent handling requests."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"jetty_request_time_seconds_total"}),(0,i.jsx)(s.td,{children:"Counter"}),(0,i.jsx)(s.td,{children:"Total time spent in all request handling."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"jetty_dispatched_total"}),(0,i.jsx)(s.td,{children:"Counter"}),(0,i.jsx)(s.td,{children:"Number of dispatches."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"jetty_dispatched_active"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"Number of dispatches currently active."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"jetty_dispatched_active_max"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"Maximum number of active dispatches being handled."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"jetty_dispatched_time_max"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"Maximum time spent in dispatch handling."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"jetty_dispatched_time_seconds_total"}),(0,i.jsx)(s.td,{children:"Counter"}),(0,i.jsx)(s.td,{children:"Total time spent in dispatch handling."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"jetty_async_requests_total"}),(0,i.jsx)(s.td,{children:"Counter"}),(0,i.jsx)(s.td,{children:"Total number of async requests."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"jetty_async_requests_waiting"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"Currently waiting async requests."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"jetty_async_requests_waiting_max"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"Maximum number of waiting async requests."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"jetty_async_dispatches_total"}),(0,i.jsx)(s.td,{children:"Counter"}),(0,i.jsx)(s.td,{children:"Number of requested that have been asynchronously dispatched."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"jetty_expires_total"}),(0,i.jsx)(s.td,{children:"Counter"}),(0,i.jsx)(s.td,{children:"Number of async requests requests that have expired."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"jetty_responses_total"}),(0,i.jsx)(s.td,{children:"Counter"}),(0,i.jsxs)(s.td,{children:["Number of responses, labeled by status code. The ",(0,i.jsx)(s.code,{children:"code"}),' label can be "1xx", "2xx", "3xx", "4xx", or "5xx".']})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"jetty_stats_seconds"}),(0,i.jsx)(s.td,{children:"Gauge"}),(0,i.jsx)(s.td,{children:"Time in seconds stats have been collected for."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"jetty_responses_bytes_total"}),(0,i.jsx)(s.td,{children:"Counter"}),(0,i.jsx)(s.td,{children:"Total number of bytes across all responses."})]})]})]}),"\n",(0,i.jsx)(s.h2,{id:"monitor",children:"Monitor"}),"\n",(0,i.jsxs)(s.p,{children:["You can ",(0,i.jsx)(s.a,{href:"https://prometheus.io/",children:"set up a Prometheus instance"})," to collect all the metrics exposed at Pulsar components and set up ",(0,i.jsx)(s.a,{href:"https://grafana.com/",children:"Grafana"})," dashboards to display the metrics and monitor your Pulsar cluster."]}),"\n",(0,i.jsx)(s.p,{children:"The following are some Grafana dashboards examples:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"http://pulsar.apache.org/docs/en/deploy-monitoring/#grafana",children:"pulsar-grafana"}),": A grafana dashboard that displays metrics collected in Prometheus for Pulsar clusters running on Kubernetes."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"https://github.com/streamnative/apache-pulsar-grafana-dashboard",children:"apache-pulsar-grafana-dashboard"}),": A collection of grafana dashboard templates for different Pulsar components running on both Kubernetes and on-premise machines."]}),"\n"]})]})}function a(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},28453:(e,s,r)=>{r.d(s,{R:()=>l,x:()=>c});var t=r(96540);const i={},n=t.createContext(i);function l(e){const s=t.useContext(n);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(n.Provider,{value:s},e.children)}}}]);