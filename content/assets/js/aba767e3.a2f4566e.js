"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[17447],{89338:(e,r,o)=>{o.r(r),o.d(r,{assets:()=>s,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>n,toc:()=>i});const n=JSON.parse('{"id":"deploy-docker","title":"Deploy a cluster on Docker","description":"To deploy a Pulsar cluster on Docker, complete the following steps:","source":"@site/versioned_docs/version-2.7.4/deploy-docker.md","sourceDirName":".","slug":"/deploy-docker","permalink":"/docs/2.7.4/deploy-docker","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/pulsar-site/edit/main/versioned_docs/version-2.7.4/deploy-docker.md","tags":[],"version":"2.7.4","frontMatter":{"id":"deploy-docker","title":"Deploy a cluster on Docker","sidebar_label":"Docker","original_id":"deploy-docker"},"sidebar":"docsSidebar","previous":{"title":"Bare metal multi-cluster","permalink":"/docs/2.7.4/deploy-bare-metal-multi-cluster"},"next":{"title":"Monitor","permalink":"/docs/2.7.4/deploy-monitoring"}}');var t=o(74848),a=o(28453);const l={id:"deploy-docker",title:"Deploy a cluster on Docker",sidebar_label:"Docker",original_id:"deploy-docker"},c=void 0,s={},i=[{value:"Prepare",id:"prepare",level:2},{value:"Pull a Pulsar image",id:"pull-a-pulsar-image",level:3},{value:"Create three containers",id:"create-three-containers",level:3},{value:"Create a network",id:"create-a-network",level:3},{value:"Connect containers to network",id:"connect-containers-to-network",level:3}];function d(e){const r={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.p,{children:"To deploy a Pulsar cluster on Docker, complete the following steps:"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsx)(r.li,{children:"Deploy a ZooKeeper cluster (optional)"}),"\n",(0,t.jsx)(r.li,{children:"Initialize cluster metadata"}),"\n",(0,t.jsx)(r.li,{children:"Deploy a BookKeeper cluster"}),"\n",(0,t.jsx)(r.li,{children:"Deploy one or more Pulsar brokers"}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"prepare",children:"Prepare"}),"\n",(0,t.jsxs)(r.p,{children:["To run Pulsar on Docker, you need to create a container for each Pulsar component: ZooKeeper, BookKeeper and broker. You can pull the images of ZooKeeper and BookKeeper separately on ",(0,t.jsx)(r.a,{href:"https://hub.docker.com/",children:"Docker Hub"}),", and pull a ",(0,t.jsx)(r.a,{href:"https://hub.docker.com/r/apachepulsar/pulsar-all/tags",children:"Pulsar image"})," for the broker. You can also pull only one ",(0,t.jsx)(r.a,{href:"https://hub.docker.com/r/apachepulsar/pulsar-all/tags",children:"Pulsar image"})," and create three containers with this image. This tutorial takes the second option as an example."]}),"\n",(0,t.jsx)(r.h3,{id:"pull-a-pulsar-image",children:"Pull a Pulsar image"}),"\n",(0,t.jsxs)(r.p,{children:["You can pull a Pulsar image from ",(0,t.jsx)(r.a,{href:"https://hub.docker.com/r/apachepulsar/pulsar-all/tags",children:"Docker Hub"})," with the following command."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"\ndocker pull apachepulsar/pulsar-all:latest\n\n"})}),"\n",(0,t.jsx)(r.h3,{id:"create-three-containers",children:"Create three containers"}),"\n",(0,t.jsxs)(r.p,{children:["Create containers for ZooKeeper, BookKeeper and broker. In this example, they are named as ",(0,t.jsx)(r.code,{children:"zookeeper"}),", ",(0,t.jsx)(r.code,{children:"bookkeeper"})," and ",(0,t.jsx)(r.code,{children:"broker"})," respectively. You can name them as you want with the ",(0,t.jsx)(r.code,{children:"--name"})," flag. By default, the container names are created randomly."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"\ndocker run -it --name bookkeeper apachepulsar/pulsar-all:latest /bin/bash\ndocker run -it --name zookeeper apachepulsar/pulsar-all:latest /bin/bash\ndocker run -it --name broker apachepulsar/pulsar-all:latest /bin/bash\n\n"})}),"\n",(0,t.jsx)(r.h3,{id:"create-a-network",children:"Create a network"}),"\n",(0,t.jsxs)(r.p,{children:["To deploy a Pulsar cluster on Docker, you need to create a ",(0,t.jsx)(r.code,{children:"network"})," and connect the containers of ZooKeeper, BookKeeper and broker to this network. The following command creates the network ",(0,t.jsx)(r.code,{children:"pulsar"}),":"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"\ndocker network create pulsar\n\n"})}),"\n",(0,t.jsx)(r.h3,{id:"connect-containers-to-network",children:"Connect containers to network"}),"\n",(0,t.jsxs)(r.p,{children:["Connect the containers of ZooKeeper, BookKeeper and broker to the ",(0,t.jsx)(r.code,{children:"pulsar"})," network with the following commands."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"\ndocker network connect pulsar zookeeper\ndocker network connect pulsar bookkeeper\ndocker network connect pulsar broker\n\n"})}),"\n",(0,t.jsxs)(r.p,{children:["To check whether the containers are successfully connected to the network, enter the ",(0,t.jsx)(r.code,{children:"docker network inspect pulsar"})," command."]}),"\n",(0,t.jsxs)(r.p,{children:["For detailed information about how to deploy ZooKeeper cluster, BookKeeper cluster, brokers, see ",(0,t.jsx)(r.a,{href:"/docs/2.7.4/deploy-bare-metal",children:"deploy a cluster on bare metal"}),"."]})]})}function p(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,r,o)=>{o.d(r,{R:()=>l,x:()=>c});var n=o(96540);const t={},a=n.createContext(t);function l(e){const r=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),n.createElement(a.Provider,{value:r},e.children)}}}]);