"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[45168],{10946:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"client-libraries-python","title":"The Pulsar Python client","description":"The Pulsar Python client library is a wrapper over the existing C++ client library and exposes all of the same features. You can find the code in the python GitHub Repository of the C++ client code.","source":"@site/versioned_docs/version-2.2.1/client-libraries-python.md","sourceDirName":".","slug":"/client-libraries-python","permalink":"/docs/2.2.1/client-libraries-python","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/pulsar-site/edit/main/versioned_docs/version-2.2.1/client-libraries-python.md","tags":[],"version":"2.2.1","frontMatter":{"id":"client-libraries-python","title":"The Pulsar Python client","sidebar_label":"Python","original_id":"client-libraries-python"},"sidebar":"docsSidebar","previous":{"title":"Go","permalink":"/docs/2.2.1/client-libraries-go"},"next":{"title":"C++","permalink":"/docs/2.2.1/client-libraries-cpp"}}');var l=i(74848),r=i(28453);const s={id:"client-libraries-python",title:"The Pulsar Python client",sidebar_label:"Python",original_id:"client-libraries-python"},a=void 0,c={},o=[{value:"Installation",id:"installation",level:2},{value:"Installation using pip",id:"installation-using-pip",level:3},{value:"Installing from source",id:"installing-from-source",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"Examples",id:"examples",level:2},{value:"Producer example",id:"producer-example",level:3},{value:"Consumer example",id:"consumer-example",level:3},{value:"Reader interface example",id:"reader-interface-example",level:3}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.p,{children:["The Pulsar Python client library is a wrapper over the existing ",(0,l.jsx)(n.a,{href:"/docs/2.2.1/client-libraries-cpp",children:"C++ client library"})," and exposes all of the ",(0,l.jsx)(n.a,{href:"https://pulsar.apache.org/api/cpp/2.2.1",children:"same features"}),". You can find the code in the ",(0,l.jsxs)(n.a,{href:"https://github.com/apache/pulsar-client-python",children:[(0,l.jsx)(n.code,{children:"python"})," GitHub Repository"]})," of the C++ client code."]}),"\n",(0,l.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,l.jsxs)(n.p,{children:["You can install the ",(0,l.jsx)(n.a,{href:"https://pypi.python.org/pypi/pulsar-client",children:(0,l.jsx)(n.code,{children:"pulsar-client"})})," library either via ",(0,l.jsx)(n.a,{href:"https://pypi.python.org/pypi",children:"PyPi"}),", using ",(0,l.jsx)(n.a,{href:"#installation-using-pip",children:"pip"}),", or by building the library from source."]}),"\n",(0,l.jsx)(n.h3,{id:"installation-using-pip",children:"Installation using pip"}),"\n",(0,l.jsxs)(n.p,{children:["To install the ",(0,l.jsx)(n.code,{children:"pulsar-client"})," library as a pre-built package using the ",(0,l.jsx)(n.a,{href:"https://pip.pypa.io/en/stable/",children:"pip"})," package manager:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"pip install 'pulsar-client==2.2.1'\n"})}),"\n",(0,l.jsx)(n.p,{children:"Installation via PyPi is available for the following Python versions:"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Platform"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Supported Python versions"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsxs)(n.td,{style:{textAlign:"left"},children:["MacOS ",(0,l.jsx)("br",{})," 10.11 (El Capitan) \u2014 10.12 (Sierra) \u2014 10.13 (High Sierra)"]}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"2.7, 3.7"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Linux"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"2.7, 3.3, 3.4, 3.5, 3.6, 3.7"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"installing-from-source",children:"Installing from source"}),"\n",(0,l.jsxs)(n.p,{children:["To install the ",(0,l.jsx)(n.code,{children:"pulsar-client"})," library by building from source, follow ",(0,l.jsx)(n.a,{href:"/docs/2.2.1/client-libraries-cpp#compilation",children:"these instructions"})," and compile the Pulsar C++ client library. That will also build the Python binding for the library."]}),"\n",(0,l.jsx)(n.p,{children:"To install the built Python bindings:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"\n$ git clone https://github.com/apache/pulsar\n$ cd pulsar/pulsar-client-cpp/python\n$ sudo python setup.py install\n\n"})}),"\n",(0,l.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,l.jsxs)(n.p,{children:["The complete Python API reference is available at ",(0,l.jsx)(n.a,{href:"https://pulsar.apache.org/api/python/2.2.1",children:"api/python"}),"."]}),"\n",(0,l.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,l.jsxs)(n.p,{children:["Below you'll find a variety of Python code examples for the ",(0,l.jsx)(n.code,{children:"pulsar-client"})," library."]}),"\n",(0,l.jsx)(n.h3,{id:"producer-example",children:"Producer example"}),"\n",(0,l.jsxs)(n.p,{children:["This creates a Python producer for the ",(0,l.jsx)(n.code,{children:"my-topic"})," topic and send 10 messages on that topic:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"\nimport pulsar\n\nclient = pulsar.Client('pulsar://localhost:6650')\n\nproducer = client.create_producer('my-topic')\n\nfor i in range(10):\n    producer.send(('Hello-%d' % i).encode('utf-8'))\n\nclient.close()\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"consumer-example",children:"Consumer example"}),"\n",(0,l.jsxs)(n.p,{children:["This creates a consumer with the ",(0,l.jsx)(n.code,{children:"my-subscription"})," subscription on the ",(0,l.jsx)(n.code,{children:"my-topic"})," topic, listen for incoming messages, print the content and ID of messages that arrive, and acknowledge each message to the Pulsar broker:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"\nimport pulsar\n\nclient = pulsar.Client('pulsar://localhost:6650')\n\nconsumer = client.subscribe('my-topic', 'my-subscription')\n\nwhile True:\n    msg = consumer.receive()\n    print(\"Received message '{}' id='{}'\".format(msg.data(), msg.message_id()))\n    consumer.acknowledge(msg)\n\nclient.close()\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"reader-interface-example",children:"Reader interface example"}),"\n",(0,l.jsxs)(n.p,{children:["You can use the Pulsar Python API to use the Pulsar ",(0,l.jsx)(n.a,{href:"/docs/2.2.1/concepts-clients#reader-interface",children:"reader interface"}),". Here's an example:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"\n# MessageId taken from a previously fetched message\nmsg_id = msg.message_id()\n\nreader = client.create_reader('my-topic', msg_id)\n\nwhile True:\n    msg = reader.read_next()\n    print(\"Received message '{}' id='{}'\".format(msg.data(), msg.message_id()))\n    # No acknowledgment\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>a});var t=i(96540);const l={},r=t.createContext(l);function s(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);