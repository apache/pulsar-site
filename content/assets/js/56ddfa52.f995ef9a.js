"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[25716],{90972:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"client-libraries-go","title":"Pulsar Go client","description":"Tips: Currently, the CGo client will be deprecated, if you want to know more about the CGo client, please refer to CGo client docs","source":"@site/versioned_docs/version-2.7.5/client-libraries-go.md","sourceDirName":".","slug":"/client-libraries-go","permalink":"/docs/2.7.5/client-libraries-go","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/pulsar-site/edit/main/versioned_docs/version-2.7.5/client-libraries-go.md","tags":[],"version":"2.7.5","frontMatter":{"id":"client-libraries-go","title":"Pulsar Go client","sidebar_label":"Go","original_id":"client-libraries-go"},"sidebar":"docsSidebar","previous":{"title":"Java","permalink":"/docs/2.7.5/client-libraries-java"},"next":{"title":"Python","permalink":"/docs/2.7.5/client-libraries-python"}}');var l=n(74848),r=n(28453);const i={id:"client-libraries-go",title:"Pulsar Go client",sidebar_label:"Go",original_id:"client-libraries-go"},c=void 0,o={},a=[{value:"Installation",id:"installation",level:2},{value:"Install go package",id:"install-go-package",level:3},{value:"Connection URLs",id:"connection-urls",level:2},{value:"Create a client",id:"create-a-client",level:2},{value:"Producers",id:"producers",level:2},{value:"Producer operations",id:"producer-operations",level:3},{value:"Producer Example",id:"producer-example",level:3},{value:"How to use message router in producer",id:"how-to-use-message-router-in-producer",level:4},{value:"How to use delay relative in producer",id:"how-to-use-delay-relative-in-producer",level:4},{value:"Producer configuration",id:"producer-configuration",level:3},{value:"Consumers",id:"consumers",level:2},{value:"Consumer operations",id:"consumer-operations",level:3},{value:"Receive example",id:"receive-example",level:3},{value:"How to use regx consumer",id:"how-to-use-regx-consumer",level:4},{value:"How to use multi topics Consumer",id:"how-to-use-multi-topics-consumer",level:4},{value:"How to use consumer listener",id:"how-to-use-consumer-listener",level:4},{value:"How to use consumer receive timeout",id:"how-to-use-consumer-receive-timeout",level:4},{value:"Consumer configuration",id:"consumer-configuration",level:3},{value:"Readers",id:"readers",level:2},{value:"Reader operations",id:"reader-operations",level:3},{value:"Reader example",id:"reader-example",level:3},{value:"How to use reader to read &#39;next&#39; message",id:"how-to-use-reader-to-read-next-message",level:4},{value:"How to use reader to read specific message",id:"how-to-use-reader-to-read-specific-message",level:4},{value:"Reader configuration",id:"reader-configuration",level:3},{value:"Messages",id:"messages",level:2},{value:"TLS encryption and authentication",id:"tls-encryption-and-authentication",level:2},{value:"OAuth2 authentication",id:"oauth2-authentication",level:2}];function d(e){const t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(t.blockquote,{children:["\n",(0,l.jsxs)(t.p,{children:["Tips: Currently, the CGo client will be deprecated, if you want to know more about the CGo client, please refer to ",(0,l.jsx)(t.a,{href:"/docs/2.7.5/client-libraries-cgo",children:"CGo client docs"})]}),"\n"]}),"\n",(0,l.jsxs)(t.p,{children:["You can use Pulsar ",(0,l.jsx)(t.a,{href:"https://github.com/apache/pulsar-client-go",children:"Go client"})," to create Pulsar ",(0,l.jsx)(t.a,{href:"#producers",children:"producers"}),", ",(0,l.jsx)(t.a,{href:"#consumers",children:"consumers"}),", and ",(0,l.jsx)(t.a,{href:"#readers",children:"readers"})," in Go (aka Golang)."]}),"\n",(0,l.jsxs)(t.blockquote,{children:["\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"API docs available as well"}),"\nFor standard API docs, consult the ",(0,l.jsx)(t.a,{href:"https://godoc.org/github.com/apache/pulsar-client-go/pulsar",children:"Godoc"}),"."]}),"\n"]}),"\n",(0,l.jsx)(t.h2,{id:"installation",children:"Installation"}),"\n",(0,l.jsx)(t.h3,{id:"install-go-package",children:"Install go package"}),"\n",(0,l.jsxs)(t.p,{children:["You can install the ",(0,l.jsx)(t.code,{children:"pulsar"})," library locally using ",(0,l.jsx)(t.code,{children:"go get"}),"."]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-bash",children:'\n$ go get -u "github.com/apache/pulsar-client-go/pulsar"\n\n'})}),"\n",(0,l.jsx)(t.p,{children:"Once installed locally, you can import it into your project:"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:'\nimport "github.com/apache/pulsar-client-go/pulsar"\n\n'})}),"\n",(0,l.jsx)(t.h2,{id:"connection-urls",children:"Connection URLs"}),"\n",(0,l.jsxs)(t.p,{children:["To connect to Pulsar using client libraries, you need to specify a ",(0,l.jsx)(t.a,{href:"/docs/2.7.5/developing-binary-protocol",children:"Pulsar protocol"})," URL."]}),"\n",(0,l.jsxs)(t.p,{children:["Pulsar protocol URLs are assigned to specific clusters, use the ",(0,l.jsx)(t.code,{children:"pulsar"})," scheme and have a default port of 6650. Here's an example for ",(0,l.jsx)(t.code,{children:"localhost"}),":"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-http",children:"\npulsar://localhost:6650\n\n"})}),"\n",(0,l.jsx)(t.p,{children:"A URL for a production Pulsar cluster may look something like this:"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-http",children:"\npulsar://pulsar.us-west.example.com:6650\n\n"})}),"\n",(0,l.jsxs)(t.p,{children:["If you're using ",(0,l.jsx)(t.a,{href:"/docs/2.7.5/security-tls-authentication",children:"TLS"})," authentication, the URL will look like something like this:"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-http",children:"\npulsar+ssl://pulsar.us-west.example.com:6651\n\n"})}),"\n",(0,l.jsx)(t.h2,{id:"create-a-client",children:"Create a client"}),"\n",(0,l.jsxs)(t.p,{children:["In order to interact with Pulsar, you'll first need a ",(0,l.jsx)(t.code,{children:"Client"})," object. You can create a client object using the ",(0,l.jsx)(t.code,{children:"NewClient"})," function, passing in a ",(0,l.jsx)(t.code,{children:"ClientOptions"})," object (more on configuration ",(0,l.jsx)(t.a,{href:"#client-configuration",children:"below"}),"). Here's an example:"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:'\nimport (\n\t"log"\n\t"time"\n\n\t"github.com/apache/pulsar-client-go/pulsar"\n)\n\nfunc main() {\n\tclient, err := pulsar.NewClient(pulsar.ClientOptions{\n\t\tURL:               "pulsar://localhost:6650",\n\t\tOperationTimeout:  30 * time.Second,\n\t\tConnectionTimeout: 30 * time.Second,\n\t})\n\tif err != nil {\n\t\tlog.Fatalf("Could not instantiate Pulsar client: %v", err)\n\t}\n\n\tdefer client.Close()\n}\n\n'})}),"\n",(0,l.jsx)(t.p,{children:"The following configurable parameters are available for Pulsar clients:"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Name"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Default"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"URL"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Configure the service URL for the Pulsar service. This parameter is required"}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"ConnectionTimeout"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Timeout for the establishment of a TCP connection"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"30s"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"OperationTimeout"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Set the operation timeout. Producer-create, subscribe and unsubscribe operations will be retried until this interval, after which the operation will be marked as failed"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"30s"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Authentication"}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["Configure the authentication provider. Example: ",(0,l.jsx)(t.code,{children:'Authentication: NewAuthenticationTLS("my-cert.pem", "my-key.pem")'})]}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"no authentication"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"TLSTrustCertsFilePath"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Set the path to the trusted TLS certificate file"}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"TLSAllowInsecureConnection"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Configure whether the Pulsar client accept untrusted TLS certificate from broker"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"false"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"TLSValidateHostname"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Configure whether the Pulsar client verify the validity of the host name from broker"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"false"})]})]})]}),"\n",(0,l.jsx)(t.h2,{id:"producers",children:"Producers"}),"\n",(0,l.jsxs)(t.p,{children:["Pulsar producers publish messages to Pulsar topics. You can ",(0,l.jsx)(t.a,{href:"#producer-configuration",children:"configure"})," Go producers using a ",(0,l.jsx)(t.code,{children:"ProducerOptions"})," object. Here's an example:"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:'\nproducer, err := client.CreateProducer(pulsar.ProducerOptions{\n\tTopic: "my-topic",\n})\n\n_, err = producer.Send(context.Background(), &pulsar.ProducerMessage{\n\tPayload: []byte("hello"),\n})\n\ndefer producer.Close()\n\nif err != nil {\n\tfmt.Println("Failed to publish message", err)\n}\nfmt.Println("Published message")\n\n'})}),"\n",(0,l.jsx)(t.h3,{id:"producer-operations",children:"Producer operations"}),"\n",(0,l.jsx)(t.p,{children:"Pulsar Go producers have the following methods available:"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Return type"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"Topic()"})}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["Fetches the producer's ",(0,l.jsx)(t.a,{href:"/docs/2.7.5/reference-terminology#topic",children:"topic"})]}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"string"})})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"Name()"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Fetches the producer's name"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"string"})})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"Send(context.Context, *ProducerMessage)"})}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["Publishes a ",(0,l.jsx)(t.a,{href:"#messages",children:"message"})," to the producer's topic. This call will block until the message is successfully acknowledged by the Pulsar broker, or an error will be thrown if the timeout set using the ",(0,l.jsx)(t.code,{children:"SendTimeout"})," in the producer's ",(0,l.jsx)(t.a,{href:"#producer-configuration",children:"configuration"})," is exceeded."]}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"(MessageID, error)"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"SendAsync(context.Context, *ProducerMessage, func(MessageID, *ProducerMessage, error))"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Send a message, this call will be blocking until is successfully acknowledged by the Pulsar broker."}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"LastSequenceID()"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Get the last sequence id that was published by this producer. his represent either the automatically assigned or custom sequence id (set on the ProducerMessage) that was published and acknowledged by the broker."}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"int64"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"Flush()"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Flush all the messages buffered in the client and wait until all messages have been successfully persisted."}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"error"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"Close()"})}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["Closes the producer and releases all resources allocated to it. If ",(0,l.jsx)(t.code,{children:"Close()"})," is called then no more messages will be accepted from the publisher. This method will block until all pending publish requests have been persisted by Pulsar. If an error is thrown, no pending writes will be retried."]}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]})]})]}),"\n",(0,l.jsx)(t.h3,{id:"producer-example",children:"Producer Example"}),"\n",(0,l.jsx)(t.h4,{id:"how-to-use-message-router-in-producer",children:"How to use message router in producer"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:'\nclient, err := NewClient(ClientOptions{\n\tURL: serviceURL,\n})\n\nif err != nil {\n\tlog.Fatal(err)\n}\ndefer client.Close()\n\n// Only subscribe on the specific partition\nconsumer, err := client.Subscribe(ConsumerOptions{\n\tTopic:            "my-partitioned-topic-partition-2",\n\tSubscriptionName: "my-sub",\n})\n\nif err != nil {\n\tlog.Fatal(err)\n}\ndefer consumer.Close()\n\nproducer, err := client.CreateProducer(ProducerOptions{\n\tTopic: "my-partitioned-topic",\n\tMessageRouter: func(msg *ProducerMessage, tm TopicMetadata) int {\n\t\tfmt.Println("Routing message ", msg, " -- Partitions: ", tm.NumPartitions())\n\t\treturn 2\n\t},\n})\n\nif err != nil {\n\tlog.Fatal(err)\n}\ndefer producer.Close()\n\n'})}),"\n",(0,l.jsx)(t.h4,{id:"how-to-use-delay-relative-in-producer",children:"How to use delay relative in producer"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:'\nclient, err := NewClient(ClientOptions{\n\tURL: "pulsar://localhost:6650",\n})\nif err != nil {\n\tlog.Fatal(err)\n}\ndefer client.Close()\n\ntopicName := newTopicName()\nproducer, err := client.CreateProducer(pulsar.ProducerOptions{\n    Topic:           topicName,\n    DisableBatching: true,\n})\nif err != nil {\n\tlog.Fatal(err)\n}\ndefer producer.Close()\n\nconsumer, err := client.Subscribe(ConsumerOptions{\n\tTopic:            topicName,\n\tSubscriptionName: "subName",\n\tType:             Shared,\n})\nif err != nil {\n\tlog.Fatal(err)\n}\ndefer consumer.Close()\n\nID, err := producer.Send(context.Background(), &ProducerMessage{\n\tPayload:      []byte(fmt.Sprintf("test")),\n\tDeliverAfter: 3 * time.Second,\n})\nif err != nil {\n\tlog.Fatal(err)\n}\nfmt.Println(ID)\n\nctx, canc := context.WithTimeout(context.Background(), 1*time.Second)\nmsg, err := consumer.Receive(ctx)\nif err != nil {\n\tlog.Fatal(err)\n}\nfmt.Println(msg.Payload())\ncanc()\n\nctx, canc = context.WithTimeout(context.Background(), 5*time.Second)\nmsg, err = consumer.Receive(ctx)\nif err != nil {\n\tlog.Fatal(err)\n}\nfmt.Println(msg.Payload())\ncanc()\n\n'})}),"\n",(0,l.jsx)(t.h3,{id:"producer-configuration",children:"Producer configuration"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Name"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Default"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Topic"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Topic specify the topic this consumer will subscribe to. This argument is required when constructing the reader."}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Name"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Name specify a name for the producer. If not assigned, the system will generate a globally unique name which can be access with Producer.ProducerName()."}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Properties"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Properties attach a set of application defined properties to the producer This properties will be visible in the topic stats"}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"MaxPendingMessages"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"MaxPendingMessages set the max size of the queue holding the messages pending to receive an acknowledgment from the broker."}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"HashingScheme"}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["HashingScheme change the ",(0,l.jsx)(t.code,{children:"HashingScheme"})," used to chose the partition on where to publish a particular message."]}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"JavaStringHash"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"CompressionType"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"CompressionType set the compression type for the producer."}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"not compressed"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"MessageRouter"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"MessageRouter set a custom message routing policy by passing an implementation of MessageRouter"}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"DisableBatching"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"DisableBatching control whether automatic batching of messages is enabled for the producer."}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"false"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"BatchingMaxPublishDelay"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"BatchingMaxPublishDelay set the time period within which the messages sent will be batched"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"1ms"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"BatchingMaxMessages"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"BatchingMaxMessages set the maximum number of messages permitted in a batch."}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"1000"})]})]})]}),"\n",(0,l.jsx)(t.h2,{id:"consumers",children:"Consumers"}),"\n",(0,l.jsxs)(t.p,{children:["Pulsar consumers subscribe to one or more Pulsar topics and listen for incoming messages produced on that topic/those topics. You can ",(0,l.jsx)(t.a,{href:"#consumer-configuration",children:"configure"})," Go consumers using a ",(0,l.jsx)(t.code,{children:"ConsumerOptions"})," object. Here's a basic example that uses channels:"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:'\nconsumer, err := client.Subscribe(pulsar.ConsumerOptions{\n\tTopic:            "topic-1",\n\tSubscriptionName: "my-sub",\n\tType:             pulsar.Shared,\n})\nif err != nil {\n\tlog.Fatal(err)\n}\ndefer consumer.Close()\n\nfor i := 0; i < 10; i++ {\n\tmsg, err := consumer.Receive(context.Background())\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\tfmt.Printf("Received message msgId: %#v -- content: \'%s\'\\n",\n\t\tmsg.ID(), string(msg.Payload()))\n\n\tconsumer.Ack(msg)\n}\n\nif err := consumer.Unsubscribe(); err != nil {\n\tlog.Fatal(err)\n}\n\n'})}),"\n",(0,l.jsx)(t.h3,{id:"consumer-operations",children:"Consumer operations"}),"\n",(0,l.jsx)(t.p,{children:"Pulsar Go consumers have the following methods available:"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Return type"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"Subscription()"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Returns the consumer's subscription name"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"string"})})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"Unsubcribe()"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Unsubscribes the consumer from the assigned topic. Throws an error if the unsubscribe operation is somehow unsuccessful."}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"error"})})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"Receive(context.Context)"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Receives a single message from the topic. This method blocks until a message is available."}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"(Message, error)"})})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"Ack(Message)"})}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,l.jsx)(t.a,{href:"/docs/2.7.5/reference-terminology#acknowledgment-ack",children:"Acknowledges"})," a message to the Pulsar ",(0,l.jsx)(t.a,{href:"/docs/2.7.5/reference-terminology#broker",children:"broker"})]}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"AckID(MessageID)"})}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,l.jsx)(t.a,{href:"/docs/2.7.5/reference-terminology#acknowledgment-ack",children:"Acknowledges"})," a message to the Pulsar ",(0,l.jsx)(t.a,{href:"/docs/2.7.5/reference-terminology#broker",children:"broker"})," by message ID"]}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"Nack(Message)"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Acknowledge the failure to process a single message."}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"NackID(MessageID)"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Acknowledge the failure to process a single message."}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"Seek(msgID MessageID)"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Reset the subscription associated with this consumer to a specific message id. The message id can either be a specific message or represent the first or last messages in the topic."}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"error"})})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"SeekByTime(time time.Time)"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Reset the subscription associated with this consumer to a specific message publish time."}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"error"})})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"Close()"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Closes the consumer, disabling its ability to receive messages from the broker"}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]})]})]}),"\n",(0,l.jsx)(t.h3,{id:"receive-example",children:"Receive example"}),"\n",(0,l.jsx)(t.h4,{id:"how-to-use-regx-consumer",children:"How to use regx consumer"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:'\nclient, err := pulsar.NewClient(pulsar.ClientOptions{\n    URL: "pulsar://localhost:6650",\n})\n\ndefer client.Close()\n\np, err := client.CreateProducer(ProducerOptions{\n\tTopic:           topicInRegex,\n\tDisableBatching: true,\n})\nif err != nil {\n\tlog.Fatal(err)\n}\ndefer p.Close()\n\ntopicsPattern := fmt.Sprintf("persistent://%s/foo.*", namespace)\nopts := ConsumerOptions{\n\tTopicsPattern:    topicsPattern,\n\tSubscriptionName: "regex-sub",\n}\nconsumer, err := client.Subscribe(opts)\nif err != nil {\n\tlog.Fatal(err)\n}\ndefer consumer.Close()\n\n'})}),"\n",(0,l.jsx)(t.h4,{id:"how-to-use-multi-topics-consumer",children:"How to use multi topics Consumer"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:'\nfunc newTopicName() string {\n\treturn fmt.Sprintf("my-topic-%v", time.Now().Nanosecond())\n}\n\n\ntopic1 := "topic-1"\ntopic2 := "topic-2"\n\nclient, err := NewClient(ClientOptions{\n\tURL: "pulsar://localhost:6650",\n})\nif err != nil {\n\tlog.Fatal(err)\n}\ntopics := []string{topic1, topic2}\nconsumer, err := client.Subscribe(ConsumerOptions{\n\tTopics:           topics,\n\tSubscriptionName: "multi-topic-sub",\n})\nif err != nil {\n\tlog.Fatal(err)\n}\ndefer consumer.Close()\n\n'})}),"\n",(0,l.jsx)(t.h4,{id:"how-to-use-consumer-listener",children:"How to use consumer listener"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:'\nimport (\n\t"fmt"\n\t"log"\n\n\t"github.com/apache/pulsar-client-go/pulsar"\n)\n\nfunc main() {\n\tclient, err := pulsar.NewClient(pulsar.ClientOptions{URL: "pulsar://localhost:6650"})\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\tdefer client.Close()\n\n\tchannel := make(chan pulsar.ConsumerMessage, 100)\n\n\toptions := pulsar.ConsumerOptions{\n\t\tTopic:            "topic-1",\n\t\tSubscriptionName: "my-subscription",\n\t\tType:             pulsar.Shared,\n\t}\n\n\toptions.MessageChannel = channel\n\n\tconsumer, err := client.Subscribe(options)\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\tdefer consumer.Close()\n\n\t// Receive messages from channel. The channel returns a struct which contains message and the consumer from where\n\t// the message was received. It\'s not necessary here since we have 1 single consumer, but the channel could be\n\t// shared across multiple consumers as well\n\tfor cm := range channel {\n\t\tmsg := cm.Message\n\t\tfmt.Printf("Received message  msgId: %v -- content: \'%s\'\\n",\n\t\t\tmsg.ID(), string(msg.Payload()))\n\n\t\tconsumer.Ack(msg)\n\t}\n}\n\n'})}),"\n",(0,l.jsx)(t.h4,{id:"how-to-use-consumer-receive-timeout",children:"How to use consumer receive timeout"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:'\nclient, err := NewClient(ClientOptions{\n\tURL: "pulsar://localhost:6650",\n})\nif err != nil {\n\tlog.Fatal(err)\n}\ndefer client.Close()\n\ntopic := "test-topic-with-no-messages"\nctx, cancel := context.WithTimeout(context.Background(), 500*time.Millisecond)\ndefer cancel()\n\n// create consumer\nconsumer, err := client.Subscribe(ConsumerOptions{\n\tTopic:            topic,\n\tSubscriptionName: "my-sub1",\n\tType:             Shared,\n})\nif err != nil {\n\tlog.Fatal(err)\n}\ndefer consumer.Close()\n\nmsg, err := consumer.Receive(ctx)\nfmt.Println(msg.Payload())\nif err != nil {\n\tlog.Fatal(err)\n}\n\n'})}),"\n",(0,l.jsx)(t.h3,{id:"consumer-configuration",children:"Consumer configuration"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Name"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Default"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Topic"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Topic specify the topic this consumer will subscribe to. This argument is required when constructing the reader."}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Topics"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Specify a list of topics this consumer will subscribe on. Either a topic, a list of topics or a topics pattern are required when subscribing"}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"TopicsPattern"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Specify a regular expression to subscribe to multiple topics under the same namespace. Either a topic, a list of topics or a topics pattern are required when subscribing"}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"AutoDiscoveryPeriod"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Specify the interval in which to poll for new partitions or new topics if using a TopicsPattern."}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"SubscriptionName"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Specify the subscription name for this consumer. This argument is required when subscribing"}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Name"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Set the consumer name"}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Properties"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Properties attach a set of application defined properties to the producer This properties will be visible in the topic stats"}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Type"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Select the subscription type to be used when subscribing to the topic."}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Exclusive"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"SubscriptionInitialPosition"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"InitialPosition at which the cursor will be set when subscribe"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Latest"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"DLQ"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Configuration for Dead Letter Queue consumer policy."}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"no DLQ"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"MessageChannel"}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["Sets a ",(0,l.jsx)(t.code,{children:"MessageChannel"})," for the consumer. When a message is received, it will be pushed to the channel for consumption"]}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"ReceiverQueueSize"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Sets the size of the consumer receive queue."}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"1000"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"NackRedeliveryDelay"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"The delay after which to redeliver the messages that failed to be processed"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"1min"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"ReadCompacted"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"If enabled, the consumer will read messages from the compacted topic rather than reading the full message backlog of the topic"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"false"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"ReplicateSubscriptionState"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Mark the subscription as replicated to keep it in sync across clusters"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"false"})]})]})]}),"\n",(0,l.jsx)(t.h2,{id:"readers",children:"Readers"}),"\n",(0,l.jsxs)(t.p,{children:["Pulsar readers process messages from Pulsar topics. Readers are different from consumers because with readers you need to explicitly specify which message in the stream you want to begin with (consumers, on the other hand, automatically begin with the most recent unacked message). You can ",(0,l.jsx)(t.a,{href:"#reader-configuration",children:"configure"})," Go readers using a ",(0,l.jsx)(t.code,{children:"ReaderOptions"})," object. Here's an example:"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:'\nreader, err := client.CreateReader(pulsar.ReaderOptions{\n\tTopic:          "topic-1",\n\tStartMessageID: pulsar.EarliestMessageID(),\n})\nif err != nil {\n\tlog.Fatal(err)\n}\ndefer reader.Close()\n\n'})}),"\n",(0,l.jsx)(t.h3,{id:"reader-operations",children:"Reader operations"}),"\n",(0,l.jsx)(t.p,{children:"Pulsar Go readers have the following methods available:"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Return type"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"Topic()"})}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["Returns the reader's ",(0,l.jsx)(t.a,{href:"/docs/2.7.5/reference-terminology#topic",children:"topic"})]}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"string"})})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"Next(context.Context)"})}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["Receives the next message on the topic (analogous to the ",(0,l.jsx)(t.code,{children:"Receive"})," method for ",(0,l.jsx)(t.a,{href:"#consumer-operations",children:"consumers"}),"). This method blocks until a message is available."]}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"(Message, error)"})})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"HasNext()"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Check if there is any message available to read from the current position"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"(bool, error)"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"Close()"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Closes the reader, disabling its ability to receive messages from the broker"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"error"})})]})]})]}),"\n",(0,l.jsx)(t.h3,{id:"reader-example",children:"Reader example"}),"\n",(0,l.jsx)(t.h4,{id:"how-to-use-reader-to-read-next-message",children:"How to use reader to read 'next' message"}),"\n",(0,l.jsxs)(t.p,{children:["Here's an example usage of a Go reader that uses the ",(0,l.jsx)(t.code,{children:"Next()"})," method to process incoming messages:"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:'\nimport (\n\t"context"\n\t"fmt"\n\t"log"\n\n\t"github.com/apache/pulsar-client-go/pulsar"\n)\n\nfunc main() {\n\tclient, err := pulsar.NewClient(pulsar.ClientOptions{URL: "pulsar://localhost:6650"})\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\tdefer client.Close()\n\n\treader, err := client.CreateReader(pulsar.ReaderOptions{\n\t\tTopic:          "topic-1",\n\t\tStartMessageID: pulsar.EarliestMessageID(),\n\t})\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\tdefer reader.Close()\n\n\tfor reader.HasNext() {\n\t\tmsg, err := reader.Next(context.Background())\n\t\tif err != nil {\n\t\t\tlog.Fatal(err)\n\t\t}\n\n\t\tfmt.Printf("Received message msgId: %#v -- content: \'%s\'\\n",\n\t\t\tmsg.ID(), string(msg.Payload()))\n\t}\n}\n\n'})}),"\n",(0,l.jsxs)(t.p,{children:["In the example above, the reader begins reading from the earliest available message (specified by ",(0,l.jsx)(t.code,{children:"pulsar.EarliestMessage"}),"). The reader can also begin reading from the latest message (",(0,l.jsx)(t.code,{children:"pulsar.LatestMessage"}),") or some other message ID specified by bytes using the ",(0,l.jsx)(t.code,{children:"DeserializeMessageID"})," function, which takes a byte array and returns a ",(0,l.jsx)(t.code,{children:"MessageID"})," object. Here's an example:"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:'\nlastSavedId := // Read last saved message id from external store as byte[]\n\nreader, err := client.CreateReader(pulsar.ReaderOptions{\n    Topic:          "my-golang-topic",\n    StartMessageID: pulsar.DeserializeMessageID(lastSavedId),\n})\n\n'})}),"\n",(0,l.jsx)(t.h4,{id:"how-to-use-reader-to-read-specific-message",children:"How to use reader to read specific message"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:'\nclient, err := NewClient(ClientOptions{\n\tURL: lookupURL,\n})\n\nif err != nil {\n\tlog.Fatal(err)\n}\ndefer client.Close()\n\ntopic := "topic-1"\nctx := context.Background()\n\n// create producer\nproducer, err := client.CreateProducer(ProducerOptions{\n\tTopic:           topic,\n\tDisableBatching: true,\n})\nif err != nil {\n\tlog.Fatal(err)\n}\ndefer producer.Close()\n\n// send 10 messages\nmsgIDs := [10]MessageID{}\nfor i := 0; i < 10; i++ {\n\tmsgID, err := producer.Send(ctx, &ProducerMessage{\n\t\tPayload: []byte(fmt.Sprintf("hello-%d", i)),\n\t})\n\tassert.NoError(t, err)\n\tassert.NotNil(t, msgID)\n\tmsgIDs[i] = msgID\n}\n\n// create reader on 5th message (not included)\nreader, err := client.CreateReader(ReaderOptions{\n\tTopic:          topic,\n\tStartMessageID: msgIDs[4],\n})\n\nif err != nil {\n\tlog.Fatal(err)\n}\ndefer reader.Close()\n\n// receive the remaining 5 messages\nfor i := 5; i < 10; i++ {\n\tmsg, err := reader.Next(context.Background())\n\tif err != nil {\n\tlog.Fatal(err)\n}\n\n// create reader on 5th message (included)\nreaderInclusive, err := client.CreateReader(ReaderOptions{\n\tTopic:                   topic,\n\tStartMessageID:          msgIDs[4],\n\tStartMessageIDInclusive: true,\n})\n\nif err != nil {\n\tlog.Fatal(err)\n}\ndefer readerInclusive.Close()\n\n'})}),"\n",(0,l.jsx)(t.h3,{id:"reader-configuration",children:"Reader configuration"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Name"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Default"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Topic"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Topic specify the topic this consumer will subscribe to. This argument is required when constructing the reader."}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Name"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Name set the reader name."}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Properties"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Attach a set of application defined properties to the reader. This properties will be visible in the topic stats"}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"StartMessageID"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"StartMessageID initial reader positioning is done by specifying a message id."}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"StartMessageIDInclusive"}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["If true, the reader will start at the ",(0,l.jsx)(t.code,{children:"StartMessageID"}),", included. Default is ",(0,l.jsx)(t.code,{children:"false"}),' and the reader will start from the "next" message']}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"false"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"MessageChannel"}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["MessageChannel sets a ",(0,l.jsx)(t.code,{children:"MessageChannel"})," for the consumer When a message is received, it will be pushed to the channel for consumption"]}),(0,l.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"ReceiverQueueSize"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"ReceiverQueueSize sets the size of the consumer receive queue."}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"1000"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"SubscriptionRolePrefix"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"SubscriptionRolePrefix set the subscription role prefix."}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:'"reader"'})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"ReadCompacted"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"If enabled, the reader will read messages from the compacted topic rather than reading the full message backlog of the topic.  ReadCompacted can only be enabled when reading from a persistent topic."}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"false"})]})]})]}),"\n",(0,l.jsx)(t.h2,{id:"messages",children:"Messages"}),"\n",(0,l.jsxs)(t.p,{children:["The Pulsar Go client provides a ",(0,l.jsx)(t.code,{children:"ProducerMessage"})," interface that you can use to construct messages to producer on Pulsar topics. Here's an example message:"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:'\nmsg := pulsar.ProducerMessage{\n    Payload: []byte("Here is some message data"),\n    Key: "message-key",\n    Properties: map[string]string{\n        "foo": "bar",\n    },\n    EventTime: time.Now(),\n    ReplicationClusters: []string{"cluster1", "cluster3"},\n}\n\nif _, err := producer.send(msg); err != nil {\n    log.Fatalf("Could not publish message due to: %v", err)\n}\n\n'})}),"\n",(0,l.jsxs)(t.p,{children:["The following methods parameters are available for ",(0,l.jsx)(t.code,{children:"ProducerMessage"})," objects:"]}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Parameter"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"Payload"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"The actual data payload of the message"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"Key"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"The optional key associated with the message (particularly useful for things like topic compaction)"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"Properties"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"A key-value map (both keys and values must be strings) for any application-specific metadata attached to the message"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"EventTime"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"The timestamp associated with the message"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"ReplicationClusters"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"The clusters to which this message will be replicated. Pulsar brokers handle message replication automatically; you should only change this setting if you want to override the broker default."})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"SequenceID"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Set the sequence id to assign to the current message"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"DeliverAfter"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Request to deliver the message only after the specified relative delay"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"DeliverAt"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Deliver the message only at or after the specified absolute timestamp"})]})]})]}),"\n",(0,l.jsx)(t.h2,{id:"tls-encryption-and-authentication",children:"TLS encryption and authentication"}),"\n",(0,l.jsxs)(t.p,{children:["In order to use ",(0,l.jsx)(t.a,{href:"/docs/2.7.5/security-tls-transport",children:"TLS encryption"}),", you'll need to configure your client to do so:"]}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:["Use ",(0,l.jsx)(t.code,{children:"pulsar+ssl"})," URL type"]}),"\n",(0,l.jsxs)(t.li,{children:["Set ",(0,l.jsx)(t.code,{children:"TLSTrustCertsFilePath"})," to the path to the TLS certs used by your client and the Pulsar broker"]}),"\n",(0,l.jsxs)(t.li,{children:["Configure ",(0,l.jsx)(t.code,{children:"Authentication"})," option"]}),"\n"]}),"\n",(0,l.jsx)(t.p,{children:"Here's an example:"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:'\nopts := pulsar.ClientOptions{\n    URL: "pulsar+ssl://my-cluster.com:6651",\n    TLSTrustCertsFilePath: "/path/to/certs/my-cert.csr",\n    Authentication: NewAuthenticationTLS("my-cert.pem", "my-key.pem"),\n}\n\n'})}),"\n",(0,l.jsx)(t.h2,{id:"oauth2-authentication",children:"OAuth2 authentication"}),"\n",(0,l.jsxs)(t.p,{children:["To use ",(0,l.jsx)(t.a,{href:"/docs/2.7.5/security-oauth2",children:"OAuth2 authentication"}),", you'll need to configure your client to perform the following operations.\nThis example shows how to configure OAuth2 authentication."]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:'\noauth := pulsar.NewAuthenticationOAuth2(map[string]string{\n\t\t"type":       "client_credentials",\n\t\t"issuerUrl":  "https://dev-kt-aa9ne.us.auth0.com",\n\t\t"audience":   "https://dev-kt-aa9ne.us.auth0.com/api/v2/",\n\t\t"privateKey": "/path/to/privateKey",\n\t\t"clientId":   "0Xx...Yyxeny",\n\t})\nclient, err := pulsar.NewClient(pulsar.ClientOptions{\n\t\tURL:              "pulsar://my-cluster:6650",\n\t\tAuthentication:   oauth,\n})\n\n'})})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>c});var s=n(96540);const l={},r=s.createContext(l);function i(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);