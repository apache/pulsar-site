"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[72116],{56846:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"io-quickstart","title":"How to connect Pulsar to database","description":"Get started to connect Pulsar to database.","source":"@site/versioned_docs/version-3.3.x/io-quickstart.md","sourceDirName":".","slug":"/io-quickstart","permalink":"/docs/3.3.x/io-quickstart","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/pulsar-site/edit/main/versioned_docs/version-3.3.x/io-quickstart.md","tags":[],"version":"3.3.x","frontMatter":{"id":"io-quickstart","title":"How to connect Pulsar to database","sidebar_label":"Get started","description":"Get started to connect Pulsar to database."},"sidebar":"docsSidebar","previous":{"title":"Overview","permalink":"/docs/3.3.x/io-overview"},"next":{"title":"Use","permalink":"/docs/3.3.x/io-use"}}');var r=s(74848),i=s(28453);const t={id:"io-quickstart",title:"How to connect Pulsar to database",sidebar_label:"Get started",description:"Get started to connect Pulsar to database."},c=void 0,l={},o=[{value:"Install Pulsar and built-in connector",id:"install-pulsar-and-built-in-connector",level:2},{value:"Start Pulsar standalone",id:"start-pulsar-standalone",level:2},{value:"Connect Pulsar to Cassandra",id:"connect-pulsar-to-cassandra",level:2},{value:"Step 1: Set up a Cassandra cluster",id:"step-1-set-up-a-cassandra-cluster",level:3},{value:"Step 2: Configure a Cassandra sink",id:"step-2-configure-a-cassandra-sink",level:3},{value:"Step 3: Create a Cassandra sink",id:"step-3-create-a-cassandra-sink",level:3},{value:"Step 4: Inspect a Cassandra sink",id:"step-4-inspect-a-cassandra-sink",level:3},{value:"Step 5: Verify a Cassandra sink",id:"step-5-verify-a-cassandra-sink",level:3},{value:"Step 6: Delete a Cassandra Sink",id:"step-6-delete-a-cassandra-sink",level:3},{value:"Connect Pulsar to PostgreSQL",id:"connect-pulsar-to-postgresql",level:2},{value:"Step 1: Set up a PostgreSQL cluster",id:"step-1-set-up-a-postgresql-cluster",level:3},{value:"Step 2: Configure a JDBC sink",id:"step-2-configure-a-jdbc-sink",level:3},{value:"Step 3: Create a JDBC sink",id:"step-3-create-a-jdbc-sink",level:3},{value:"Tip",id:"tip",level:4},{value:"Step 4: Inspect a JDBC sink",id:"step-4-inspect-a-jdbc-sink",level:3},{value:"Step 5: Stop a JDBC sink",id:"step-5-stop-a-jdbc-sink",level:3},{value:"Step 6: Restart a JDBC sink",id:"step-6-restart-a-jdbc-sink",level:3},{value:"Step 7: Update a JDBC sink",id:"step-7-update-a-jdbc-sink",level:3},{value:"Step 8: Delete a JDBC sink",id:"step-8-delete-a-jdbc-sink",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"This tutorial provides a hands-on look at how you can move data out of Pulsar without writing a single line of code."}),"\n",(0,r.jsxs)(n.p,{children:["It is helpful to review the ",(0,r.jsx)(n.a,{href:"/docs/3.3.x/io-overview",children:"concepts"})," for Pulsar I/O by running the steps in this guide to gain a deeper understanding."]}),"\n",(0,r.jsx)(n.p,{children:"At the end of this tutorial, you can:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#connect-pulsar-to-cassandra",children:"Connect Pulsar to Cassandra"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#connect-pulsar-to-postgresql",children:"Connect Pulsar to PostgreSQL"})}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"These instructions assume you are running Pulsar in standalone mode. However, all the commands used in this tutorial can be used in a multi-node Pulsar cluster without any changes."}),"\n",(0,r.jsx)(n.li,{children:"All the instructions are assumed to run at the root directory of a Pulsar binary distribution."}),"\n"]})}),"\n",(0,r.jsx)(n.h2,{id:"install-pulsar-and-built-in-connector",children:"Install Pulsar and built-in connector"}),"\n",(0,r.jsx)(n.p,{children:"Before connecting Pulsar to a database, you need to install Pulsar and the desired built-in connector."}),"\n",(0,r.jsxs)(n.p,{children:["Read ",(0,r.jsx)(n.a,{href:"/docs/3.3.x/getting-started-standalone",children:"Run a standalone Pulsar cluster locally"})," for downloading the Pulsar distribution."]}),"\n",(0,r.jsxs)(n.p,{children:["To enable Pulsar connectors, you need to download the connectors' tarball release on ",(0,r.jsx)(n.a,{href:"pathname:///download/",children:"download page"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["After you download the NAR file, copy the file to the ",(0,r.jsx)(n.code,{children:"connectors"})," directory in the Pulsar directory. For example, if you download the ",(0,r.jsx)(n.code,{children:"pulsar-io-aerospike-3.3.3.nar"})," connector file, enter the following commands:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mkdir connectors\nmv pulsar-io-aerospike-3.3.3.nar connectors\n\nls connectors\n# pulsar-io-aerospike-3.3.3.nar\n# ...\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["If you are running Pulsar in a bare metal cluster, make sure ",(0,r.jsx)(n.code,{children:"connectors"})," tarball is unzipped in every pulsar directory of the broker (or in every pulsar directory of function-worker if you are running a separate worker cluster for Pulsar Functions)."]}),"\n",(0,r.jsxs)(n.li,{children:["If you are ",(0,r.jsx)(n.a,{href:"/docs/3.3.x/getting-started-docker",children:"running Pulsar in Docker"})," or deploying Pulsar using a docker image (e.g. ",(0,r.jsx)(n.a,{href:"/docs/3.3.x/deploy-kubernetes",children:"K8S"}),"), you can use the ",(0,r.jsx)(n.code,{children:"apachepulsar/pulsar-all"})," image instead of the ",(0,r.jsx)(n.code,{children:"apachepulsar/pulsar"})," image. The ",(0,r.jsx)(n.code,{children:"apachepulsar/pulsar-all"})," image has already bundled all built-in connectors."]}),"\n"]})}),"\n",(0,r.jsx)(n.h2,{id:"start-pulsar-standalone",children:"Start Pulsar standalone"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Start Pulsar locally."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bin/pulsar standalone\n"})}),"\n",(0,r.jsx)(n.p,{children:"All the components of a Pulsar service are started in order."}),"\n",(0,r.jsx)(n.p,{children:"You can curl those pulsar service endpoints to make sure the Pulsar service is up and running correctly."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Check Pulsar binary protocol port."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"telnet localhost 6650\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Check Pulsar Function cluster."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -s http://localhost:8080/admin/v2/worker/cluster\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example output"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'[{"workerId":"c-standalone-fw-localhost-6750","workerHostname":"localhost","port":6750}]\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Make sure a public tenant and a default namespace exist."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -s http://localhost:8080/admin/v2/namespaces/public\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example output"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'["public/default","public/functions"]\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"All built-in connectors should be listed as available."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -s http://localhost:8080/admin/v2/functions/connectors\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example output"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'[{"name":"aerospike","description":"Aerospike database sink","sinkClass":"org.apache.pulsar.io.aerospike.AerospikeStringSink"},{"name":"cassandra","description":"Writes data into Cassandra","sinkClass":"org.apache.pulsar.io.cassandra.CassandraStringSink"},{"name":"kafka","description":"Kafka source and sink connector","sourceClass":"org.apache.pulsar.io.kafka.KafkaStringSource","sinkClass":"org.apache.pulsar.io.kafka.KafkaBytesSink"},{"name":"kinesis","description":"Kinesis sink connector","sinkClass":"org.apache.pulsar.io.kinesis.KinesisSink"},{"name":"rabbitmq","description":"RabbitMQ source connector","sourceClass":"org.apache.pulsar.io.rabbitmq.RabbitMQSource"},{"name":"twitter","description":"Ingest data from Twitter firehose","sourceClass":"org.apache.pulsar.io.twitter.TwitterFireHose"}]\n'})}),"\n",(0,r.jsxs)(n.p,{children:["If an error occurs when starting the Pulsar service, you may see an exception at the terminal running ",(0,r.jsx)(n.code,{children:"pulsar/standalone"}),",\nor you can navigate to the ",(0,r.jsx)(n.code,{children:"logs"})," directory under the Pulsar directory to view the logs."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"connect-pulsar-to-cassandra",children:"Connect Pulsar to Cassandra"}),"\n",(0,r.jsx)(n.p,{children:"This section demonstrates how to connect Pulsar to Cassandra."}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Make sure you have Docker installed. If you do not have one, see ",(0,r.jsx)(n.a,{href:"https://docs.docker.com/docker-for-mac/install/",children:"install Docker"}),". For more information about Docker commands, see ",(0,r.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/run/",children:"Docker CLI"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["The Cassandra sink connector reads messages from Pulsar topics and writes the messages into Cassandra tables. For more information, see ",(0,r.jsx)(n.a,{href:"/docs/3.3.x/io-cassandra-sink",children:"Cassandra sink connector"}),"."]}),"\n"]})}),"\n",(0,r.jsx)(n.p,{children:"To connect Pulsar to Cassandra, you can follow the steps below:"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-set-up-a-cassandra-cluster",children:"Step 1: Set up a Cassandra cluster"}),"\n",(0,r.jsxs)(n.p,{children:["This example uses ",(0,r.jsx)(n.code,{children:"cassandra"})," Docker image to start a single-node Cassandra cluster in Docker."]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Start a Cassandra cluster."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker run -d --rm --name=cassandra -p 9042:9042 cassandra:3.11\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsx)(n.p,{children:"Before moving to the next steps, make sure the Cassandra cluster is running."})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Make sure the Docker process is running."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker ps\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Check the Cassandra logs to make sure the Cassandra process is running as expected."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker logs cassandra\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Check the status of the Cassandra cluster."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker exec cassandra nodetool status\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example output"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Datacenter: datacenter1\n=======================\nStatus=Up/Down\n|/ State=Normal/Leaving/Joining/Moving\n--  Address     Load       Tokens       Owns (effective)  Host ID                               Rack\nUN  172.17.0.2  103.67 KiB  256          100.0%            af0e4b2f-84e0-4f0b-bb14-bd5f9070ff26  rack1\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"cqlsh"})," to connect to the Cassandra cluster."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker exec -ti cassandra cqlsh localhost\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Output"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Connected to Test Cluster at localhost:9042.\n[cqlsh 5.0.1 | Cassandra 3.11.2 | CQL spec 3.4.4 | Native protocol v4]\nUse HELP for help.\ncqlsh>\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Create a keyspace ",(0,r.jsx)(n.code,{children:"pulsar_test_keyspace"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cqlsh> CREATE KEYSPACE pulsar_test_keyspace WITH replication = {'class':'SimpleStrategy', 'replication_factor':1};\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Create a table ",(0,r.jsx)(n.code,{children:"pulsar_test_table"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cqlsh> USE pulsar_test_keyspace;\ncqlsh:pulsar_test_keyspace> CREATE TABLE pulsar_test_table (key text PRIMARY KEY, col text);\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-2-configure-a-cassandra-sink",children:"Step 2: Configure a Cassandra sink"}),"\n",(0,r.jsx)(n.p,{children:"Now that we have a Cassandra cluster running locally."}),"\n",(0,r.jsx)(n.p,{children:"In this section, you need to configure a Cassandra sink connector."}),"\n",(0,r.jsx)(n.p,{children:"To run a Cassandra sink connector, you need to prepare a configuration file including the information that Pulsar connector runtime needs to know."}),"\n",(0,r.jsx)(n.p,{children:"For example, how Pulsar connector can find the Cassandra cluster, what is the keyspace and the table that Pulsar connector uses for writing Pulsar messages to, and so on."}),"\n",(0,r.jsx)(n.p,{children:"You can create a configuration file through one of the following methods."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"JSON"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "roots": "localhost:9042",\n    "keyspace": "pulsar_test_keyspace",\n    "columnFamily": "pulsar_test_table",\n    "keyname": "key",\n    "columnName": "col"\n}\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"YAML"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'configs:\n    roots: "localhost:9042"\n    keyspace: "pulsar_test_keyspace"\n    columnFamily: "pulsar_test_table"\n    keyname: "key"\n    columnName: "col"\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["For more information, see ",(0,r.jsx)(n.a,{href:"/docs/3.3.x/io-cassandra-sink",children:"Cassandra sink connector"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"step-3-create-a-cassandra-sink",children:"Step 3: Create a Cassandra sink"}),"\n",(0,r.jsxs)(n.p,{children:["You can use the ",(0,r.jsx)(n.a,{href:"pathname:///reference/#/3.3.x/pulsar-admin/",children:"Connector Admin CLI"})," to create a sink connector and perform other operations on them."]}),"\n",(0,r.jsxs)(n.p,{children:["Run the following command to create a Cassandra sink connector with sink type ",(0,r.jsx)(n.em,{children:"cassandra"})," and the config file ",(0,r.jsx)(n.em,{children:"examples/cassandra-sink.yml"})," created previously."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"sink-type"})," parameter of the currently built-in connectors is determined by the setting of the ",(0,r.jsx)(n.code,{children:"name"})," parameter specified in the ",(0,r.jsx)(n.em,{children:"pulsar-io.yaml"})," file."]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bin/pulsar-admin sinks create \\\n    --tenant public \\\n    --namespace default \\\n    --name cassandra-test-sink \\\n    --sink-type cassandra \\\n    --sink-config-file $PWD/examples/cassandra-sink.yml \\\n    --inputs test_cassandra\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Once the command is executed, Pulsar creates the sink connector ",(0,r.jsx)(n.em,{children:"cassandra-test-sink"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["This sink connector runs as a Pulsar Function and writes the messages produced in the topic ",(0,r.jsx)(n.em,{children:"test_cassandra"})," to the Cassandra table ",(0,r.jsx)(n.em,{children:"pulsar_test_table"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"step-4-inspect-a-cassandra-sink",children:"Step 4: Inspect a Cassandra sink"}),"\n",(0,r.jsxs)(n.p,{children:["You can use the ",(0,r.jsx)(n.a,{href:"pathname:///reference/#/3.3.x/pulsar-admin/",children:"Connector Admin CLI"})," to monitor a connector and perform other operations on it."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Get the information of a Cassandra sink."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bin/pulsar-admin sinks get \\\n  --tenant public \\\n  --namespace default \\\n  --name cassandra-test-sink\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example output"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n"tenant": "public",\n"namespace": "default",\n"name": "cassandra-test-sink",\n"className": "org.apache.pulsar.io.cassandra.CassandraStringSink",\n"inputSpecs": {\n  "test_cassandra": {\n    "isRegexPattern": false\n  }\n},\n"configs": {\n  "roots": "localhost:9042",\n  "keyspace": "pulsar_test_keyspace",\n  "columnFamily": "pulsar_test_table",\n  "keyname": "key",\n  "columnName": "col"\n},\n"parallelism": 1,\n"processingGuarantees": "ATLEAST_ONCE",\n"retainOrdering": false,\n"autoAck": true,\n"archive": "builtin://cassandra"\n}\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Check the status of a Cassandra sink."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bin/pulsar-admin sinks status \\\n  --tenant public \\\n  --namespace default \\\n  --name cassandra-test-sink\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example output"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n"numInstances" : 1,\n"numRunning" : 1,\n"instances" : [ {\n  "instanceId" : 0,\n  "status" : {\n    "running" : true,\n    "error" : "",\n    "numRestarts" : 0,\n    "numReadFromPulsar" : 0,\n    "numSystemExceptions" : 0,\n    "latestSystemExceptions" : [ ],\n    "numSinkExceptions" : 0,\n    "latestSinkExceptions" : [ ],\n    "numWrittenToSink" : 0,\n    "lastReceivedTime" : 0,\n    "workerId" : "c-standalone-fw-localhost-8080"\n  }\n} ]\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-5-verify-a-cassandra-sink",children:"Step 5: Verify a Cassandra sink"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Produce some messages to the input topic of the Cassandra sink ",(0,r.jsx)(n.em,{children:"test_cassandra"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'for i in {0..9}; do bin/pulsar-client produce -m "key-$i" -n 1 test_cassandra; done\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Inspect the status of the Cassandra sink ",(0,r.jsx)(n.em,{children:"test_cassandra"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bin/pulsar-admin sinks status \\\n    --tenant public \\\n    --namespace default \\\n    --name cassandra-test-sink\n"})}),"\n",(0,r.jsxs)(n.p,{children:["You can see 10 messages are processed by the Cassandra sink ",(0,r.jsx)(n.em,{children:"test_cassandra"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example output"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "numInstances" : 1,\n  "numRunning" : 1,\n  "instances" : [ {\n    "instanceId" : 0,\n    "status" : {\n      "running" : true,\n      "error" : "",\n      "numRestarts" : 0,\n      "numReadFromPulsar" : 10,\n      "numSystemExceptions" : 0,\n      "latestSystemExceptions" : [ ],\n      "numSinkExceptions" : 0,\n      "latestSinkExceptions" : [ ],\n      "numWrittenToSink" : 10,\n      "lastReceivedTime" : 1551685489136,\n      "workerId" : "c-standalone-fw-localhost-8080"\n    }\n  } ]\n}\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"cqlsh"})," to connect to the Cassandra cluster."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker exec -ti cassandra cqlsh localhost\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Check the data of the Cassandra table ",(0,r.jsx)(n.em,{children:"pulsar_test_table"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cqlsh> use pulsar_test_keyspace;\ncqlsh:pulsar_test_keyspace> select * from pulsar_test_table;\n\nkey    | col\n--------+--------\n key-5 |  key-5\n key-0 |  key-0\n key-9 |  key-9\n key-2 |  key-2\n key-1 |  key-1\n key-3 |  key-3\n key-6 |  key-6\n key-7 |  key-7\n key-4 |  key-4\n key-8 |  key-8\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-6-delete-a-cassandra-sink",children:"Step 6: Delete a Cassandra Sink"}),"\n",(0,r.jsxs)(n.p,{children:["You can use the ",(0,r.jsx)(n.a,{href:"pathname:///reference/#/3.3.x/pulsar-admin/",children:"Connector Admin CLI"}),"\nto delete a connector and perform other operations on it."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bin/pulsar-admin sinks delete \\\n    --tenant public \\\n    --namespace default \\\n    --name cassandra-test-sink\n"})}),"\n",(0,r.jsx)(n.h2,{id:"connect-pulsar-to-postgresql",children:"Connect Pulsar to PostgreSQL"}),"\n",(0,r.jsx)(n.p,{children:"This section demonstrates how to connect Pulsar to PostgreSQL."}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Make sure you have Docker installed. If you do not have one, see ",(0,r.jsx)(n.a,{href:"https://docs.docker.com/docker-for-mac/install/",children:"install Docker"}),". For more information about Docker commands, see ",(0,r.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/run/",children:"Docker CLI"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["The JDBC sink connector pulls messages from Pulsar topics and persists the messages to ClickHouse, MariaDB, PostgreSQL, or SQLite. For more information, see ",(0,r.jsx)(n.a,{href:"/docs/3.3.x/io-jdbc-sink",children:"JDBC sink connector"}),"."]}),"\n"]})}),"\n",(0,r.jsx)(n.p,{children:"To connect Pulsar to PostgreSQL, you can follow the steps below:"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-set-up-a-postgresql-cluster",children:"Step 1: Set up a PostgreSQL cluster"}),"\n",(0,r.jsx)(n.p,{children:"This example uses the PostgreSQL 12 docker image to start a single-node PostgreSQL cluster in Docker."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Pull the PostgreSQL 12 image from Docker."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker pull postgres:12\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Start PostgreSQL."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker run -d -it --rm \\\n    --name pulsar-postgres \\\n    -p 5432:5432 \\\n    -e POSTGRES_PASSWORD=password \\\n    -e POSTGRES_USER=postgres \\\n    postgres:12\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Check if PostgreSQL has been started successfully."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker logs -f pulsar-postgres\n"})}),"\n",(0,r.jsx)(n.p,{children:"PostgreSQL has been started successfully if the following message appears."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:'2020-05-11 20:09:24.492 UTC [1] LOG:  starting PostgreSQL 12.2 (Debian 12.2-2.pgdg100+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 8.3.0-6) 8.3.0, 64-bit\n2020-05-11 20:09:24.492 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432\n2020-05-11 20:09:24.492 UTC [1] LOG:  listening on IPv6 address "::", port 5432\n2020-05-11 20:09:24.499 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"\n2020-05-11 20:09:24.523 UTC [55] LOG:  database system was shut down at 2020-05-11 20:09:24 UTC\n2020-05-11 20:09:24.533 UTC [1] LOG:  database system is ready to accept connections\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Access to PostgreSQL container."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker exec -it pulsar-postgres /bin/bash\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Log in to PostgreSQL with the default username and password:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"psql -U postgres postgres\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Create a ",(0,r.jsx)(n.code,{children:"pulsar_postgres_jdbc_sink"})," table using the following command:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"create table if not exists pulsar_postgres_jdbc_sink\n(\nid serial PRIMARY KEY,\nname VARCHAR(255) NOT NULL\n);\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-2-configure-a-jdbc-sink",children:"Step 2: Configure a JDBC sink"}),"\n",(0,r.jsx)(n.p,{children:"Now we have a PostgreSQL running locally."}),"\n",(0,r.jsx)(n.p,{children:"In this section, you need to configure a JDBC sink connector."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Add a configuration file."}),"\n",(0,r.jsx)(n.p,{children:"To run a JDBC sink connector, you need to prepare a YAML configuration file including the information that the Pulsar connector runtime needs to know."}),"\n",(0,r.jsx)(n.p,{children:"For example, how Pulsar connector can find the PostgreSQL cluster, what is the JDBC URL and the table that Pulsar connector uses for writing messages."}),"\n",(0,r.jsxs)(n.p,{children:["Create a ",(0,r.jsx)(n.em,{children:"pulsar-postgres-jdbc-sink.yaml"})," file, copy the following contents to this file, and place the file in the ",(0,r.jsx)(n.code,{children:"pulsar/connectors"})," folder."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'configs:\n  userName: "postgres"\n  password: "password"\n  jdbcUrl: "jdbc:postgresql://localhost:5432/postgres"\n  tableName: "pulsar_postgres_jdbc_sink"\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Create a schema."}),"\n",(0,r.jsxs)(n.p,{children:["Create a ",(0,r.jsx)(n.em,{children:"avro-schema"})," file, copy the following contents to this file, and place the file in the ",(0,r.jsx)(n.code,{children:"pulsar/connectors"})," folder."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "AVRO",\n  "schema": "{\\"type\\":\\"record\\",\\"name\\":\\"Test\\",\\"fields\\":[{\\"name\\":\\"id\\",\\"type\\":[\\"null\\",\\"int\\"]},{\\"name\\":\\"name\\",\\"type\\":[\\"null\\",\\"string\\"]}]}",\n  "properties": {}\n}\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["For more information about AVRO, see ",(0,r.jsx)(n.a,{href:"https://avro.apache.org/docs/1.9.1/",children:"Apache Avro"}),"."]})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Upload a schema to a topic."}),"\n",(0,r.jsxs)(n.p,{children:["This example uploads the ",(0,r.jsx)(n.em,{children:"avro-schema"})," schema to the ",(0,r.jsx)(n.em,{children:"pulsar-postgres-jdbc-sink-topic"})," topic."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bin/pulsar-admin schemas upload pulsar-postgres-jdbc-sink-topic -f ./connectors/avro-schema\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Check if the schema has been uploaded successfully."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bin/pulsar-admin schemas get pulsar-postgres-jdbc-sink-topic\n"})}),"\n",(0,r.jsx)(n.p,{children:"The schema has been uploaded successfully if the following message appears."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{"name":"pulsar-postgres-jdbc-sink-topic","schema":"{\\"type\\":\\"record\\",\\"name\\":\\"Test\\",\\"fields\\":[{\\"name\\":\\"id\\",\\"type\\":[\\"null\\",\\"int\\"]},{\\"name\\":\\"name\\",\\"type\\":[\\"null\\",\\"string\\"]}]}","type":"AVRO","properties":{}}\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-3-create-a-jdbc-sink",children:"Step 3: Create a JDBC sink"}),"\n",(0,r.jsxs)(n.p,{children:["You can use the ",(0,r.jsx)(n.a,{href:"pathname:///reference/#/3.3.x/pulsar-admin/",children:"Connector Admin CLI"}),"\nto create a sink connector and perform other operations on it."]}),"\n",(0,r.jsx)(n.p,{children:"This example creates a sink connector and specifies the desired information."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bin/pulsar-admin sinks create \\\n    --archive $PWD/connectors/pulsar-io-jdbc-postgres-3.3.3.nar \\\n    --inputs pulsar-postgres-jdbc-sink-topic \\\n    --name pulsar-postgres-jdbc-sink \\\n    --sink-config-file $PWD/connectors/pulsar-postgres-jdbc-sink.yaml \\\n    --parallelism 1\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Once the command is executed, Pulsar creates a sink connector ",(0,r.jsx)(n.em,{children:"pulsar-postgres-jdbc-sink"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["This sink connector runs as a Pulsar Function and writes the messages produced in the topic ",(0,r.jsx)(n.em,{children:"pulsar-postgres-jdbc-sink-topic"})," to the PostgreSQL table ",(0,r.jsx)(n.em,{children:"pulsar_postgres_jdbc_sink"}),"."]}),"\n",(0,r.jsx)(n.h4,{id:"tip",children:"Tip"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Flag"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--archive"})}),(0,r.jsx)(n.td,{children:"The absolute path to the archive file for the sink."}),(0,r.jsx)(n.td,{children:"$PWD/pulsar-io-jdbc-postgres-3.3.3.nar"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--inputs"})}),(0,r.jsxs)(n.td,{children:["The input topic(s) of the sink. ",(0,r.jsx)("br",{}),(0,r.jsx)("br",{})," Multiple topics can be specified as a comma-separated list."]}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--name"})}),(0,r.jsx)(n.td,{children:"The name of the sink."}),(0,r.jsx)(n.td,{children:"pulsar-postgres-jdbc-sink"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--sink-config-file"})}),(0,r.jsx)(n.td,{children:"The absolute path to a YAML config file specifying the configuration of the sink."}),(0,r.jsx)(n.td,{children:"$PWD/pulsar-postgres-jdbc-sink.yaml"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--parallelism"})}),(0,r.jsxs)(n.td,{children:["The parallelism factor of the sink. ",(0,r.jsx)("br",{}),(0,r.jsx)("br",{})," For example, the number of sink instances to run."]}),(0,r.jsx)(n.td,{children:"1"})]})]})]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["For more information about ",(0,r.jsx)(n.code,{children:"pulsar-admin sinks create options"}),", see ",(0,r.jsx)(n.a,{href:"pathname:///reference/#/3.3.x/pulsar-admin/",children:"Pulsar admin docs"}),"."]})}),"\n",(0,r.jsx)(n.p,{children:"The sink has been created successfully if the following message appears."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"Created successfully\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-4-inspect-a-jdbc-sink",children:"Step 4: Inspect a JDBC sink"}),"\n",(0,r.jsxs)(n.p,{children:["You can use the ",(0,r.jsx)(n.a,{href:"pathname:///reference/#/3.3.x/pulsar-admin/",children:"Connector Admin CLI"}),"\nto monitor a connector and perform other operations on it."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"List all running JDBC sink(s)."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bin/pulsar-admin sinks list \\\n    --tenant public \\\n    --namespace default\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["For more information about ",(0,r.jsx)(n.code,{children:"pulsar-admin sinks list options"}),", see ",(0,r.jsx)(n.a,{href:"pathname:///reference/#/3.3.x/pulsar-admin/",children:"Pulsar admin docs"}),"."]})}),"\n",(0,r.jsxs)(n.p,{children:["The result shows that only the ",(0,r.jsx)(n.em,{children:"postgres-jdbc-sink"})," sink is running."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'[\n"pulsar-postgres-jdbc-sink"\n]\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Get the information of a JDBC sink."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bin/pulsar-admin sinks get \\\n  --tenant public \\\n  --namespace default \\\n  --name pulsar-postgres-jdbc-sink\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["For more information about ",(0,r.jsx)(n.code,{children:"pulsar-admin sinks get options"}),", see ",(0,r.jsx)(n.a,{href:"pathname:///reference/#/3.3.x/pulsar-admin/",children:"Pulsar admin docs"}),"."]})}),"\n",(0,r.jsx)(n.p,{children:"The result shows the information of the sink connector, including tenant, namespace, topic and so on."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n"tenant": "public",\n"namespace": "default",\n"name": "pulsar-postgres-jdbc-sink",\n"className": "org.apache.pulsar.io.jdbc.PostgresJdbcAutoSchemaSink",\n"inputSpecs": {\n  "pulsar-postgres-jdbc-sink-topic": {\n    "isRegexPattern": false\n  }\n},\n"configs": {\n  "password": "password",\n  "jdbcUrl": "jdbc:postgresql://localhost:5432/pulsar_postgres_jdbc_sink",\n  "userName": "postgres",\n  "tableName": "pulsar_postgres_jdbc_sink"\n},\n"parallelism": 1,\n"processingGuarantees": "ATLEAST_ONCE",\n"retainOrdering": false,\n"autoAck": true\n}\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Get the status of a JDBC sink"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bin/pulsar-admin sinks status \\\n  --tenant public \\\n  --namespace default \\\n  --name pulsar-postgres-jdbc-sink\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["For more information about ",(0,r.jsx)(n.code,{children:"pulsar-admin sinks status options"}),", see ",(0,r.jsx)(n.a,{href:"pathname:///reference/#/3.3.x/pulsar-admin/",children:"Pulsar admin docs"}),"."]})}),"\n",(0,r.jsx)(n.p,{children:"The result shows the current status of the sink connector, including the number of instances, running status, worker ID and so on."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n"numInstances" : 1,\n"numRunning" : 1,\n"instances" : [ {\n  "instanceId" : 0,\n  "status" : {\n    "running" : true,\n    "error" : "",\n    "numRestarts" : 0,\n    "numReadFromPulsar" : 0,\n    "numSystemExceptions" : 0,\n    "latestSystemExceptions" : [ ],\n    "numSinkExceptions" : 0,\n    "latestSinkExceptions" : [ ],\n    "numWrittenToSink" : 0,\n    "lastReceivedTime" : 0,\n    "workerId" : "c-standalone-fw-192.168.2.52-8080"\n  }\n} ]\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-5-stop-a-jdbc-sink",children:"Step 5: Stop a JDBC sink"}),"\n",(0,r.jsxs)(n.p,{children:["You can use the ",(0,r.jsx)(n.a,{href:"pathname:///reference/#/3.3.x/pulsar-admin/",children:"Connector Admin CLI"})," to stop a connector and perform other operations on it."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bin/pulsar-admin sinks stop \\\n    --tenant public \\\n    --namespace default \\\n    --name pulsar-postgres-jdbc-sink\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["For more information about ",(0,r.jsx)(n.code,{children:"pulsar-admin sinks stop options"}),", see ",(0,r.jsx)(n.a,{href:"pathname:///reference/#/3.3.x/pulsar-admin/",children:"Pulsar admin docs"}),"."]})}),"\n",(0,r.jsx)(n.p,{children:"The sink instance has been stopped successfully if the following message disappears."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"Stopped successfully\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-6-restart-a-jdbc-sink",children:"Step 6: Restart a JDBC sink"}),"\n",(0,r.jsxs)(n.p,{children:["You can use the ",(0,r.jsx)(n.a,{href:"pathname:///reference/#/3.3.x/pulsar-admin/",children:"Connector Admin CLI"})," to restart a connector and perform other operations on it."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bin/pulsar-admin sinks restart \\\n    --tenant public \\\n    --namespace default \\\n    --name pulsar-postgres-jdbc-sink\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["For more information about ",(0,r.jsx)(n.code,{children:"pulsar-admin sinks restart options"}),", see ",(0,r.jsx)(n.a,{href:"pathname:///reference/#/3.3.x/pulsar-admin/",children:"Pulsar admin docs"}),"."]})}),"\n",(0,r.jsx)(n.p,{children:"The sink instance has been started successfully if the following message disappears."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"Started successfully\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Optionally, you can run a standalone sink connector using ",(0,r.jsx)(n.code,{children:"pulsar-admin sinks localrun options"}),".\nNote that ",(0,r.jsx)(n.code,{children:"pulsar-admin sinks localrun options"})," ",(0,r.jsx)(n.strong,{children:"runs a sink connector locally"}),", while ",(0,r.jsx)(n.code,{children:"pulsar-admin sinks start options"})," ",(0,r.jsx)(n.strong,{children:"starts a sink connector in a cluster"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["For more information about ",(0,r.jsx)(n.code,{children:"pulsar-admin sinks localrun options"}),", see ",(0,r.jsx)(n.a,{href:"pathname:///reference/#/3.3.x/pulsar-admin/",children:"Pulsar admin docs"}),"."]}),"\n"]})}),"\n",(0,r.jsx)(n.h3,{id:"step-7-update-a-jdbc-sink",children:"Step 7: Update a JDBC sink"}),"\n",(0,r.jsxs)(n.p,{children:["You can use the ",(0,r.jsx)(n.a,{href:"pathname:///reference/#/3.3.x/pulsar-admin/",children:"Connector Admin CLI"})," to update a connector and perform other operations on it."]}),"\n",(0,r.jsxs)(n.p,{children:["This example updates the parallelism of the ",(0,r.jsx)(n.em,{children:"pulsar-postgres-jdbc-sink"})," sink connector to 2."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bin/pulsar-admin sinks update \\\n    --name pulsar-postgres-jdbc-sink \\\n    --parallelism 2\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["For more information about ",(0,r.jsx)(n.code,{children:"pulsar-admin sinks update options"}),", see ",(0,r.jsx)(n.a,{href:"pathname:///reference/#/3.3.x/pulsar-admin/",children:"Pulsar admin docs"}),"."]})}),"\n",(0,r.jsx)(n.p,{children:"The sink connector has been updated successfully if the following message disappears."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"Updated successfully\n"})}),"\n",(0,r.jsx)(n.p,{children:"This example double-checks the information."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bin/pulsar-admin sinks get \\\n    --tenant public \\\n    --namespace default \\\n    --name pulsar-postgres-jdbc-sink\n"})}),"\n",(0,r.jsx)(n.p,{children:"The result shows that the parallelism is 2."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "tenant": "public",\n  "namespace": "default",\n  "name": "pulsar-postgres-jdbc-sink",\n  "className": "org.apache.pulsar.io.jdbc.PostgresJdbcAutoSchemaSink",\n  "inputSpecs": {\n    "pulsar-postgres-jdbc-sink-topic": {\n      "isRegexPattern": false\n    }\n  },\n  "configs": {\n    "password": "password",\n    "jdbcUrl": "jdbc:postgresql://localhost:5432/pulsar_postgres_jdbc_sink",\n    "userName": "postgres",\n    "tableName": "pulsar_postgres_jdbc_sink"\n  },\n  "parallelism": 2,\n  "processingGuarantees": "ATLEAST_ONCE",\n  "retainOrdering": false,\n  "autoAck": true\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"step-8-delete-a-jdbc-sink",children:"Step 8: Delete a JDBC sink"}),"\n",(0,r.jsxs)(n.p,{children:["You can use the ",(0,r.jsx)(n.a,{href:"pathname:///reference/#/3.3.x/pulsar-admin/",children:"Connector Admin CLI"}),"\nto delete a connector and perform other operations on it."]}),"\n",(0,r.jsxs)(n.p,{children:["This example deletes the ",(0,r.jsx)(n.em,{children:"pulsar-postgres-jdbc-sink"})," sink connector."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bin/pulsar-admin sinks delete \\\n    --tenant public \\\n    --namespace default \\\n    --name pulsar-postgres-jdbc-sink\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["For more information about ",(0,r.jsx)(n.code,{children:"pulsar-admin sinks delete options"}),", see ",(0,r.jsx)(n.a,{href:"pathname:///reference/#/3.3.x/pulsar-admin/",children:"Pulsar admin docs"}),"."]})}),"\n",(0,r.jsx)(n.p,{children:"The sink connector has been deleted successfully if the following message appears."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"Deleted successfully\n"})}),"\n",(0,r.jsx)(n.p,{children:"This example double-checks the status of the sink connector."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bin/pulsar-admin sinks get \\\n    --tenant public \\\n    --namespace default \\\n    --name pulsar-postgres-jdbc-sink\n"})}),"\n",(0,r.jsx)(n.p,{children:"The result shows that the sink connector does not exist."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"HTTP 404 Not Found\nReason: Sink pulsar-postgres-jdbc-sink doesn't exist\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>c});var a=s(96540);const r={},i=a.createContext(r);function t(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);