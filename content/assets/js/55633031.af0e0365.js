"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[74201],{21788:(e,i,r)=>{r.r(i),r.d(i,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"versioned/pulsar-2.10.3","title":"Apache Pulsar 2.10.3","description":"2023-1-4","source":"@site/release-notes/versioned/pulsar-2.10.3.md","sourceDirName":"versioned","slug":"/versioned/pulsar-2.10.3","permalink":"/release-notes/versioned/pulsar-2.10.3","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/pulsar-site/edit/main/release-notes/versioned/pulsar-2.10.3.md","tags":[],"version":"current","frontMatter":{"id":"pulsar-2.10.3","title":"Apache Pulsar 2.10.3","sidebar_label":"Apache Pulsar 2.10.3"}}');var s=r(74848),t=r(28453);const l={id:"pulsar-2.10.3",title:"Apache Pulsar 2.10.3",sidebar_label:"Apache Pulsar 2.10.3"},o=void 0,c={},a=[{value:"2023-1-4",id:"2023-1-4",level:4},{value:"Broker",id:"broker",level:3},{value:"Transaction",id:"transaction",level:3},{value:"Pulsar IO and Pulsar Functions",id:"pulsar-io-and-pulsar-functions",level:3},{value:"Tiered Storage",id:"tiered-storage",level:3},{value:"Pulsar SQL",id:"pulsar-sql",level:3},{value:"CLI",id:"cli",level:3},{value:"Admin",id:"admin",level:2},{value:"Security",id:"security",level:3},{value:"Dependency &amp; Library updates",id:"dependency--library-updates",level:3},{value:"CI &amp; Test",id:"ci--test",level:3},{value:"Others",id:"others",level:3}];function d(e){const i={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.h4,{id:"2023-1-4",children:"2023-1-4"}),"\n",(0,s.jsx)(i.h3,{id:"broker",children:"Broker"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["[improve][broker] Omit making a copy of CommandAck when there are no broker interceptors ",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/18997",children:"#18997"})]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] Copy proto command fields into final variables in ServerCnx ",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/18987",children:"#18987"})]}),"\n",(0,s.jsx)(i.li,{children:"[improve][broker]Add a cache eviction policy\uff1aEvicting cache data by the slowest markDeletedPosition #14985"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Fix broker cache eviction of entries read by active cursors #17273"}),"\n",(0,s.jsx)(i.li,{children:"[enh][broker] Add metrics for entry cache insertion, eviction #17248"}),"\n",(0,s.jsx)(i.li,{children:"[cleanup][broker] Extracted interface for EntryCacheManager #15933"}),"\n",(0,s.jsx)(i.li,{children:"[improve][broker] Support dynamic update cache config #13679"}),"\n",(0,s.jsx)(i.li,{children:"[improve][broker] refactor ManagedLedger cacheEvictionTask implement #14488"}),"\n",(0,s.jsx)(i.li,{children:"[improve][broker] Add logs for why namespace bundle been split (#19003)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Fix deadlock in PendingAckHandleImpl (#18989)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Branch-2.10 Avoid endless blocking call. (#18914)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker][functions-worker] Ensure prometheus metrics are grouped by type (#8407, #13865) #15558"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker]Update interceptor handler exception (#18940)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Fix incorrect bundle split count metric (#17970)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Avoid OOM not trigger PulsarByteBufAllocator outOfMemoryListener when use ByteBufAllocator.DEFAULT.heapBuffer in PrometheusMetricsGeneratorUtils (#18747)"}),"\n",(0,s.jsx)(i.li,{children:"[improve][broker] Make Consumer#equals more effective (#18662)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] In the trimDeletedEntries method, release the removed entry (#18305)"}),"\n",(0,s.jsx)(i.li,{children:"[improve][broker] Remove locallyAcquiredLock when removeOwnership (#18197)"}),"\n",(0,s.jsx)(i.li,{children:"[improve][broker] Avoid unnecessary creation of BitSetRecyclable objects #17998"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] add return for PersistentMessageExpiryMonitor#findEntryFailed #17816"}),"\n",(0,s.jsx)(i.li,{children:"[fix][ml] Persist correct markDeletePosition to prevent message loss (#18237)"}),"\n",(0,s.jsx)(i.li,{children:"[improve][broker] Support setting forceDeleteTenantAllowed dynamically (#18192)"}),"\n",(0,s.jsx)(i.li,{children:"Make BookieId work with PulsarRegistrationDriver (second take) #17922"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Extract additional servlets to the default directory by\u2026 (#17477)"}),"\n",(0,s.jsx)(i.li,{children:"[improve][broker]Improve PersistentMessageExpiryMonitor expire speed when ledger not existed (#17842)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker]Fix mutex never released when trimming (#17911)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Fix if dynamicConfig item in ZK do not exist in broker cause NPE. #17705"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Fix system service namespace create internal event topic. (#17867)"}),"\n",(0,s.jsx)(i.li,{children:"[bugfix] Prevent Automatic Topic Creation during namespace deletion #17609"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker]Cache invalidation due to concurrent access (#18076)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker]add test case for deleting namespace fail when has partitioned system topic (#17338)"}),"\n",(0,s.jsx)(i.li,{children:"Skip creating a subscription replication snapshot if no messages have been published after the topic gets activated on a broker #16618"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Fix uncompleted future when get the topic policies of  a deleted topic (#18824)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Fix delete system topic clean topic policy (#18823)"}),"\n",(0,s.jsx)(i.li,{children:"[improve][broker][PIP-149]Make getList async #16221"}),"\n",(0,s.jsx)(i.li,{children:"[fix][flaky-test]ManagedCursorMetricsTest.testManagedCursorMetrics #16878"}),"\n",(0,s.jsx)(i.li,{children:"[improve][broker] System topic writer/reader connection not counted (#18603)"}),"\n",(0,s.jsx)(i.li,{children:"[improve][broker] System topic writer/reader connection not counted. (#18369)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker]unify time unit at dropping the backlog on a topic #17957[fix][broker]unify time unit at dropping the backlog on a topic #17957"}),"\n",(0,s.jsx)(i.li,{children:"[improve][broker] Support setting ForceDeleteNamespaceAllowed dynamically #18181"}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] Fix ",(0,s.jsx)(i.code,{children:"getPositionAfterN"})," infinite loop. (#17971)"]}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Update the log print content of createSubscriptions (#18024)"}),"\n",(0,s.jsx)(i.li,{children:"[Broker] Make PersistentTopicsBase#internalGetPartitionedMetadata async #14153"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Fix duplicated schemas creation #18701"}),"\n",(0,s.jsxs)(i.li,{children:["[improve][broker] Using ",(0,s.jsx)(i.code,{children:"handle"})," instead of ",(0,s.jsx)(i.code,{children:"handleAsync"})," to avoid using common pool thread (#17403)"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] Fix dispatch duplicated messages with ",(0,s.jsx)(i.code,{children:"Exclusive"})," mode. (#17237)"]}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Fix the order of resource close in the InMemoryDelayedDeliveryTracker (#18000)"}),"\n",(0,s.jsxs)(i.li,{children:["[improve][broker] reduce code duplication to avoid endless wait ",(0,s.jsx)(i.code,{children:"CompletableFuture"}),"  (#14853)"]}),"\n",(0,s.jsx)(i.li,{children:"[improve][ML] Print log when delete empty ledger. (#17859)"}),"\n",(0,s.jsx)(i.li,{children:"[improve] clean the empty topicAuthenticationMap in zk when revoke permission (#16815)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] fix can not revoke permission after update topic partition (#17393)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Fix Npe thrown by splitBundle (#17370)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Fix executeWithRetry result is null (#17694)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Fix SystemTopicBasedTopicPoliciesService NPE issue (#17602)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Fix broker cache eviction of entries read by active cursors #17273"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Fix namespace can not be deleted by force (#18686)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Create replicated subscriptions for new partitions when needed (#18659)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] DnsResolverUtil.TTL should be greater than zero (#18565)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Correctly set byte and message out totals per subscription (#18451)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] fix delete_when_subscriptions_caught_up doesn't work while have active consumers (#18320)"}),"\n",(0,s.jsx)(i.li,{children:"[improve][broker]consumer backlog eviction policy should not reset read position for consumer (#18037)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Fix NPE when ResourceGroupService execute scheduled task. #17840"}),"\n",(0,s.jsx)(i.li,{children:"[fix][storage] Autorecovery default reppDnsResolverClass to ZkBookieRackAffinityMapping (#15640)"}),"\n",(0,s.jsx)(i.li,{children:"[broker] Fixed delayed delivery after read operation error (#18098)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Fix issue where leader broker information isn't available after 10 minutes (#17401)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][broker] Make full async call in PulsarAuthorizationProvider (#18050)"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"transaction",children:"Transaction"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"[fix][txn] Transaction buffer recover blocked by readNext #18833"}),"\n",(0,s.jsx)(i.li,{children:"[fix][txn] transaction pending ack store future not completely problem (#18943)"}),"\n",(0,s.jsxs)(i.li,{children:["[fix][txn] Fix PendingAckHandleImpl when ",(0,s.jsx)(i.code,{children:"pendingAckStoreProvider.checkInitializedBefore"})," failed (#18859)"]}),"\n",(0,s.jsx)(i.li,{children:"[improve][txn] Add getState in transaction for client API (#17423)"}),"\n",(0,s.jsx)(i.li,{children:"[improve][txn] Implementation of Delayed Transaction Messages (#17548)"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"pulsar-io-and-pulsar-functions",children:"Pulsar IO and Pulsar Functions"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"[fix][io] Only bundle kafka schema registry client (#18931)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][fn] Typo in method name (#18844)"}),"\n",(0,s.jsxs)(i.li,{children:["[fix][function] Fix invalid metric type ",(0,s.jsx)(i.code,{children:"gauge "})," (#18129)"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][fn] fix function failed to start if no ",(0,s.jsx)(i.code,{children:"typeClassName"})," provided in ",(0,s.jsx)(i.code,{children:"FunctionDetails"})," (#18111)"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"tiered-storage",children:"Tiered Storage"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"[fix][offload] Fix numerical overflow bug while reading data from tiered storage (#18595)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][offload] Fix memory leak while Offloading ledgers (#18500)"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"pulsar-sql",children:"Pulsar SQL"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"[fix][sql] Fix message without schema issue. (#18745)"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"cli",children:"CLI"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"[fix][cli] Fix CLI client produce don't able to use multiple -m send multiple messages (#18238)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][cli] Check numMessages after incrementing counter #17826"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"admin",children:"Admin"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"[improve][admin] Fix NPE in admin-CLI topic stats command (#18326)"}),"\n",(0,s.jsx)(i.li,{children:"[improve][admin] add topic name and sub name for NotFound error message (#15606)"}),"\n",(0,s.jsx)(i.li,{children:"PIP-105: new API to get subscription properties #16095"}),"\n",(0,s.jsx)(i.li,{children:"[fix][admin] returns 4xx error when pulsar-worker-service is disabled and trying to access it (#17901)"}),"\n",(0,s.jsx)(i.li,{children:"Pulsar Admin: grab contextual stacktrace for sync methods (#14620)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][admin] Fix NPE when get OffloadThreshold on namespace (#18061)"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"security",children:"Security"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"[fix][sec] Upgrade scala-library to get rid of CVE-2022-36944 (#18021)"}),"\n",(0,s.jsx)(i.li,{children:"[Improve][Auth]Update authentication failed metrics report (#17787)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][sec] Upgrade jackson-databind to 2.13.4.2 to get rid of CVE-2022-42003 (#18394)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][sec] Upgrade protobuf to 3.19.6 to get rid of CVE-2022-3171 (#18086)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][sec] File tiered storage: upgrade jettison to get rid of CVE-2022-40149 (#18022)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][sec] Upgrade JacksonXML to 2.13.4 (#18020)"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"dependency--library-updates",children:"Dependency & Library updates"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Bump jackson version from 2.13.2 to 2.13.3 #16508"}),"\n",(0,s.jsx)(i.li,{children:"Remove invalid Netty system property which never was valid for Netty 4.1.x (#13563)"}),"\n",(0,s.jsx)(i.li,{children:"[improve][misc] Upgrade Netty to 4.1.86.Final and Netty Tcnative to 2.0.54.Final (#18599)"}),"\n",(0,s.jsx)(i.li,{children:"[improve][build] Remove versions that are handled by netty-bom (#18629)"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"ci--test",children:"CI & Test"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"[improve][test] force initialize field to avoid polluted by mocks (#17022)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][flaky-test]ManagedCursorMetricsTest.testManagedCursorMetrics (#16878)"}),"\n",(0,s.jsx)(i.li,{children:"[improve][test] remove WhiteBox on MockZooKeeper #17579"}),"\n",(0,s.jsx)(i.li,{children:"[improve][test] try remove whitebox on MockZooKeeper (#17579)"}),"\n",(0,s.jsx)(i.li,{children:"[improve][test] Add test case for system topic schema not compatible bug. (#17992)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][flaky-test]BatchMessageWithBatchIndexLevelTest.testBatchMessageAck (#17436)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][test]The pulsarMessageOverhead in 2.10 is different (#18704)"}),"\n",(0,s.jsxs)(i.li,{children:["[improve][test] Add subscribing regex topic test for ",(0,s.jsx)(i.code,{children:"delete_when_subscriptions_caught_up"}),". (#18368)"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"others",children:"Others"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"[fix][metrics]wrong metrics text generated when label_cluster specified #17704"}),"\n",(0,s.jsx)(i.li,{children:"[fix][meta] fix getChildren in MemoryMetadataStore and EtcdMetadataStore (#18172)"}),"\n",(0,s.jsx)(i.li,{children:"[improve][schema] Change update schema auth from tenant to produce (#18074)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][schema]ledger handle leak when update schema (#17283)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][metrics] fixed ProxyStats to use common.stats.JvmMetrics (#15692)"}),"\n",(0,s.jsx)(i.li,{children:"[refactor][java] Improve docs and code quality about KeyValueSchema usages (#17256)"}),"\n",(0,s.jsx)(i.li,{children:"Allow to configure and disable the size of lookahead for detecting fixed delays in messages #17907"}),"\n",(0,s.jsx)(i.li,{children:"[refactor][java] Unify the acknowledge process for batch and non-batch message IDs #17833"}),"\n",(0,s.jsx)(i.li,{children:"[fix][common] Fix parsing partitionedKey with Base64 encode issue. (#17687)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][schema] Fix cherry-pick issue from #18283 (#18555)"}),"\n",(0,s.jsx)(i.li,{children:"[fix][monitor] fix metrics string encoding (#18138)"}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,i,r)=>{r.d(i,{R:()=>l,x:()=>o});var n=r(96540);const s={},t=n.createContext(s);function l(e){const i=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),n.createElement(t.Provider,{value:i},e.children)}}}]);