"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[32467],{75854:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>a,toc:()=>l});var a=t(5576),s=t(74848),i=t(28453);const o={author:"Matteo Merli",authorURL:"https://twitter.com/merlimat",title:"Apache Pulsar 2.3.0"},r=void 0,c={authorsImageUrls:[void 0]},l=[{value:"Pulsar functions in Kubernetes",id:"pulsar-functions-in-kubernetes",level:3},{value:"New Pulsar IO connectors:",id:"new-pulsar-io-connectors",level:3},{value:"Token Authentication",id:"token-authentication",level:3},{value:"Schema support in Python client library",id:"schema-support-in-python-client-library",level:3},{value:"Function state API in Python",id:"function-state-api-in-python",level:3},{value:"Conclusion",id:"conclusion",level:2}];function h(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"The Apache Pulsar PMC is happy to announce the release of Pulsar 2.3.0. This\nis the result of huge effort from the community, with over 480 commits and\na long list of new features, general improvements and bug fixes."}),"\n",(0,s.jsx)(n.p,{children:"These improvements have been across the board in all of Pulsar components,\nfrom new messaging features, to improved usability for Pulsar Functions\nand Pulsar IO."}),"\n",(0,s.jsxs)(n.p,{children:["Check out the official ",(0,s.jsx)("b",{children:(0,s.jsx)(n.a,{href:"/release-notes/#2.3.0",children:"release notes"})})," for a\ndetailed list of the changes, with links to the relevant pull-requests,\ndiscussions and documentation."]}),"\n",(0,s.jsx)(n.p,{children:"Regarding new features introduced, I just want to highlight here a tiny\nsubset of them:"}),"\n",(0,s.jsx)(n.h3,{id:"pulsar-functions-in-kubernetes",children:"Pulsar functions in Kubernetes"}),"\n",(0,s.jsx)(n.p,{children:"It's now possible to use Kubernetes as the scheduler for Pulsar Functions."}),"\n",(0,s.jsx)(n.p,{children:"When a Pulsar cluster is configured to use Kubernetes, submitting a\nfunction, using CLI tools or REST API, will cause the function instances\nto be submitted as Kubernetes pods rather than running as processes\nor threads within the Pulsar functions worker."}),"\n",(0,s.jsx)(n.p,{children:"With this runtime manager, it's possible to set quota on CPU/Mem and\nhave Kubernetes assign the required resources and enforce isolation\nbetween different instances and functions."}),"\n",(0,s.jsx)(n.h3,{id:"new-pulsar-io-connectors",children:"New Pulsar IO connectors:"}),"\n",(0,s.jsx)(n.p,{children:"A new batch of connectors was added, including MongoDB, Elastic Search,\nHBase and local files source and sink."}),"\n",(0,s.jsxs)(n.p,{children:["We introduce support for doing ",(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Change_data_capture",children:"Change-Data-Capture"}),"\nwith ",(0,s.jsx)(n.a,{href:"https://debezium.io/",children:"Debezium"}),". This allows to record all\nthe update from a database into a Pulsar topic and use it for replication,\nstreaming jobs, cache updating, etc.."]}),"\n",(0,s.jsx)(n.p,{children:"With Pulsar IO, Debezium will run as a regular Pulsar IO source,\ncompletely managed by Pulsar. Users can easily submit a Debezium\nbuiltin connector to a Pulsar cluster and start feeding data\nfrom a long list of supported databases like MySQL, MongoDB,\nPostgreSQL, Oracle and SQL Server."}),"\n",(0,s.jsxs)(n.p,{children:["Check out the ",(0,s.jsx)(n.a,{href:"/docs/io-cdc",children:"Debezium connector"})," documentation for how\nto get started in capturing database changes."]}),"\n",(0,s.jsx)(n.h3,{id:"token-authentication",children:"Token Authentication"}),"\n",(0,s.jsxs)(n.p,{children:["Token Authentication provides a very simple and secure method of authentication for Pulsar.\nThis is based on ",(0,s.jsx)(n.a,{href:"https://jwt.io/",children:"JSON Web Tokens"}),"."]}),"\n",(0,s.jsx)(n.p,{children:'With tokens authentication, a client only needs to provide a single credential, or "token", in the\nform of an opaque string provided by either the system administrator or some automated service.'}),"\n",(0,s.jsx)(n.p,{children:"The Java code for a client using token authentication will look like:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'\nPulsarClient client = PulsarClient.builder()\n    .serviceUrl("pulsar://broker.example.com:6650/")\n    .authentication(\n        AuthenticationFactory.token("eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJKb2UifQ.ipevRNuRP6HflG8cFKnmUPtypruRC4fb1DWtoLL62SY")\n    .build();\n\n'})}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"/docs/security-token-client",children:"Client Authentication using tokens"})," for a complete walk through\nand instructions on how to set it up and manage it."]}),"\n",(0,s.jsx)(n.h3,{id:"schema-support-in-python-client-library",children:"Schema support in Python client library"}),"\n",(0,s.jsx)(n.p,{children:"This feature adds a Python idiomatic way to declare the schema\nof a producer or consumer and integrates directly with the Pulsar\nschema registry."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"\nimport pulsar\nfrom pulsar.schema import *\n\nclass Example(Record):\n    a = String()\n    b = Integer()\n    c = Boolean()\n\nproducer = client.create_producer(\n                    topic='my-topic',\n                    schema=AvroSchema(Example) )\n\nproducer.send(Example(a='Hello', b=1))\n\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The above example will make the producer ",(0,s.jsx)(n.code,{children:"Example"})," schema to be\nvalidated by broker when we try to publish on ",(0,s.jsx)(n.code,{children:"my-topic"}),". If the\ntopic has a schema that is incompatible, the producer creation will\nfail."]}),"\n",(0,s.jsxs)(n.p,{children:["Currently, the Python schema support Avro and JSON, in addition to\nregular types like ",(0,s.jsx)(n.code,{children:"str"})," and ",(0,s.jsx)(n.code,{children:"bytes"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["The complete documentation is available at ",(0,s.jsx)(n.a,{href:"/docs/client-libraries-python/#schema",children:"Python schema"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"function-state-api-in-python",children:"Function state API in Python"}),"\n",(0,s.jsx)(n.p,{children:"From 2.3.0, Python function can access the state in as similar\nway as Java functions, through the context object."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'\nimport pulsar\n\n# The classic ExclamationFunction that appends an\n# exclamation at the end of the input\nclass WordCountFunction(pulsar.Function):\n    def process(self, input, context):\n        for word in input.split():\n            context.incr_counter(word, 1)\n        return input + "!"\n\n'})}),"\n",(0,s.jsx)(n.p,{children:"Available methods for state management in the context object are:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'\ndef incr_counter(self, key, amount):\n  ""incr the counter of a given key in the managed state""\n\ndef get_counter(self, key):\n  """get the counter of a given key in the managed state"""\n\ndef put_state(self, key, value):\n  """update the value of a given key in the managed state"""\n\ndef get_state(self, key):\n  """get the value of a given key in the managed state"""\n\n'})}),"\n",(0,s.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,s.jsxs)(n.p,{children:["Please ",(0,s.jsx)(n.a,{href:"/download",children:"download"})," Pulsar 2.3.0 and report feedback, issues or any comment into our mailing lists,\nslack channel or Github page. (",(0,s.jsx)(n.a,{href:"/contact",children:"Contact page"}),")"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var a=t(96540);const s={},i=a.createContext(s);function o(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(i.Provider,{value:n},e.children)}},5576:e=>{e.exports=JSON.parse('{"permalink":"/blog/2019/02/20/Apache-Pulsar-2-3-0","editUrl":"https://github.com/apache/pulsar-site/edit/main/blog/2019-02-20-Apache-Pulsar-2-3-0.md","source":"@site/blog/2019-02-20-Apache-Pulsar-2-3-0.md","title":"Apache Pulsar 2.3.0","description":"The Apache Pulsar PMC is happy to announce the release of Pulsar 2.3.0. This","date":"2019-02-20T00:00:00.000Z","tags":[],"readingTime":3.36,"hasTruncateMarker":true,"authors":[{"name":"Matteo Merli","url":"https://twitter.com/merlimat","key":null,"page":null}],"frontMatter":{"author":"Matteo Merli","authorURL":"https://twitter.com/merlimat","title":"Apache Pulsar 2.3.0"},"unlisted":false,"prevItem":{"title":"Apache Pulsar 2.4.0","permalink":"/blog/2019/07/05/Apache-Pulsar-2-4-0"},"nextItem":{"title":"Apache Pulsar 2.1.0-incubating","permalink":"/blog/2018/08/06/Apache-Pulsar-2-1-0"}}')}}]);