"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[25224],{51005:(e,i,r)=>{r.r(i),r.d(i,{assets:()=>h,contentTitle:()=>n,default:()=>o,frontMatter:()=>a,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"versioned/pulsar-3.3.2","title":"Apache Pulsar 3.3.2","description":"2024-10-04","source":"@site/release-notes/versioned/pulsar-3.3.2.md","sourceDirName":"versioned","slug":"/versioned/pulsar-3.3.2","permalink":"/release-notes/versioned/pulsar-3.3.2","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/pulsar-site/edit/main/release-notes/versioned/pulsar-3.3.2.md","tags":[],"version":"current","frontMatter":{"id":"pulsar-3.3.2","title":"Apache Pulsar 3.3.2","sidebar_label":"Apache Pulsar 3.3.2"}}');var s=r(74848),t=r(28453);const a={id:"pulsar-3.3.2",title:"Apache Pulsar 3.3.2",sidebar_label:"Apache Pulsar 3.3.2"},n=void 0,h={},c=[{value:"2024-10-04",id:"2024-10-04",level:4},{value:"Library updates",id:"library-updates",level:3},{value:"Broker",id:"broker",level:3},{value:"Client",id:"client",level:3},{value:"Pulsar IO and Pulsar Functions",id:"pulsar-io-and-pulsar-functions",level:3},{value:"Others",id:"others",level:3},{value:"Tests &amp; CI",id:"tests--ci",level:3}];function p(e){const i={a:"a",code:"code",h3:"h3",h4:"h4",li:"li",p:"p",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.h4,{id:"2024-10-04",children:"2024-10-04"}),"\n",(0,s.jsx)(i.h3,{id:"library-updates",children:"Library updates"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["[fix][sec] Upgrade Avro to 1.11.4 to address CVE-2024-47561 (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23394",children:"#23394"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][sec] Upgrade vertx to 4.5.10 to address CVE-2024-8391 (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23338",children:"#23338"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][sec][branch-3.3] Upgrade protobuf-java to 3.25.5 (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23356",children:"#23356"}),") (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23358",children:"#23358"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][misc] Upgrade Netty to 4.1.113 and netty-tcnative to 2.0.66 (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23255",children:"#23255"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix] Bump commons-io",":commons-io"," from 2.8.0 to 2.14.0 (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23393",children:"#23393"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix] Bump io.grpc from 1.56.0 to 1.56.1 (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23276",children:"#23276"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][metadata] Upgrade Oxia to 0.3.2 (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23140",children:"#23140"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[feat][meta] Bump oxia java version from 0.3.2 to 0.4.5 (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23277",children:"#23277"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve] Upgrade Pulsar Python client in docker image to 3.5.0 (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23377",children:"#23377"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve] Install openssl in the docker image to fix compatibility with Apache Pulsar Helm chart (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23362",children:"#23362"}),")"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"broker",children:"Broker"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["[fix][broker] Cancel possible pending replay read in cancelPendingRead (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23384",children:"#23384"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] Execute the pending callbacks in order before ready for incoming requests (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23266",children:"#23266"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] Fail fast if the extensible load manager failed to start (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23297",children:"#23297"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] Fix 'Disabled replicated subscriptions controller' logic and logging (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23142",children:"#23142"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] Fix authenticate order in AuthenticationProviderList (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23111",children:"#23111"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] Fix brokers still retry start replication after closed the topic (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23237",children:"#23237"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] Fix compatibility issues for PIP-344 (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23136",children:"#23136"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] Fix incomplete NAR file extraction which prevents broker from starting (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23274",children:"#23274"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] Fix out-of-order issues with ConsistentHashingStickyKeyConsumerSelector (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23327",children:"#23327"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] Fix shadow topics cannot be consumed when the entry is not cached (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23147",children:"#23147"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] Fix system topic can not be loaded up if it contains data offloaded (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23279",children:"#23279"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] Fix the broker registery cannot recover from the metadata node deletion (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23359",children:"#23359"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] Fix the bug that elected leader thinks it's a follower (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23138",children:"#23138"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] Handle the case when ",(0,s.jsx)(i.code,{children:"getOwnedServiceUnits"})," fails gracefully (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23119",children:"#23119"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] Internal reader of __change_events can not started after metadata store session rebuilt (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23018",children:"#23018"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] Let Pending ack handler can retry to init when encounters a metadata store error (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23153",children:"#23153"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] Skip reading entries from closed cursor. (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/22751",children:"#22751"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] Topic can never be loaded up due to broker maintains a failed topic creation future (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23184",children:"#23184"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] fix exception may hidden and result in stuck when topic loading (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23102",children:"#23102"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] fix pulsar-admin topics stats-internal caused a BK client thread a deadlock (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23258",children:"#23258"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] fix replicated namespaces filter in filterAndUnloadMatchedNamespaceAsync (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23100",children:"#23100"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker] type cast on exceptions in exceptionally can lead to lost calls (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23117",children:"#23117"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][broker]A failed consumer/producer future in ServerCnx can never be removed (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23123",children:"#23123"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][broker] Add msgInReplay subscription stat and metric to improve Key_Shared observability (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23224",children:"#23224"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][broker] Add retry for start service unit state channel (ExtensibleLoadManagerImpl only) (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23230",children:"#23230"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][broker] Avoid subscription fenced error with consumer.seek whenever possible (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23163",children:"#23163"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][broker] Explicitly close LB internal topics when playing a follower (ExtensibleLoadManagerImpl only) (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23144",children:"#23144"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][broker] Improve pulsar_topic_load_failed metric to record correct failed time (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23199",children:"#23199"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][broker] Optimize high CPU usage when consuming from topics with ongoing txn (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23189",children:"#23189"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][broker] Optimize message payload traffic for ShadowReplicator (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23236",children:"#23236"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][broker] Optimize performance for checking max topics when the topic is a system topic (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23185",children:"#23185"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][broker] Optimize the performance of individual acknowledgments (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23072",children:"#23072"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][broker] Register the broker to metadata store without version id compare (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23298",children:"#23298"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][broker] Should notify bundle ownership listener onLoad event when ServiceUnitState start (ExtensibleLoadManagerImpl only) (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23152",children:"#23152"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][broker] Support customized shadow managed ledger implementation (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23179",children:"#23179"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][broker] Support to specify auth-plugin, auth-parameters and tls-enable arguments when init cluster metadata (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23087",children:"#23087"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][broker] Reuse method getAvailableBrokersAsync (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23099",children:"#23099"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][admin] PIP-369 Introduce ",(0,s.jsx)(i.code,{children:"unload"})," flag in ",(0,s.jsx)(i.code,{children:"ns-isolation-policy set"})," call (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23120",children:"#23120"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix] StatsOutputStream: add string write function (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23227",children:"#23227"}),")"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"client",children:"Client"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["[fix] DLQ to handle bytes key properly (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23172",children:"#23172"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][client] Copy orderingKey to retry letter topic and DLQ messages and fix bug in copying (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23182",children:"#23182"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][client] Create the retry producer async (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23157",children:"#23157"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][client] Fix for early hit ",(0,s.jsx)(i.code,{children:"beforeConsume"})," for MultiTopicConsumer (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23141",children:"#23141"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][client] Fix timeout handling in Pulsar Admin client (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23128",children:"#23128"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][client] TransactionCoordinatorClient support retry (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23081",children:"#23081"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][client] the nullValue in msgMetadata should be true by default (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/22372",children:"#22372"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][client] Add maxConnectionsPerHost and connectionMaxIdleSeconds to PulsarAdminBuilder (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/22541",children:"#22541"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][client] Don't print info logs for each schema loaded by client (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23206",children:"#23206"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][client] Add new ServiceUrlProvider implementation: SameAuthParamsAutoClusterFailover (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23129",children:"#23129"}),")"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"pulsar-io-and-pulsar-functions",children:"Pulsar IO and Pulsar Functions"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["[fix][io] Upgrade mssql server docker tag in DebeziumMsSqlContainer (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23318",children:"#23318"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][fn] Add support for overriding additionalJavaRuntimeArguments with PF_additionalJavaRuntimeArguments env (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23130",children:"#23130"}),")"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"others",children:"Others"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["[fix][log] Do not print error log if tenant/namespace does not exist when calling get topic metadata (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23291",children:"#23291"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][log] Do not print warn log when concurrently publishing and switching ledgers (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23209",children:"#23209"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[feat] Add scripts for updating BK RocksDB ini files (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23178",children:"#23178"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][meta] Oxia metadta store: Convert error to MetadataStoreException if operation failed (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23154",children:"#23154"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][misc] Log Conscrypt security provider initialization warnings at debug level (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23364",children:"#23364"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][misc] Improve AES-GCM cipher performance (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23122",children:"#23122"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][misc] Optimize TLS performance by omitting extra buffer copies (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23115",children:"#23115"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][pip] PIP-366: Support to specify different config for Configuration and Local Metadata Store (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23041",children:"#23041"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][proxy] Reuse authentication instance in pulsar-proxy (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23113",children:"#23113"}),")"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"tests--ci",children:"Tests & CI"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["[fix][test] Fix flaky SubscriptionSeekTest.testSeekIsByReceive (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23170",children:"#23170"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][test] Fix flaky UnloadSubscriptionTest.testMultiConsumer (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23243",children:"#23243"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][test] Fix flaky test LeaderElectionTest.revalidateLeaderWithinSameSession (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/22383",children:"#22383"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][test] Fixed many tests of pulsar-proxy are not running (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23118",children:"#23118"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][build] Fix problem where git.commit.id.abbrev is missing in image tagging (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23337",children:"#23337"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[fix][build] Remove unnecessary Oracle maven repository from pom.xml (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23132",children:"#23132"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][build] Use amazoncorretto:21-alpine image instead of apk installation (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/22973",children:"#22973"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["[improve][ci] Switch to Java 21 as default JVM version for CI (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/23373",children:"#23373"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["For the complete list, check the ",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/compare/v3.3.1...v3.3.2",children:"full changelog"}),"."]})]})}function o(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},28453:(e,i,r)=>{r.d(i,{R:()=>a,x:()=>n});var l=r(96540);const s={},t=l.createContext(s);function a(e){const i=l.useContext(t);return l.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function n(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),l.createElement(t.Provider,{value:i},e.children)}}}]);