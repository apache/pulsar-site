"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[88737],{19440:(e,i,r)=>{r.r(i),r.d(i,{assets:()=>c,contentTitle:()=>s,default:()=>x,frontMatter:()=>o,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"versioned/pulsar-2.10.4","title":"Apache Pulsar 2.10.4","description":"2023-4-19","source":"@site/release-notes/versioned/pulsar-2.10.4.md","sourceDirName":"versioned","slug":"/versioned/pulsar-2.10.4","permalink":"/release-notes/versioned/pulsar-2.10.4","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/pulsar-site/edit/main/release-notes/versioned/pulsar-2.10.4.md","tags":[],"version":"current","frontMatter":{"id":"pulsar-2.10.4","title":"Apache Pulsar 2.10.4","sidebar_label":"Apache Pulsar 2.10.4"}}');var l=r(74848),t=r(28453);const o={id:"pulsar-2.10.4",title:"Apache Pulsar 2.10.4",sidebar_label:"Apache Pulsar 2.10.4"},s=void 0,c={},a=[{value:"2023-4-19",id:"2023-4-19",level:4},{value:"Broker",id:"broker",level:3},{value:"Transaction",id:"transaction",level:3},{value:"Pulsar IO and Pulsar Functions",id:"pulsar-io-and-pulsar-functions",level:3},{value:"CLI",id:"cli",level:3},{value:"Admin",id:"admin",level:3},{value:"Security",id:"security",level:3},{value:"CI &amp; Test",id:"ci--test",level:3},{value:"Others",id:"others",level:3}];function d(e){const i={code:"code",h3:"h3",h4:"h4",li:"li",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.h4,{id:"2023-4-19",children:"2023-4-19"}),"\n",(0,l.jsx)(i.h3,{id:"broker",children:"Broker"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"[improve][broker] Add ref count for sticky hash to optimize the performance of Key_Shared subscription (#19167)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] Pass subName for subscription operations in ServerCnx (#19184)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] AbstractBatchedMetadataStore - use AlreadyClosedException instead of IllegalStateException (#19284)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] Fix open cursor with null-initialPosition result with earliest position (#18416)"}),"\n",(0,l.jsx)(i.li,{children:"[fix] [ml] Topics stats shows msgBacklog but there reality no backlog (#19275)"}),"\n",(0,l.jsx)(i.li,{children:"[improve][broker] Added isActive in ManagedCursorImpl (#19341)"}),"\n",(0,l.jsx)(i.li,{children:"[improve][broker] Replaced checkBackloggedCursors with checkBackloggedCursor(single subscription check) upon subscription (#19343)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] fixed the build error for pattern matching variable in lower JVM versions (#19362)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker]optimize the shutdown sequence of broker service when it close (#16756)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] Pass subscriptionName to auth service (#17123) (#19423)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker]fix multi invocation for ledger createComplete (#18975)"}),"\n",(0,l.jsx)(i.li,{children:"[fix] [broker] getLastMessageId returns a wrong batch index of last message if enabled read compacted (#18877)"}),"\n",(0,l.jsxs)(i.li,{children:["[fix][broker] Support deleting partitioned topics with the keyword ",(0,l.jsx)(i.code,{children:"-partition-"})," (#19230)"]}),"\n",(0,l.jsx)(i.li,{children:"[fix] [ml] Fix the incorrect total size if use ML interceptor (#19404)"}),"\n",(0,l.jsx)(i.li,{children:"[improve][broker] Added isActive in ManagedCursorImpl (#19341)"}),"\n",(0,l.jsx)(i.li,{children:"[improve][broker] Added isActive in ManagedCursorImpl (#19341)"}),"\n",(0,l.jsx)(i.li,{children:"[improve][broker] Copy subscription properties during updating the topic partition number. (#19223)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] Expect msgs after server initiated CloseProducer (#19446)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] Fix PulsarRegistrationClient and ZkRegistrationClient not aware rack info problem. (#18672)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][ml] Fix potential NPE cause future never complete. (#19415)"}),"\n",(0,l.jsx)(i.li,{children:"[fix] [ml] The atomicity of multiple fields of ml is broken (#19346)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] Fix race condition while updating partition number (#19199)"}),"\n",(0,l.jsx)(i.li,{children:"[Improve][broker] Support clear old bookie data for BKCluster (#16744)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][ml] Reset individualDeletedMessagesSerializedSize after acked all messages. (#19428)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] Make ServerCnx#originalAuthData volatile (#19507)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] ServerCnx broken after recent cherry-picks (#19521)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] Fix loadbalance score caculation problem (#19420)"}),"\n",(0,l.jsx)(i.li,{children:"[fix] [ml] messagesConsumedCounter of NonDurableCursor was initialized incorrectly (#19355)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker][branch-2.10] Replace sync method call in async call chain to prevent ZK event thread deadlock (#19539)"}),"\n",(0,l.jsx)(i.li,{children:"[improve][broker] Require authRole is proxyRole to set originalPrincipal (#19455)"}),"\n",(0,l.jsx)(i.li,{children:"[improve][broker] ServerCnx: go to Failed state when auth fails (#19312)"}),"\n",(0,l.jsx)(i.li,{children:"[feat][broker] Cherry-pick tests from (#19409)"}),"\n",(0,l.jsx)(i.li,{children:"[improve][broker] Add test to verify authRole cannot change (#19430)"}),"\n",(0,l.jsx)(i.li,{children:"[feat][broker] OneStageAuth State: move authn out of constructor (#19295)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] Correct MockAlwaysExpiredAuthenticationState test impl"}),"\n",(0,l.jsx)(i.li,{children:"[cleanup][broker] Validate originalPrincipal earlier in ServerCnx (#19270)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] ServerCnx broken after recent cherry-picks (#19521)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] Fix loadbalance score caculation problem (#19420)"}),"\n",(0,l.jsx)(i.li,{children:"[fix] [ml] messagesConsumedCounter of NonDurableCursor was initialized incorrectly (#19355)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker][branch-2.10] Replace sync method call in async call chain to prevent ZK event thread deadlock (#19539)"}),"\n",(0,l.jsx)(i.li,{children:"[improve][broker] Require authRole is proxyRole to set originalPrincipal (#19455)"}),"\n",(0,l.jsx)(i.li,{children:"[improve][broker] ServerCnx: go to Failed state when auth fails (#19312\uff09"}),"\n",(0,l.jsx)(i.li,{children:"[feat][broker] Cherry-pick tests from (#19409)"}),"\n",(0,l.jsx)(i.li,{children:"[improve][broker] Add test to verify authRole cannot change (#19430)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] Call originalAuthState.authenticate in ServerCnx"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] Correct MockAlwaysExpiredAuthenticationState test impl"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] Make authentication refresh threadsafe (#19506)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] Allow proxy to pass same role for authRole and originalRole (#19557)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] Copy command fields and fix potential thread-safety in ServerCnx (#19517)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker][branch-2.10] Fix geo-replication admin (#19608\uff09"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] PulsarRegistrationClient - implement getAllBookies and follow BookieServiceInfo updates (#18133)"}),"\n",(0,l.jsx)(i.li,{children:"[Improve][Broker]Reduce GetReplicatedSubscriptionStatus local REST call (#16946)"}),"\n",(0,l.jsx)(i.li,{children:"[fix] [broker] Incorrect service name selection logic (#19505)"}),"\n",(0,l.jsx)(i.li,{children:"[improve][broker] Use shrink map for trackerCache (#19534)"}),"\n",(0,l.jsx)(i.li,{children:"[improve][broker] Add UncaughtExceptionHandler for every thread pool (#18211)"}),"\n",(0,l.jsx)(i.li,{children:"[cleanup][broker] Simplify extract entryMetadata code in filterEntriesForConsumer (#18729)"}),"\n",(0,l.jsx)(i.li,{children:"[improve][broker] Follow up #19230 to tighten the validation scope (#19234)"}),"\n",(0,l.jsx)(i.li,{children:"[fix] [ml] topic load fail by ledger lost (#19444)"}),"\n",(0,l.jsx)(i.li,{children:"[fix] [broker] Topic close failure leaves subscription in a permanent fence state (#19692)"}),"\n",(0,l.jsx)(i.li,{children:"[cherry-pick][branch-2.10] Fix deadlock causes session notification not to work (#19754) (#19768)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] Fix potential exception cause the policy service init fail. (#19746)"}),"\n",(0,l.jsx)(i.li,{children:"[improve][broker] Authorize originalPrincipal when provided (#19830)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] Only validate superuser access if authz enabled (#19989)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] Ignore and remove the replicator cursor when the remote cluster is absent (#19972)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] Fix index generator is not rollback after entries are failed added (#19980)"}),"\n",(0,l.jsx)(i.li,{children:"[fix] [proxy] Used in proxyConf file when configuration is missing in the command line (#15938)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] Remove timestamp from broker metrics (#17419)"}),"\n",(0,l.jsx)(i.li,{children:"[fix] [broker] Counter of pending send messages in Replicator incorrect if schema future not complete (#19242)"}),"\n"]}),"\n",(0,l.jsx)(i.h3,{id:"transaction",children:"Transaction"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"[fix][txn] Correct the prompt message (#17009)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][txn] Catch and log runtime exceptions in async operations (#19258)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][txn] fix txn coordinator recover handle committing and aborting txn race condition. (#19201)"}),"\n",(0,l.jsx)(i.li,{children:"[improve][txn] Handle changeToReadyState failure correctly in TC client (#19308)"}),"\n",(0,l.jsx)(i.li,{children:"[cherry-pick][branch-2.10] Allow superusers to abort transactions (#1\u20269467) (#19473)"}),"\n",(0,l.jsx)(i.li,{children:"[feature][txn] Fix individual ack batch message with transaction abor\u2026"}),"\n",(0,l.jsx)(i.li,{children:"Close TransactionBuffer when MessageDeduplication#checkStatus failed (#19288)"}),"\n",(0,l.jsx)(i.li,{children:"[improve][txn] Cleanup how superusers abort txns (#19976)"}),"\n",(0,l.jsx)(i.li,{children:"[feature][txn] Fix individual ack batch message with transaction abort redevlier duplicate messages (#14327)"}),"\n"]}),"\n",(0,l.jsx)(i.h3,{id:"pulsar-io-and-pulsar-functions",children:"Pulsar IO and Pulsar Functions"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"[fix][io] Update Elasticsearch sink idle cnx timeout to 30s (#19377)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][fn] Fix k8s merge runtime opts bug (#19481)"}),"\n",(0,l.jsx)(i.li,{children:"[refactor][fn] Use AuthorizationServer more in Function Worker API (#19975)"}),"\n"]}),"\n",(0,l.jsx)(i.h3,{id:"cli",children:"CLI"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"[fix] [cli] Fix Broker crashed by too much memory usage of pulsar tools (#20031)"}),"\n"]}),"\n",(0,l.jsx)(i.h3,{id:"admin",children:"Admin"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"[fix][admin] Fix validatePersistencePolicies that Namespace/Topic persistent policies cannot set to < 0 (#18999)"}),"\n",(0,l.jsx)(i.li,{children:"[improve][admin][branch-2.10] Unset namespace policy to improve deleting namespace (#17033) (#19865)"}),"\n",(0,l.jsx)(i.li,{children:"[fix] [admin] fix incorrect state replication.connected on API partitioned-topic stat (#19942)"}),"\n",(0,l.jsx)(i.li,{children:"[fix] [admin] Make response code to 400 instead of 500 when delete topic fails due to enabled geo-replication (#19879)"}),"\n"]}),"\n",(0,l.jsx)(i.h3,{id:"security",children:"Security"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"[fix][sec] Upgrade jettison to 1.5.3 (#19038)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][sec] Upgrade woodstox to 5.4.0 (#19041)"}),"\n",(0,l.jsx)(i.li,{children:"[improve][sec] Suppress false positive OWASP reports (#19105)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][misc] do not require encryption on system topics (#18898)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][authorization] Fix the return value of canConsumeAsync (#19412)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][security] Fix secure problem CVE-2017-1000487 (#19479)"}),"\n",(0,l.jsx)(i.li,{children:"[improve] Upgrade wildfly-eytron (used by debezium) to fix CVE-2022-3143 (#19333)"}),"\n",(0,l.jsx)(i.li,{children:"[improve][misc] Upgrade Netty to 4.1.87.Final (#19417)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][broker] Ignore and remove the replicator cursor when the remote cluster is absent (#19972)"}),"\n",(0,l.jsx)(i.li,{children:"[Authenticate] fix Invalid signature error when use Kerberos Authentication (#15121)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][sec] Fix transitive critical CVEs in file-system tiered storage (#19957)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][sec] Fix transitive critical CVEs in file-system tiered storage (#19957)"}),"\n"]}),"\n",(0,l.jsx)(i.h3,{id:"ci--test",children:"CI & Test"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"[fix][test] ProxyWithAuthorizationTest remove SAN from test certs (#19594)"}),"\n",(0,l.jsx)(i.li,{children:"[branch-2.10][test]Run and fix tests (#19636)"}),"\n",(0,l.jsx)(i.li,{children:"[test] Fix ServerCnxTest failing after merge of #19830"}),"\n"]}),"\n",(0,l.jsx)(i.h3,{id:"others",children:"Others"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"[fix][build] Resolve OWASP Dependency Check false positives (#19120)"}),"\n",(0,l.jsx)(i.li,{children:"Debezium sources: Support loading config from secrets (#19163)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][proxy] Only go to connecting state once (#19331)"}),"\n",(0,l.jsx)(i.li,{children:"[fix][build] Upgrade dependency-check-maven plugin to fix broken OWASP check (#19170)"}),"\n",(0,l.jsx)(i.li,{children:"[branch-2.10][fix][proxy] Fix using wrong client version in pulsar proxy (#19576)"}),"\n",(0,l.jsx)(i.li,{children:"[branch-2.10][fix][proxy] Fix using wrong client version in pulsar proxy (#19576)"}),"\n",(0,l.jsx)(i.li,{children:"[improve] Upgrade lombok to 1.8.26 (#19426)"}),"\n",(0,l.jsx)(i.li,{children:"[improve] upgrade the bookkeeper version to 4.14.7 (#19179)"}),"\n",(0,l.jsx)(i.li,{children:"[branch-2.10][broker] Support zookeeper read-only config. (#19156) (#19637)"}),"\n",(0,l.jsx)(i.li,{children:"[improve] Simplify enabling Broker, WS Proxy hostname verification (#19674)"}),"\n",(0,l.jsx)(i.li,{children:"[cherry-pick][branch-2.10] KCA: picking fixes from master (#19788)"}),"\n",(0,l.jsx)(i.li,{children:"[Build] Make the test JVM exit if OOME occurs (#14509)"}),"\n"]})]})}function x(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,l.jsx)(i,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},28453:(e,i,r)=>{r.d(i,{R:()=>o,x:()=>s});var n=r(96540);const l={},t=n.createContext(l);function o(e){const i=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function s(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),n.createElement(t.Provider,{value:i},e.children)}}}]);