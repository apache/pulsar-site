"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[59673],{33567:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>h,contentTitle:()=>c,default:()=>o,frontMatter:()=>t,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"admin-api-schemas","title":"Managing Schemas","description":"Schemas, like other entities in Pulsar, can be managed using the admin API.","source":"@site/versioned_docs/version-2.3.2/admin-api-schemas.md","sourceDirName":".","slug":"/admin-api-schemas","permalink":"/docs/2.3.2/admin-api-schemas","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/pulsar-site/edit/main/versioned_docs/version-2.3.2/admin-api-schemas.md","tags":[],"version":"2.3.2","frontMatter":{"id":"admin-api-schemas","title":"Managing Schemas","sidebar_label":"Schemas","original_id":"admin-api-schemas"},"sidebar":"docsSidebar","previous":{"title":"Partitioned topics","permalink":"/docs/2.3.2/admin-api-partitioned-topics"},"next":{"title":"Kafka client wrapper","permalink":"/docs/2.3.2/adaptors-kafka"}}');var i=n(74848),r=n(28453);const t={id:"admin-api-schemas",title:"Managing Schemas",sidebar_label:"Schemas",original_id:"admin-api-schemas"},c=void 0,h={},l=[{value:"Schema resources",id:"schema-resources",level:2},{value:"Upload Schema",id:"upload-schema",level:3},{value:"pulsar-admin",id:"pulsar-admin",level:4},{value:"REST",id:"rest",level:4},{value:"Get Schema",id:"get-schema",level:3},{value:"pulsar-admin",id:"pulsar-admin-1",level:4},{value:"REST API",id:"rest-api",level:4},{value:"Delete Schema",id:"delete-schema",level:3},{value:"pulsar-admin",id:"pulsar-admin-2",level:4},{value:"REST API",id:"rest-api-1",level:4}];function d(e){const s={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.p,{children:["Schemas, like other entities in Pulsar, can be managed using the ",(0,i.jsx)(s.a,{href:"/docs/2.3.2/admin-api-overview",children:"admin API"}),"."]}),"\n",(0,i.jsx)(s.h2,{id:"schema-resources",children:"Schema resources"}),"\n",(0,i.jsx)(s.p,{children:"A Pulsar schema is a fairly simple data structure stored in Pulsar for representing the structure of messages stored in a Pulsar topic. The schema structure consists of:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.em,{children:"Name"}),": A schema's name is the topic that the schema is associated to."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.em,{children:"Type"}),": A schema type represents the type of the schema. The predefined schema types can be found ",(0,i.jsx)(s.a,{href:"/docs/2.3.2/concepts-schema-registry#supported-schema-formats",children:"here"}),". If it\nis a customized schema, it is left as an empty string."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.em,{children:"Payload"}),": It is a binary representation of the schema. How to interpret it is up to the implementation of the schema."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.em,{children:"Properties"}),": It is a user defined properties as a string/string map. Applications can use this bag for carrying any application specific logics. Possible properties\nmight be the Git hash associated with the schema, an environment string like ",(0,i.jsx)(s.code,{children:"dev"})," or ",(0,i.jsx)(s.code,{children:"prod"}),", etc."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"All the schemas are versioned with versions. So you can retrieve the schema definition of a given version if the version is not deleted."}),"\n",(0,i.jsx)(s.h3,{id:"upload-schema",children:"Upload Schema"}),"\n",(0,i.jsx)(s.h4,{id:"pulsar-admin",children:"pulsar-admin"}),"\n",(0,i.jsxs)(s.p,{children:["You can upload a new schema using the ",(0,i.jsx)(s.a,{href:"/docs/2.3.2/reference-pulsar-admin#get-5",children:(0,i.jsx)(s.code,{children:"upload"})})," subcommand:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:"\n$ pulsar-admin schemas upload <topic-name> --filename /path/to/schema-definition-file\n\n"})}),"\n",(0,i.jsx)(s.p,{children:"The schema definition file should contain following json string on defining how the schema look like:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'\n{\n    "type": "STRING",\n    "schema": "",\n    "properties": {\n        "key1" : "value1"\n    }\n}\n\n'})}),"\n",(0,i.jsxs)(s.p,{children:["An example of the schema definition file can be found at ",(0,i.jsx)(s.a,{href:"https://github.com/apache/pulsar/tree/master//conf/schema_example.conf",children:"SchemaExample"}),"."]}),"\n",(0,i.jsx)(s.h4,{id:"rest",children:"REST"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsxs)(s.a,{href:"https://pulsar.apache.org/admin-rest-api?version=2.3.2&apiversion=v2#operation/uploadSchema",children:["POST /admin/v2/schemas/",":tenant","/",":namespace","/",":topic","/schema/uploadSchema"]})}),"\n",(0,i.jsx)(s.h3,{id:"get-schema",children:"Get Schema"}),"\n",(0,i.jsx)(s.h4,{id:"pulsar-admin-1",children:"pulsar-admin"}),"\n",(0,i.jsxs)(s.p,{children:["You can get the latest version of Schema using the ",(0,i.jsx)(s.a,{href:"/docs/2.3.2/reference-pulsar-admin#get-5",children:(0,i.jsx)(s.code,{children:"get"})})," subcommand."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:'\n$ pulsar-admin schemas get <topic-name>\n{\n    "version": 0,\n    "type": "String",\n    "timestamp": 0,\n    "data": "string",\n    "properties": {\n        "property1": "string",\n        "property2": "string"\n    }\n}\n\n'})}),"\n",(0,i.jsxs)(s.p,{children:["You can also retrieve the Schema of a given version by specifying ",(0,i.jsx)(s.code,{children:"--version"})," option."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:"\n$ pulsar-admin schemas get <topic-name> --version <version>\n\n"})}),"\n",(0,i.jsx)(s.h4,{id:"rest-api",children:"REST API"}),"\n",(0,i.jsx)(s.p,{children:"Retrieve the latest version of the schema:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsxs)(s.a,{href:"https://pulsar.apache.org/admin-rest-api?version=2.3.2&apiversion=v2#operation/getSchema",children:["GET /admin/v2/schemas/",":tenant","/",":namespace","/",":topic","/schema/getSchema"]})}),"\n",(0,i.jsx)(s.p,{children:"Retrieve the schema of a given version:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsxs)(s.a,{href:"https://pulsar.apache.org/admin-rest-api?version=2.3.2&apiversion=v2#operation/getSchema",children:["GET /admin/v2/schemas/",":tenant","/",":namespace","/",":topic","/schema/",":version","/getSchema"]})}),"\n",(0,i.jsx)(s.h3,{id:"delete-schema",children:"Delete Schema"}),"\n",(0,i.jsx)(s.h4,{id:"pulsar-admin-2",children:"pulsar-admin"}),"\n",(0,i.jsxs)(s.p,{children:["You can delete a schema using the ",(0,i.jsx)(s.a,{href:"/docs/2.3.2/reference-pulsar-admin#delete-8",children:(0,i.jsx)(s.code,{children:"delete"})})," subcommand."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:"\n$ pulsar-admin schemas delete <topic-name>\n\n"})}),"\n",(0,i.jsx)(s.h4,{id:"rest-api-1",children:"REST API"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsxs)(s.a,{href:"https://pulsar.apache.org/admin-rest-api?version=2.3.2&apiversion=v2#operation/deleteSchema",children:["DELETE /admin/v2/schemas/",":tenant","/",":namespace","/",":topic","/schema/deleteSchema"]})})]})}function o(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>c});var a=n(96540);const i={},r=a.createContext(i);function t(e){const s=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),a.createElement(r.Provider,{value:s},e.children)}}}]);