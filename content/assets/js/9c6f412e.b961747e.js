"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[60313],{67645:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>u,contentTitle:()=>o,default:()=>m,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"client-libraries-consumers","title":"Work with consumer","description":"Learn how to work with consumers in Pulsar.","source":"@site/versioned_docs/version-4.0.x/client-libraries-consumers.md","sourceDirName":".","slug":"/client-libraries-consumers","permalink":"/docs/4.0.x/client-libraries-consumers","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/pulsar-site/edit/main/versioned_docs/version-4.0.x/client-libraries-consumers.md","tags":[],"version":"4.0.x","frontMatter":{"id":"client-libraries-consumers","title":"Work with consumer","sidebar_label":"Work with consumer","description":"Learn how to work with consumers in Pulsar."},"sidebar":"docsSidebar","previous":{"title":"Work with producer","permalink":"/docs/4.0.x/client-libraries-producers"},"next":{"title":"Work with reader","permalink":"/docs/4.0.x/client-libraries-readers"}}');var a=n(74848),r=n(28453),c=n(89089),t=n(19365);const l={id:"client-libraries-consumers",title:"Work with consumer",sidebar_label:"Work with consumer",description:"Learn how to work with consumers in Pulsar."},o=void 0,u={},d=[{value:"Subscribe to topics",id:"subscribe-to-topics",level:2},{value:"Exclusive",id:"exclusive",level:4},{value:"Failover",id:"failover",level:4},{value:"Shared",id:"shared",level:4},{value:"Key_shared",id:"key_shared",level:4},{value:"Subscribe to multi-topics",id:"subscribe-to-multi-topics",level:2},{value:"Unsubscribe from topics",id:"unsubscribe-from-topics",level:2},{value:"Receive messages",id:"receive-messages",level:2},{value:"Receive messages with timeout",id:"receive-messages-with-timeout",level:2},{value:"Async receive messages",id:"async-receive-messages",level:2},{value:"Batch receive messages",id:"batch-receive-messages",level:2},{value:"Acknowledge messages",id:"acknowledge-messages",level:2},{value:"Acknowledge messages individually",id:"acknowledge-messages-individually",level:3},{value:"Acknowledge messages cumulatively",id:"acknowledge-messages-cumulatively",level:3},{value:"Negative acknowledgment redelivery backoff",id:"negative-acknowledgment-redelivery-backoff",level:2},{value:"Acknowledgment timeout redelivery backoff",id:"acknowledgment-timeout-redelivery-backoff",level:2},{value:"Configure chunking",id:"configure-chunking",level:2},{value:"Create a consumer with a message listener",id:"create-a-consumer-with-a-message-listener",level:2},{value:"Intercept messages",id:"intercept-messages",level:2}];function h(e){const s={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.p,{children:["After setting up your clients, you can explore more to start working with ",(0,a.jsx)(s.a,{href:"/docs/4.0.x/concepts-clients#consumer",children:"consumers"}),"."]}),"\n",(0,a.jsx)(s.h2,{id:"subscribe-to-topics",children:"Subscribe to topics"}),"\n",(0,a.jsxs)(s.p,{children:["Pulsar has various ",(0,a.jsx)(s.a,{href:"/docs/4.0.x/concepts-messaging#subscription-types",children:"subscription types"})," to match different scenarios. A topic can have multiple subscriptions with different subscription types. However, a subscription can only have one subscription type at a time."]}),"\n",(0,a.jsx)(s.p,{children:"A subscription is identical to the subscription name; a subscription name can specify only one subscription type at a time. To change the subscription type, you should first stop all consumers of this subscription."}),"\n",(0,a.jsx)(s.p,{children:"Different subscription types have different message distribution types. This section describes the differences between subscription types and how to use them."}),"\n",(0,a.jsx)(s.p,{children:'To better describe their differences, assume you have a topic named "my-topic", and the producer has published 10 messages.'}),"\n",(0,a.jsx)(c.A,{groupId:"lang-choice",defaultValue:"Java",values:[{label:"Java",value:"Java"}],children:(0,a.jsx)(t.A,{value:"Java",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:'Producer<String> producer = client.newProducer(Schema.STRING)\n        .topic("my-topic")\n        .enableBatching(false)\n        .create();\n// 3 messages with "key-1", 3 messages with "key-2", 2 messages with "key-3" and 2 messages with "key-4"\nproducer.newMessage().key("key-1").value("message-1-1").send();\nproducer.newMessage().key("key-1").value("message-1-2").send();\nproducer.newMessage().key("key-1").value("message-1-3").send();\nproducer.newMessage().key("key-2").value("message-2-1").send();\nproducer.newMessage().key("key-2").value("message-2-2").send();\nproducer.newMessage().key("key-2").value("message-2-3").send();\nproducer.newMessage().key("key-3").value("message-3-1").send();\nproducer.newMessage().key("key-3").value("message-3-2").send();\nproducer.newMessage().key("key-4").value("message-4-1").send();\nproducer.newMessage().key("key-4").value("message-4-2").send();\n'})})})}),"\n",(0,a.jsx)(s.h4,{id:"exclusive",children:"Exclusive"}),"\n",(0,a.jsxs)(s.p,{children:["Create a new consumer and subscribe with the ",(0,a.jsx)(s.code,{children:"Exclusive"})," subscription type."]}),"\n",(0,a.jsx)(c.A,{groupId:"lang-choice",defaultValue:"Java",values:[{label:"Java",value:"Java"}],children:(0,a.jsx)(t.A,{value:"Java",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:'Consumer consumer = client.newConsumer()\n        .topic("my-topic")\n        .subscriptionName("my-subscription")\n        .subscriptionType(SubscriptionType.Exclusive)\n        .subscribe()\n'})})})}),"\n",(0,a.jsx)(s.p,{children:"Only the first consumer is allowed to the subscription, and other consumers receive an error. The first consumer receives all 10 messages, and the consuming order is the same as the producing order."}),"\n",(0,a.jsx)(s.admonition,{type:"note",children:(0,a.jsx)(s.p,{children:"If the topic is partitioned, the first consumer subscribes to all partitioned topics, and other consumers are not assigned with partitions and receive an error."})}),"\n",(0,a.jsx)(s.h4,{id:"failover",children:"Failover"}),"\n",(0,a.jsxs)(s.p,{children:["Create new consumers and subscribe with the ",(0,a.jsx)(s.code,{children:"Failover"})," subscription type."]}),"\n",(0,a.jsx)(c.A,{groupId:"lang-choice",defaultValue:"Java",values:[{label:"Java",value:"Java"}],children:(0,a.jsx)(t.A,{value:"Java",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:'Consumer consumer1 = client.newConsumer()\n        .topic("my-topic")\n        .subscriptionName("my-subscription")\n        .subscriptionType(SubscriptionType.Failover)\n        .subscribe()\nConsumer consumer2 = client.newConsumer()\n        .topic("my-topic")\n        .subscriptionName("my-subscription")\n        .subscriptionType(SubscriptionType.Failover)\n        .subscribe()\n//conumser1 is the active consumer, consumer2 is the standby consumer.\n//consumer1 receives 5 messages and then crashes, consumer2 takes over as an  active consumer.\n'})})})}),"\n",(0,a.jsx)(s.p,{children:"Multiple consumers can attach to the same subscription, yet only the first consumer is active, and others are standby. When the active consumer is disconnected, messages will be dispatched to one of standby consumers, and the standby consumer then becomes the active consumer."}),"\n",(0,a.jsx)(s.p,{children:"If the first active consumer is disconnected after receiving 5 messages, the standby consumer becomes active consumer. Consumer1 will receive:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:'("key-1", "message-1-1")\n("key-1", "message-1-2")\n("key-1", "message-1-3")\n("key-2", "message-2-1")\n("key-2", "message-2-2")\n'})}),"\n",(0,a.jsx)(s.p,{children:"consumer2 will receive:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:'("key-2", "message-2-3")\n("key-3", "message-3-1")\n("key-3", "message-3-2")\n("key-4", "message-4-1")\n("key-4", "message-4-2")\n'})}),"\n",(0,a.jsx)(s.admonition,{type:"note",children:(0,a.jsx)(s.p,{children:"If a topic is a partitioned topic, each partition has only one active consumer, messages of one partition are distributed to only one consumer, and messages of multiple partitions are distributed to multiple consumers."})}),"\n",(0,a.jsx)(s.h4,{id:"shared",children:"Shared"}),"\n",(0,a.jsxs)(s.p,{children:["Create new consumers and subscribe with ",(0,a.jsx)(s.code,{children:"Shared"})," subscription type."]}),"\n",(0,a.jsx)(c.A,{groupId:"lang-choice",defaultValue:"Java",values:[{label:"Java",value:"Java"}],children:(0,a.jsx)(t.A,{value:"Java",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:'Consumer consumer1 = client.newConsumer()\n        .topic("my-topic")\n        .subscriptionName("my-subscription")\n        .subscriptionType(SubscriptionType.Shared)\n        .subscribe()\n\nConsumer consumer2 = client.newConsumer()\n        .topic("my-topic")\n        .subscriptionName("my-subscription")\n        .subscriptionType(SubscriptionType.Shared)\n        .subscribe()\n//Both consumer1 and consumer2 are active consumers.\n'})})})}),"\n",(0,a.jsxs)(s.p,{children:["In ",(0,a.jsx)(s.code,{children:"Shared"})," subscription type, multiple consumers can attach to the same subscription and messages are delivered in a round-robin distribution across consumers."]}),"\n",(0,a.jsx)(s.p,{children:"If a broker dispatches only one message at a time, consumer1 receives the following information."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:'("key-1", "message-1-1")\n("key-1", "message-1-3")\n("key-2", "message-2-2")\n("key-3", "message-3-1")\n("key-4", "message-4-1")\n'})}),"\n",(0,a.jsx)(s.p,{children:"consumer2 receives the following information."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:'("key-1", "message-1-2")\n("key-2", "message-2-1")\n("key-2", "message-2-3")\n("key-3", "message-3-2")\n("key-4", "message-4-2")\n'})}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.code,{children:"Shared"})," subscription is different from the ",(0,a.jsx)(s.code,{children:"Exclusive"})," and ",(0,a.jsx)(s.code,{children:"Failover"})," subscription types. ",(0,a.jsx)(s.code,{children:"Shared"})," subscription has better flexibility, but cannot provide an ordering guarantee."]}),"\n",(0,a.jsx)(s.h4,{id:"key_shared",children:"Key_shared"}),"\n",(0,a.jsxs)(s.p,{children:["This is a new subscription type since 2.4.0 release. Create new consumers and subscribe with ",(0,a.jsx)(s.code,{children:"Key_Shared"})," subscription type."]}),"\n",(0,a.jsx)(c.A,{groupId:"lang-choice",defaultValue:"Java",values:[{label:"Java",value:"Java"}],children:(0,a.jsx)(t.A,{value:"Java",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:'Consumer consumer1 = client.newConsumer()\n        .topic("my-topic")\n        .subscriptionName("my-subscription")\n        .subscriptionType(SubscriptionType.Key_Shared)\n        .subscribe()\n\nConsumer consumer2 = client.newConsumer()\n        .topic("my-topic")\n        .subscriptionName("my-subscription")\n        .subscriptionType(SubscriptionType.Key_Shared)\n        .subscribe()\n//Both consumer1 and consumer2 are active consumers.\n'})})})}),"\n",(0,a.jsxs)(s.p,{children:["Just like in the ",(0,a.jsx)(s.code,{children:"Shared"})," subscription, all consumers in the ",(0,a.jsx)(s.code,{children:"Key_Shared"})," subscription type can attach to the same subscription. But the ",(0,a.jsx)(s.code,{children:"Key_Shared"})," subscription type is different from the ",(0,a.jsx)(s.code,{children:"Shared"})," subscription. In the ",(0,a.jsx)(s.code,{children:"Key_Shared"})," subscription type, messages with the same key are delivered to only one consumer in order. The possible distribution of messages between different consumers (by default we do not know in advance which keys will be assigned to a consumer, but a key will only be assigned to a consumer at the same time)."]}),"\n",(0,a.jsx)(s.p,{children:"consumer1 receives the following information."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:'("key-1", "message-1-1")\n("key-1", "message-1-2")\n("key-1", "message-1-3")\n("key-3", "message-3-1")\n("key-3", "message-3-2")\n'})}),"\n",(0,a.jsx)(s.p,{children:"consumer2 receives the following information."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:'("key-2", "message-2-1")\n("key-2", "message-2-2")\n("key-2", "message-2-3")\n("key-4", "message-4-1")\n("key-4", "message-4-2")\n'})}),"\n",(0,a.jsxs)(s.p,{children:["If batching is enabled at the producer side, messages with different keys are added to a batch by default. The broker will dispatch the batch to the consumer, so the default batch mechanism may break the Key_Shared subscription guaranteed message distribution semantics. The producer needs to use the ",(0,a.jsx)(s.code,{children:"KeyBasedBatcher"}),"."]}),"\n",(0,a.jsx)(c.A,{groupId:"lang-choice",defaultValue:"Java",values:[{label:"Java",value:"Java"}],children:(0,a.jsx)(t.A,{value:"Java",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:'Producer producer = client.newProducer()\n        .topic("my-topic")\n        .batcherBuilder(BatcherBuilder.KEY_BASED)\n        .create();\n'})})})}),"\n",(0,a.jsx)(s.p,{children:"Or the producer can disable batching."}),"\n",(0,a.jsx)(c.A,{groupId:"lang-choice",defaultValue:"Java",values:[{label:"Java",value:"Java"}],children:(0,a.jsx)(t.A,{value:"Java",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:'Producer producer = client.newProducer()\n        .topic("my-topic")\n        .enableBatching(false)\n        .create();\n'})})})}),"\n",(0,a.jsx)(s.admonition,{type:"note",children:(0,a.jsx)(s.p,{children:"If the message key is not specified, messages without keys are dispatched to one consumer in order by default."})}),"\n",(0,a.jsx)(s.h2,{id:"subscribe-to-multi-topics",children:"Subscribe to multi-topics"}),"\n",(0,a.jsxs)(s.p,{children:["In addition to subscribing a consumer to a single Pulsar topic, you can also subscribe to multiple topics simultaneously using ",(0,a.jsx)(s.a,{href:"/docs/4.0.x/concepts-messaging#multi-topic-subscriptions",children:"multi-topic subscriptions"}),". To use multi-topic subscriptions you can supply either a regular expression (regex) or a ",(0,a.jsx)(s.code,{children:"List"})," of topics. If you select topics via regex, all topics must be within the same Pulsar namespace."]}),"\n",(0,a.jsx)(s.p,{children:"The followings are some examples."}),"\n",(0,a.jsxs)(c.A,{groupId:"lang-choice",defaultValue:"Java",values:[{label:"Java",value:"Java"},{label:"Go",value:"Go"},{label:"Python",value:"Python"}],children:[(0,a.jsxs)(t.A,{value:"Java",children:[(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:'import org.apache.pulsar.client.api.Consumer;\nimport org.apache.pulsar.client.api.PulsarClient;\n\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.regex.Pattern;\n\nConsumerBuilder consumerBuilder = pulsarClient.newConsumer()\n        .subscriptionName(subscription);\n\n// Subscribe to all topics in a namespace\nPattern allTopicsInNamespace = Pattern.compile("public/default/.*");\nConsumer allTopicsConsumer = consumerBuilder\n        .topicsPattern(allTopicsInNamespace)\n        .subscribe();\n\n// Subscribe to a subsets of topics in a namespace, based on regex\nPattern someTopicsInNamespace = Pattern.compile("public/default/foo.*");\nConsumer allTopicsConsumer = consumerBuilder\n        .topicsPattern(someTopicsInNamespace)\n        .subscribe();\n'})}),(0,a.jsxs)(s.p,{children:["In the above example, the consumer subscribes to the ",(0,a.jsx)(s.code,{children:"persistent"})," topics that can match the topic name pattern. If you want the consumer subscribes to all ",(0,a.jsx)(s.code,{children:"persistent"})," and ",(0,a.jsx)(s.code,{children:"non-persistent"})," topics that can match the topic name pattern, set ",(0,a.jsx)(s.code,{children:"subscriptionTopicsMode"})," to ",(0,a.jsx)(s.code,{children:"RegexSubscriptionMode.AllTopics"}),"."]}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:'Pattern pattern = Pattern.compile("public/default/.*");\npulsarClient.newConsumer()\n        .subscriptionName("my-sub")\n        .topicsPattern(pattern)\n        .subscriptionTopicsMode(RegexSubscriptionMode.AllTopics)\n        .subscribe();\n'})}),(0,a.jsx)(s.admonition,{type:"note",children:(0,a.jsxs)(s.p,{children:["By default, the ",(0,a.jsx)(s.code,{children:"subscriptionTopicsMode"})," of the consumer is ",(0,a.jsx)(s.code,{children:"PersistentOnly"}),". Available options of ",(0,a.jsx)(s.code,{children:"subscriptionTopicsMode"})," are ",(0,a.jsx)(s.code,{children:"PersistentOnly"}),", ",(0,a.jsx)(s.code,{children:"NonPersistentOnly"}),", and ",(0,a.jsx)(s.code,{children:"AllTopics"}),"."]})}),(0,a.jsx)(s.p,{children:"You can also subscribe to an explicit list of topics (across namespaces if you wish):"}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:'List<String> topics = Arrays.asList(\n        "topic-1",\n        "topic-2",\n        "topic-3"\n);\n\nConsumer multiTopicConsumer = consumerBuilder\n        .topics(topics)\n        .subscribe();\n\n// Alternatively:\nConsumer multiTopicConsumer = consumerBuilder\n        .topic(\n            "topic-1",\n            "topic-2",\n            "topic-3"\n        )\n        .subscribe();\n'})}),(0,a.jsxs)(s.p,{children:["You can also subscribe to multiple topics asynchronously using the ",(0,a.jsx)(s.code,{children:"subscribeAsync"})," method rather than the synchronous ",(0,a.jsx)(s.code,{children:"subscribe"})," method. The following is an example."]}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:'Pattern allTopicsInNamespace = Pattern.compile("persistent://public/default.*");\nconsumerBuilder\n        .topics(topics)\n        .subscribeAsync()\n        .thenAccept(this::receiveMessageFromConsumer);\n\nprivate void receiveMessageFromConsumer(Object consumer) {\n    ((Consumer)consumer).receiveAsync().thenAccept(message -> {\n                // Do something with the received message\n                receiveMessageFromConsumer(consumer);\n            });\n}\n'})})]}),(0,a.jsx)(t.A,{value:"Go",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-go",children:'client, err := pulsar.NewClient(pulsar.ClientOptions{\n    URL: "pulsar://localhost:6650",\n})\nif err != nil {\n    log.Fatal(err)\n}\n\ntopics := []string{"topic-1", "topic-2"}\nconsumer, err := client.Subscribe(pulsar.ConsumerOptions{\n    // fill `Topics` field will create a multi-topic consumer\n    Topics:           topics,\n    SubscriptionName: "multi-topic-sub",\n})\nif err != nil {\n    log.Fatal(err)\n}\ndefer consumer.Close()\n'})})}),(0,a.jsx)(t.A,{value:"Python",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-python",children:"import re\nconsumer = client.subscribe(re.compile('persistent://public/default/topic-*'), 'my-subscription')\nwhile True:\n    msg = consumer.receive()\n    try:\n        print(\"Received message '{}' id='{}'\".format(msg.data(), msg.message_id()))\n        # Acknowledge successful processing of the message\n        consumer.acknowledge(msg)\n    except Exception:\n        # Message failed to be processed\n        consumer.negative_acknowledge(msg)\nclient.close()\n"})})})]}),"\n",(0,a.jsx)(s.h2,{id:"unsubscribe-from-topics",children:"Unsubscribe from topics"}),"\n",(0,a.jsx)(s.p,{children:"This example shows how a consumer unsubscribes from a topic."}),"\n",(0,a.jsxs)(c.A,{groupId:"lang-choice",defaultValue:"Java",values:[{label:"Java",value:"Java"},{label:"C#",value:"C#"}],children:[(0,a.jsx)(t.A,{value:"Java",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:"consumer.unsubscribe();\n"})})}),(0,a.jsx)(t.A,{value:"C#",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-csharp",children:"await consumer.Unsubscribe();\n"})})})]}),"\n",(0,a.jsx)(s.admonition,{type:"note",children:(0,a.jsx)(s.p,{children:"A consumer cannot be used and is disposed once the consumer unsubscribes from a topic."})}),"\n",(0,a.jsx)(s.h2,{id:"receive-messages",children:"Receive messages"}),"\n",(0,a.jsx)(s.p,{children:"This example shows how a consumer receives messages from a topic."}),"\n",(0,a.jsxs)(c.A,{groupId:"lang-choice",defaultValue:"Java",values:[{label:"Java",value:"Java"},{label:"C#",value:"C#"}],children:[(0,a.jsx)(t.A,{value:"Java",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:"Message message = consumer.receive();\n"})})}),(0,a.jsx)(t.A,{value:"C#",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-csharp",children:'await foreach (var message in consumer.Messages())\n{\n    Console.WriteLine("Received: " + Encoding.UTF8.GetString(message.Data.ToArray()));\n}\n'})})})]}),"\n",(0,a.jsx)(s.h2,{id:"receive-messages-with-timeout",children:"Receive messages with timeout"}),"\n",(0,a.jsxs)(c.A,{groupId:"lang-choice",defaultValue:"Java",values:[{label:"Java",value:"Java"},{label:"Go",value:"Go"}],children:[(0,a.jsx)(t.A,{value:"Java",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:"consumer.receive(10, TimeUnit.SECONDS);\n"})})}),(0,a.jsx)(t.A,{value:"Go",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-go",children:'client, err := pulsar.NewClient(pulsar.ClientOptions{\n    URL: "pulsar://localhost:6650",\n})\nif err != nil {\n    log.Fatal(err)\n}\ndefer client.Close()\n\ntopic := "test-topic-with-no-messages"\nctx, cancel := context.WithTimeout(context.Background(), 500*time.Millisecond)\ndefer cancel()\n\n// create consumer\nconsumer, err := client.Subscribe(pulsar.ConsumerOptions{\n    Topic:            topic,\n    SubscriptionName: "my-sub1",\n    Type:             pulsar.Shared,\n})\nif err != nil {\n    log.Fatal(err)\n}\ndefer consumer.Close()\n\n// receive message with a timeout\nmsg, err := consumer.Receive(ctx)\nif err != nil {\n    log.Fatal(err)\n}\nfmt.Println(msg.Payload())\n'})})})]}),"\n",(0,a.jsx)(s.h2,{id:"async-receive-messages",children:"Async receive messages"}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.code,{children:"receive"})," method receives messages synchronously (the consumer process is blocked until a message is available). You can also use ",(0,a.jsx)(s.a,{href:"/docs/4.0.x/concepts-clients#receive-modes",children:"async receive"}),", which returns a ",(0,a.jsx)(s.a,{href:"http://www.baeldung.com/java-completablefuture",children:(0,a.jsx)(s.code,{children:"CompletableFuture"})})," object immediately once a new message is available."]}),"\n",(0,a.jsx)(s.p,{children:"The following is an example."}),"\n",(0,a.jsx)(c.A,{groupId:"lang-choice",defaultValue:"Java",values:[{label:"Java",value:"Java"}],children:(0,a.jsxs)(t.A,{value:"Java",children:[(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:"CompletableFuture<Message> asyncMessage = consumer.receiveAsync();\n"})}),(0,a.jsxs)(s.p,{children:["Async receive operations return a ",(0,a.jsx)(s.a,{href:"https://pulsar.apache.org/api/client/4.0.x/org/apache/pulsar/client/api/Message",children:"Message"})," wrapped inside of a ",(0,a.jsx)(s.a,{href:"http://www.baeldung.com/java-completablefuture",children:(0,a.jsx)(s.code,{children:"CompletableFuture"})}),"."]})]})}),"\n",(0,a.jsx)(s.h2,{id:"batch-receive-messages",children:"Batch receive messages"}),"\n",(0,a.jsxs)(s.p,{children:["Use ",(0,a.jsx)(s.code,{children:"batchReceive"})," to receive multiple messages for each call."]}),"\n",(0,a.jsx)(s.p,{children:"The following is an example."}),"\n",(0,a.jsx)(c.A,{groupId:"lang-choice",defaultValue:"Java",values:[{label:"Java",value:"Java"}],children:(0,a.jsx)(t.A,{value:"Java",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:"Messages messages = consumer.batchReceive();\nfor (Object message : messages) {\n  // do something\n}\nconsumer.acknowledge(messages)\n"})})})}),"\n",(0,a.jsxs)(s.admonition,{type:"note",children:[(0,a.jsx)(s.p,{children:"Batch receive policy limits the number and bytes of messages in a single batch. You can specify a timeout to wait for enough messages.\nThe batch receive is completed if any of the following conditions are met: enough number of messages, bytes of messages, wait timeout."}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:'Consumer consumer = client.newConsumer()\n.topic("my-topic")\n.subscriptionName("my-subscription")\n.batchReceivePolicy(BatchReceivePolicy.builder()\n.maxNumMessages(100)\n.maxNumBytes(1024 * 1024)\n.timeout(200, TimeUnit.MILLISECONDS)\n.build())\n.subscribe();\n'})}),(0,a.jsx)(s.p,{children:"The default batch receive policy is:"}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:"BatchReceivePolicy.builder()\n.maxNumMessage(-1)\n.maxNumBytes(10 * 1024 * 1024)\n.timeout(100, TimeUnit.MILLISECONDS)\n.build();\n"})})]}),"\n",(0,a.jsx)(s.h2,{id:"acknowledge-messages",children:"Acknowledge messages"}),"\n",(0,a.jsxs)(s.p,{children:["Messages can be acknowledged individually or cumulatively. For details about message acknowledgment, see ",(0,a.jsx)(s.a,{href:"/docs/4.0.x/concepts-messaging#acknowledgment",children:"acknowledgment"}),"."]}),"\n",(0,a.jsx)(s.h3,{id:"acknowledge-messages-individually",children:"Acknowledge messages individually"}),"\n",(0,a.jsxs)(c.A,{groupId:"lang-choice",defaultValue:"Java",values:[{label:"Java",value:"Java"},{label:"C#",value:"C#"}],children:[(0,a.jsx)(t.A,{value:"Java",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:"consumer.acknowledge(msg);\n"})})}),(0,a.jsx)(t.A,{value:"C#",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-csharp",children:"await consumer.Acknowledge(message);\n"})})})]}),"\n",(0,a.jsx)(s.h3,{id:"acknowledge-messages-cumulatively",children:"Acknowledge messages cumulatively"}),"\n",(0,a.jsxs)(c.A,{groupId:"lang-choice",defaultValue:"Java",values:[{label:"Java",value:"Java"},{label:"C#",value:"C#"}],children:[(0,a.jsx)(t.A,{value:"Java",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:"consumer.acknowledgeCumulative(msg);\n"})})}),(0,a.jsx)(t.A,{value:"C#",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-csharp",children:"await consumer.AcknowledgeCumulative(message);\n"})})})]}),"\n",(0,a.jsx)(s.h2,{id:"negative-acknowledgment-redelivery-backoff",children:"Negative acknowledgment redelivery backoff"}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.code,{children:"RedeliveryBackoff"})," introduces a redelivery backoff mechanism. You can achieve redelivery with different delays by setting the redelivery count of messages."]}),"\n",(0,a.jsx)(c.A,{groupId:"lang-choice",defaultValue:"Java",values:[{label:"Java",value:"Java"}],children:(0,a.jsx)(t.A,{value:"Java",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:'Consumer consumer =  client.newConsumer()\n        .topic("my-topic")\n        .subscriptionName("my-subscription")\n        .negativeAckRedeliveryBackoff(MultiplierRedeliveryBackoff.builder()\n                .minDelayMs(1000)\n                .maxDelayMs(60 * 1000)\n                .build())\n        .subscribe();\n'})})})}),"\n",(0,a.jsx)(s.h2,{id:"acknowledgment-timeout-redelivery-backoff",children:"Acknowledgment timeout redelivery backoff"}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.code,{children:"RedeliveryBackoff"})," introduces a redelivery backoff mechanism. You can redeliver messages with different delays by setting the number of times the messages are retried."]}),"\n",(0,a.jsx)(c.A,{groupId:"lang-choice",defaultValue:"Java",values:[{label:"Java",value:"Java"}],children:(0,a.jsx)(t.A,{value:"Java",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:'Consumer consumer =  client.newConsumer()\n        .topic("my-topic")\n        .subscriptionName("my-subscription")\n        .ackTimeout(10, TimeUnit.SECOND)\n        .ackTimeoutRedeliveryBackoff(MultiplierRedeliveryBackoff.builder()\n                .minDelayMs(1000)\n                .maxDelayMs(60000)\n                .multiplier(2)\n                .build())\n        .subscribe();\n'})})})}),"\n",(0,a.jsx)(s.p,{children:"The message redelivery behavior should be as follows."}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{style:{textAlign:"left"},children:"Redelivery count"}),(0,a.jsx)(s.th,{style:{textAlign:"left"},children:"Redelivery delay"})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{style:{textAlign:"left"},children:"1"}),(0,a.jsx)(s.td,{style:{textAlign:"left"},children:"10 + 1 seconds"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{style:{textAlign:"left"},children:"2"}),(0,a.jsx)(s.td,{style:{textAlign:"left"},children:"10 + 2 seconds"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{style:{textAlign:"left"},children:"3"}),(0,a.jsx)(s.td,{style:{textAlign:"left"},children:"10 + 4 seconds"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{style:{textAlign:"left"},children:"4"}),(0,a.jsx)(s.td,{style:{textAlign:"left"},children:"10 + 8 seconds"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{style:{textAlign:"left"},children:"5"}),(0,a.jsx)(s.td,{style:{textAlign:"left"},children:"10 + 16 seconds"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{style:{textAlign:"left"},children:"6"}),(0,a.jsx)(s.td,{style:{textAlign:"left"},children:"10 + 32 seconds"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{style:{textAlign:"left"},children:"7"}),(0,a.jsx)(s.td,{style:{textAlign:"left"},children:"10 + 60 seconds"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{style:{textAlign:"left"},children:"8"}),(0,a.jsx)(s.td,{style:{textAlign:"left"},children:"10 + 60 seconds"})]})]})]}),"\n",(0,a.jsx)(s.admonition,{type:"note",children:(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["The ",(0,a.jsx)(s.code,{children:"negativeAckRedeliveryBackoff"})," does not work with ",(0,a.jsx)(s.code,{children:"consumer.negativeAcknowledge(MessageId messageId)"})," because you are not able to get the redelivery count from the message ID."]}),"\n",(0,a.jsxs)(s.li,{children:["If a consumer crashes, it triggers the redelivery of unacked messages. In this case, ",(0,a.jsx)(s.code,{children:"RedeliveryBackoff"})," does not take effect and the messages might get redelivered earlier than the delay time from the backoff."]}),"\n"]})}),"\n",(0,a.jsx)(s.h2,{id:"configure-chunking",children:"Configure chunking"}),"\n",(0,a.jsx)(s.p,{children:"You can limit the maximum number of chunked messages a consumer maintains concurrently by configuring specific parameters. When the configured threshold is reached, the consumer drops pending messages by silently acknowledging them or asking the broker to redeliver them later."}),"\n",(0,a.jsx)(s.p,{children:"The following is an example of how to configure message chunking."}),"\n",(0,a.jsxs)(c.A,{groupId:"lang-choice",defaultValue:"Java",values:[{label:"Java",value:"Java"},{label:"C++",value:"C++"},{label:"Go",value:"Go"},{label:"Python",value:"Python"}],children:[(0,a.jsx)(t.A,{value:"Java",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:'Consumer<byte[]> consumer = client.newConsumer()\n     .topic(topic)\n     .subscriptionName("test")\n     .autoAckOldestChunkedMessageOnQueueFull(true)\n     .maxPendingChunkedMessage(100)\n     .expireTimeOfIncompleteChunkedMessage(10, TimeUnit.MINUTES)\n     .subscribe();\n'})})}),(0,a.jsx)(t.A,{value:"C++",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:'ConsumerConfiguration conf;\nconf.setAutoAckOldestChunkedMessageOnQueueFull(true);\nconf.setMaxPendingChunkedMessage(100);\nConsumer consumer;\nclient.subscribe("my-topic", "my-sub", conf, consumer);\n'})})}),(0,a.jsx)(t.A,{value:"Go",children:(0,a.jsx)(s.p,{children:"Coming soon..."})}),(0,a.jsx)(t.A,{value:"Python",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-python",children:'consumer = client.subscribe(topic, "my-subscription",\n                 max_pending_chunked_message=10,\n                 auto_ack_oldest_chunked_message_on_queue_full=False\n                 )\n'})})})]}),"\n",(0,a.jsx)(s.h2,{id:"create-a-consumer-with-a-message-listener",children:"Create a consumer with a message listener"}),"\n",(0,a.jsx)(s.p,{children:"You can avoid running a loop by blocking calls with an event-based style by using a message listener which is invoked for each message that is received."}),"\n",(0,a.jsxs)(c.A,{groupId:"lang-choice",defaultValue:"Java",values:[{label:"Java",value:"Java"},{label:"C++",value:"C++"},{label:"Go",value:"Go"}],children:[(0,a.jsx)(t.A,{value:"Java",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:'Consumer<String> consumer = pulsarClient.newConsumer(Schema.STRING)\n                      .topic("persistent://my-property/my-ns/my-topic")\n                      .subscriptionName("my-subscription")\n                      .messageListener((c, m) -> {\n                          try {\n                              c.acknowledge(m);\n                          } catch (Exception e) {\n                              Assert.fail("Failed to acknowledge", e);\n                          }\n                      })\n                      .subscribe();\n'})})}),(0,a.jsxs)(t.A,{value:"C++",children:[(0,a.jsx)(s.p,{children:"This example starts a subscription at the earliest offset and consumes 100 messages."}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:'#include <pulsar/Client.h>\n#include <atomic>\n#include <thread>\n\nusing namespace pulsar;\n\nstd::atomic<uint32_t> messagesReceived;\n\nvoid handleAckComplete(Result res) {\n    std::cout << "Ack res: " << res << std::endl;\n}\n\nvoid listener(Consumer consumer, const Message& msg) {\n    std::cout << "Got message " << msg << " with content \'" << msg.getDataAsString() << "\'" << std::endl;\n    messagesReceived++;\n    consumer.acknowledgeAsync(msg.getMessageId(), handleAckComplete);\n}\n\nint main() {\n    Client client("pulsar://localhost:6650");\n\n    Consumer consumer;\n    ConsumerConfiguration config;\n    config.setMessageListener(listener);\n    config.setSubscriptionInitialPosition(InitialPositionEarliest);\n    Result result = client.subscribe("persistent://public/default/my-topic", "consumer-1", config, consumer);\n    if (result != ResultOk) {\n        std::cout << "Failed to subscribe: " << result << std::endl;\n        return -1;\n    }\n\n    // wait for 100 messages to be consumed\n    while (messagesReceived < 100) {\n        std::this_thread::sleep_for(std::chrono::milliseconds(100));\n    }\n\n    std::cout << "Finished consuming asynchronously!" << std::endl;\n\n    client.close();\n    return 0;\n}\n'})})]}),(0,a.jsx)(t.A,{value:"Go",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-go",children:'import (\n    "fmt"\n    "log"\n\n    "github.com/apache/pulsar-client-go/pulsar"\n)\n\nfunc main() {\n    client, err := pulsar.NewClient(pulsar.ClientOptions{URL: "pulsar://localhost:6650"})\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    defer client.Close()\n\n    // we can listen this channel\n    channel := make(chan pulsar.ConsumerMessage, 100)\n\n    options := pulsar.ConsumerOptions{\n        Topic:            "topic-1",\n        SubscriptionName: "my-subscription",\n        Type:             pulsar.Shared,\n        // fill `MessageChannel` field will create a listener\n        MessageChannel: channel,\n    }\n\n    consumer, err := client.Subscribe(options)\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    defer consumer.Close()\n\n    // Receive messages from channel. The channel returns a struct `ConsumerMessage` which contains message and the consumer from where\n    // the message was received. It\'s not necessary here since we have 1 single consumer, but the channel could be\n    // shared across multiple consumers as well\n    for cm := range channel {\n        consumer := cm.Consumer\n        msg := cm.Message\n        fmt.Printf("Consumer %s received a message, msgId: %v, content: \'%s\'\\n",\n            consumer.Name(), msg.ID(), string(msg.Payload()))\n\n        consumer.Ack(msg)\n    }\n}\n'})})})]}),"\n",(0,a.jsx)(s.h2,{id:"intercept-messages",children:"Intercept messages"}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.code,{children:"ConsumerInterceptor"}),"s intercept and possibly mutate messages received by the consumer."]}),"\n",(0,a.jsx)(s.p,{children:"The interface has six main events:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"beforeConsume"})," is triggered before the message is returned by ",(0,a.jsx)(s.code,{children:"receive()"})," or ",(0,a.jsx)(s.code,{children:"receiveAsync()"}),". You can modify messages within this event."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"onAcknowledge"})," is triggered before the consumer sends the acknowledgement to the broker."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"onAcknowledgeCumulative"})," is triggered before the consumer sends the cumulative acknowledgement to the broker."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"onNegativeAcksSend"})," is triggered when a redelivery from a negative acknowledgement occurs."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"onAckTimeoutSend"})," is triggered when a redelivery from an acknowledgement timeout occurs."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"onPartitionsChange"})," is triggered when the partitions of the (partitioned) topic change."]}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:["To intercept messages, you can add one or multiple ",(0,a.jsx)(s.code,{children:"ConsumerInterceptor"}),"s when creating a ",(0,a.jsx)(s.code,{children:"Consumer"})," as follows."]}),"\n",(0,a.jsx)(c.A,{groupId:"lang-choice",defaultValue:"Java",values:[{label:"Java",value:"Java"}],children:(0,a.jsx)(t.A,{value:"Java",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:'Consumer<String> consumer = client.newConsumer()\n     .topic("my-topic")\n     .subscriptionName("my-subscription")\n     .intercept(new ConsumerInterceptor<String> {\n           @Override\n           public Message<String> beforeConsume(Consumer<String> consumer, Message<String> message) {\n               // user-defined processing logic\n           }\n\n           @Override\n           public void onAcknowledge(Consumer<String> consumer, MessageId messageId, Throwable cause) {\n               // user-defined processing logic\n           }\n\n           @Override\n           public void onAcknowledgeCumulative(Consumer<String> consumer, MessageId messageId, Throwable cause) {\n               // user-defined processing logic\n           }\n\n           @Override\n           public void onNegativeAcksSend(Consumer<String> consumer, Set<MessageId> messageIds) {\n               // user-defined processing logic\n           }\n\n           @Override\n           public void onAckTimeoutSend(Consumer<String> consumer, Set<MessageId> messageIds) {\n               // user-defined processing logic\n           }\n\n           @Override\n           public void onPartitionsChange(String topicName, int partitions) {\n               // user-defined processing logic\n           }\n     })\n     .subscribe();\n'})})})}),"\n",(0,a.jsx)(s.admonition,{type:"note",children:(0,a.jsxs)(s.p,{children:["If you are using multiple interceptors, they apply in the order they are passed to the ",(0,a.jsx)(s.code,{children:"intercept"})," method."]})})]})}function m(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},19365:(e,s,n)=>{n.d(s,{A:()=>c});n(96540);var i=n(34164);const a={tabItem:"tabItem_Ymn6"};var r=n(74848);function c({children:e,hidden:s,className:n}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,i.A)(a.tabItem,n),hidden:s,children:e})}},89089:(e,s,n)=>{n.d(s,{A:()=>w});var i=n(96540),a=n(34164),r=n(23104),c=n(56347),t=n(205),l=n(57485),o=n(31682),u=n(70679);function d(e){return i.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:s}=e;return!!s&&"object"==typeof s&&"value"in s}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:s,children:n}=e;return(0,i.useMemo)((()=>{const e=s??function(e){return d(e).map((({props:{value:e,label:s,attributes:n,default:i}})=>({value:e,label:s,attributes:n,default:i})))}(n);return function(e){const s=(0,o.XI)(e,((e,s)=>e.value===s.value));if(s.length>0)throw new Error(`Docusaurus error: Duplicate values "${s.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[s,n])}function m({value:e,tabValues:s}){return s.some((s=>s.value===e))}function p({queryString:e=!1,groupId:s}){const n=(0,c.W6)(),a=function({queryString:e=!1,groupId:s}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!s)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return s??null}({queryString:e,groupId:s});return[(0,l.aZ)(a),(0,i.useCallback)((e=>{if(!a)return;const s=new URLSearchParams(n.location.search);s.set(a,e),n.replace({...n.location,search:s.toString()})}),[a,n])]}function g(e){const{defaultValue:s,queryString:n=!1,groupId:a}=e,r=h(e),[c,l]=(0,i.useState)((()=>function({defaultValue:e,tabValues:s}){if(0===s.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:s}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${s.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const n=s.find((e=>e.default))??s[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:s,tabValues:r}))),[o,d]=p({queryString:n,groupId:a}),[g,v]=function({groupId:e}){const s=function(e){return e?`docusaurus.tab.${e}`:null}(e),[n,a]=(0,u.Dv)(s);return[n,(0,i.useCallback)((e=>{s&&a.set(e)}),[s,a])]}({groupId:a}),b=(()=>{const e=o??g;return m({value:e,tabValues:r})?e:null})();(0,t.A)((()=>{b&&l(b)}),[b]);return{selectedValue:c,selectValue:(0,i.useCallback)((e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),v(e)}),[d,v,r]),tabValues:r}}var v=n(92303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=n(74848);function j({className:e,block:s,selectedValue:n,selectValue:i,tabValues:c}){const t=[],{blockElementScrollPositionUntilNextRender:l}=(0,r.a_)(),o=e=>{const s=e.currentTarget,a=t.indexOf(s),r=c[a].value;r!==n&&(l(s),i(r))},u=e=>{let s=null;switch(e.key){case"Enter":o(e);break;case"ArrowRight":{const n=t.indexOf(e.currentTarget)+1;s=t[n]??t[0];break}case"ArrowLeft":{const n=t.indexOf(e.currentTarget)-1;s=t[n]??t[t.length-1];break}}s?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":s},e),children:c.map((({value:e,label:s,attributes:i})=>(0,x.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>t.push(e),onKeyDown:u,onClick:o,...i,className:(0,a.A)("tabs__item",b.tabItem,i?.className,{"tabs__item--active":n===e}),children:s??e},e)))})}function y({lazy:e,children:s,selectedValue:n}){const r=(Array.isArray(s)?s:[s]).filter(Boolean);if(e){const e=r.find((e=>e.props.value===n));return e?(0,i.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:r.map(((e,s)=>(0,i.cloneElement)(e,{key:s,hidden:e.props.value!==n})))})}function f(e){const s=g(e);return(0,x.jsxs)("div",{className:(0,a.A)("tabs-container",b.tabList),children:[(0,x.jsx)(j,{...s,...e}),(0,x.jsx)(y,{...s,...e})]})}function w(e){const s=(0,v.A)();return(0,x.jsx)(f,{...e,children:d(e.children)},String(s))}},28453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>t});var i=n(96540);const a={},r=i.createContext(a);function c(e){const s=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);