"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[94614],{67596:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>n,toc:()=>c});var n=t(51549),s=t(74848),r=t(28453);const o={title:"What\u2019s New in Apache Pulsar 2.10.4",date:new Date("2023-04-19T00:00:00.000Z"),author:"liangyepianzhou, Anonymitaet, momo-jun"},a=void 0,l={authorsImageUrls:[void 0]},c=[{value:"Improve performance in Key_Shared subscriptions (PR-19167)",id:"improve-performance-in-key_shared-subscriptions-pr-19167",level:3},{value:"Issue",id:"issue",level:4},{value:"Resolution",id:"resolution",level:4},{value:"AbstractBatchedMetadataStore - Use AlreadyClosedException instead of IllegalStateException (PR-19284)",id:"abstractbatchedmetadatastore---use-alreadyclosedexception-instead-of-illegalstateexception-pr-19284",level:3},{value:"Issue",id:"issue-1",level:4},{value:"Resolution",id:"resolution-1",level:4},{value:"Fix open cursor with null-initialPosition, resulting in the earliest position (PR-18416)",id:"fix-open-cursor-with-null-initialposition-resulting-in-the-earliest-position-pr-18416",level:3},{value:"Issue",id:"issue-2",level:4},{value:"Resolution",id:"resolution-2",level:4},{value:"Add isActive in ManagedCursorImpl (PR-19341)",id:"add-isactive-in-managedcursorimpl-pr-19341",level:3},{value:"Issue",id:"issue-3",level:4},{value:"Resolution",id:"resolution-3",level:4},{value:"Support deleting partitioned topics with the keyword -partition- (PR-19230)",id:"support-deleting-partitioned-topics-with-the-keyword--partition--pr-19230",level:3},{value:"Issue",id:"issue-4",level:4},{value:"Resolution",id:"resolution-4",level:4}];function d(e){const i={a:"a",code:"code",h1:"h1",h3:"h3",h4:"h4",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.p,{children:"The Apache Pulsar community releases version 2.10.4! 37 contributors provided improvements and bug fixes that delivered 12 commits. Thanks for all your contributions."}),"\n",(0,s.jsxs)(i.p,{children:["This blog walks through the most noteworthy changes. For the complete list, including all feature enhancements and bug fixes, check out the ",(0,s.jsx)(i.a,{href:"https://pulsar.apache.org/release-notes/versioned/pulsar-2.10.4/",children:"Pulsar 2.10.4 Release Notes"}),"."]}),"\n",(0,s.jsxs)(i.h3,{id:"improve-performance-in-key_shared-subscriptions-pr-19167",children:["Improve performance in Key_Shared subscriptions (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/19167",children:"PR-19167"}),")"]}),"\n",(0,s.jsx)(i.h4,{id:"issue",children:"Issue"}),"\n",(0,s.jsx)(i.p,{children:"In earlier versions, Key_Shared subscriptions suffered from performance issues due to the lack of a ref count for sticky hash."}),"\n",(0,s.jsx)(i.h4,{id:"resolution",children:"Resolution"}),"\n",(0,s.jsx)(i.p,{children:"A significant performance improvement has been made to the Key_Shared subscriptions by adding a ref count for sticky hash. This optimization reduces the time required to check if messages contain the hash from a given sticky hash set, resulting in improved performance and efficiency."}),"\n",(0,s.jsxs)(i.h3,{id:"abstractbatchedmetadatastore---use-alreadyclosedexception-instead-of-illegalstateexception-pr-19284",children:["AbstractBatchedMetadataStore - Use AlreadyClosedException instead of IllegalStateException (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/19284",children:"PR-19284"}),")"]}),"\n",(0,s.jsx)(i.h4,{id:"issue-1",children:"Issue"}),"\n",(0,s.jsxs)(i.p,{children:["In earlier versions, when the broker was shutting down, the ",(0,s.jsx)(i.code,{children:"AbstractBatchedMetadataStore"})," would complete pending operations with a generic ",(0,s.jsx)(i.code,{children:"IllegalStateException"}),". However, code dependent on the ",(0,s.jsx)(i.code,{children:"MetadataStore"})," usually expected instances of ",(0,s.jsx)(i.code,{children:"MetadataStoreException"})," and might not react properly to this error."]}),"\n",(0,s.jsx)(i.h4,{id:"resolution-1",children:"Resolution"}),"\n",(0,s.jsxs)(i.p,{children:["This PR improves the error handling during broker shutdown by completing pending operations with an ",(0,s.jsx)(i.code,{children:"AlreadyClosedException"})," instead of ",(0,s.jsx)(i.code,{children:"IllegalStateException"}),". This ensures that the dependent code responds more appropriately to the error, even if the broker is shutting down."]}),"\n",(0,s.jsxs)(i.h3,{id:"fix-open-cursor-with-null-initialposition-resulting-in-the-earliest-position-pr-18416",children:["Fix open cursor with null-initialPosition, resulting in the earliest position (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/18416",children:"PR-18416"}),")"]}),"\n",(0,s.jsx)(i.h4,{id:"issue-2",children:"Issue"}),"\n",(0,s.jsxs)(i.p,{children:["In earlier versions, called ",(0,s.jsx)(i.code,{children:'ledger.openCursor("xxx", null)'})," with a null ",(0,s.jsx)(i.code,{children:"initialPosition"})," parameter would result in the cursor being set to the earliest position, causing unexpected behavior. The root cause of this issue was due to incorrect handling of the ",(0,s.jsx)(i.code,{children:"initialPosition"})," in ",(0,s.jsx)(i.code,{children:"ManagedLedgerImpl.java"}),"."]}),"\n",(0,s.jsx)(i.h4,{id:"resolution-2",children:"Resolution"}),"\n",(0,s.jsxs)(i.p,{children:["This PR fixes the issue by ensuring that the correct initial position is used when opening a cursor with a null ",(0,s.jsx)(i.code,{children:"initialPosition"}),". The code now sets the cursor to the latest position, as expected."]}),"\n",(0,s.jsxs)(i.h3,{id:"add-isactive-in-managedcursorimpl-pr-19341",children:["Add isActive in ManagedCursorImpl (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/19341",children:"PR-19341"}),")"]}),"\n",(0,s.jsx)(i.h4,{id:"issue-3",children:"Issue"}),"\n",(0,s.jsx)(i.p,{children:"In previous versions, when there were many concurrent subscriptions in a topic, broker performance would degrade due to many io-threads waiting for the lock, synchronized (activeCursors) while calling checkBackloggedCursors."}),"\n",(0,s.jsx)(i.h4,{id:"resolution-3",children:"Resolution"}),"\n",(0,s.jsxs)(i.p,{children:["This PR adds an ",(0,s.jsx)(i.code,{children:"isActive"})," variable in ",(0,s.jsx)(i.code,{children:"ManagedCursorImpl"})," to minimize the access to ",(0,s.jsx)(i.code,{children:"activeCursors"})," in ",(0,s.jsx)(i.code,{children:"ManagedLedgerImpl,"})," which reduces the contention on the lock and improves the broker performance with many concurrent subscriptions."]}),"\n",(0,s.jsxs)(i.h3,{id:"support-deleting-partitioned-topics-with-the-keyword--partition--pr-19230",children:["Support deleting partitioned topics with the keyword -partition- (",(0,s.jsx)(i.a,{href:"https://github.com/apache/pulsar/pull/19230",children:"PR-19230"}),")"]}),"\n",(0,s.jsx)(i.h4,{id:"issue-4",children:"Issue"}),"\n",(0,s.jsx)(i.p,{children:"In earlier versions, although users could create partitioned topics using the client when partitioned type auto-creation was enabled, there was no support for deleting these partitioned topics."}),"\n",(0,s.jsx)(i.h4,{id:"resolution-4",children:"Resolution"}),"\n",(0,s.jsxs)(i.p,{children:["This PR adds support for deleting partitioned topics using the keyword ",(0,s.jsx)(i.code,{children:"-partition-"}),", making it easier for users to manage their partitioned topics."]}),"\n",(0,s.jsx)(i.h1,{id:"whats-next",children:"What\u2019s Next?"}),"\n",(0,s.jsxs)(i.p,{children:["If you are interested in learning more about Pulsar 2.10.4, you can ",(0,s.jsx)(i.a,{href:"https://pulsar.apache.org/download/",children:"download"})," and try it out now!"]}),"\n",(0,s.jsxs)(i.p,{children:["For more information about the Apache Pulsar project and current progress, visit\nthe ",(0,s.jsx)(i.a,{href:"https://pulsar.apache.org",children:"Pulsar website"}),", follow the project on Twitter\n",(0,s.jsx)(i.a,{href:"https://twitter.com/apache_pulsar",children:"@apache_pulsar"}),", and join ",(0,s.jsx)(i.a,{href:"https://apache-pulsar.slack.com/",children:"Pulsar Slack"}),"!"]})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,i,t)=>{t.d(i,{R:()=>o,x:()=>a});var n=t(96540);const s={},r=n.createContext(s);function o(e){const i=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),n.createElement(r.Provider,{value:i},e.children)}},51549:e=>{e.exports=JSON.parse('{"permalink":"/blog/2023/04/19/Apache-Pulsar-2-10-4","editUrl":"https://github.com/apache/pulsar-site/edit/main/blog/2023-04-19-Apache-Pulsar-2-10-4.md","source":"@site/blog/2023-04-19-Apache-Pulsar-2-10-4.md","title":"What\u2019s New in Apache Pulsar 2.10.4","description":"The Apache Pulsar community releases version 2.10.4! 37 contributors provided improvements and bug fixes that delivered 12 commits. Thanks for all your contributions.","date":"2023-04-19T00:00:00.000Z","tags":[],"readingTime":2.425,"hasTruncateMarker":true,"authors":[{"name":"liangyepianzhou, Anonymitaet, momo-jun","key":null,"page":null}],"frontMatter":{"title":"What\u2019s New in Apache Pulsar 2.10.4","date":"2023-04-19T00:00:00.000Z","author":"liangyepianzhou, Anonymitaet, momo-jun"},"unlisted":false,"prevItem":{"title":"Announcing Apache Pulsar 3.0: The First Long-Term Support Release","permalink":"/blog/2023/05/02/announcing-apache-pulsar-3-0"},"nextItem":{"title":"Speakers and Agenda Announced for Pulsar Virtual Summit Europe 2023!","permalink":"/blog/2023/04/11/pulsar-summit-europe-2023-schedule-announced"}}')}}]);