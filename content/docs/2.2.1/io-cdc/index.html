<!doctype html>
<html class="docs-version-2.2.1" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Pulsar RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Pulsar Atom Feed"><title data-react-helmet="true">CDC Connector | Apache Pulsar</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://pulsar.apache.com/docs/2.2.1/io-cdc"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="2.2.1"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-2.2.1"><meta data-react-helmet="true" property="og:title" content="CDC Connector | Apache Pulsar"><meta data-react-helmet="true" name="description" content="Source"><meta data-react-helmet="true" property="og:description" content="Source"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://pulsar.apache.com/docs/2.2.1/io-cdc"><link data-react-helmet="true" rel="alternate" href="https://pulsar.apache.com/docs/2.2.1/io-cdc" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://pulsar.apache.com/docs/2.2.1/io-cdc" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.7e3a3d28.css">
<link rel="preload" href="/assets/js/runtime~main.0f262bb9.js" as="script">
<link rel="preload" href="/assets/js/main.3f063f0a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="tailwind navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Apache Pulsar" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.svg" alt="Apache Pulsar" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title"></b></a><a class="navbar__item navbar__link" href="/docs/2.2.1/">Docs</a><a class="navbar__item navbar__link" href="/versions">Versions</a><a class="navbar__item navbar__link" href="/download">Download</a><a class="navbar__item navbar__link" href="/docs/2.2.1/client-libraries">Clients</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">REST APIs</a><ul class="dropdown__menu"><li><a href="/admin-rest-api" rel="noopener noreferrer" class="dropdown__link"><span>Admin REST API</span></a></li><li><a href="/functions-rest-api" rel="noopener noreferrer" class="dropdown__link"><span>Functions</span></a></li><li><a href="/source-rest-api" rel="noopener noreferrer" class="dropdown__link"><span>Sources</span></a></li><li><a href="/sink-rest-api" rel="noopener noreferrer" class="dropdown__link"><span>Sinks</span></a></li><li><a href="/packages-rest-api" rel="noopener noreferrer" class="dropdown__link"><span>Packages</span></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">CLI</a><ul class="dropdown__menu"><li><a href="/pulsar-admin-cli" rel="noopener noreferrer" class="dropdown__link"><span>Pulsar Admin</span></a></li><li><a href="/pulsar-client-cli" rel="noopener noreferrer" class="dropdown__link"><span>Pulsar Client</span></a></li><li><a href="/pulsar-perf-cli" rel="noopener noreferrer" class="dropdown__link"><span>Pulsar Perf</span></a></li><li><a href="/pulsar-cli" rel="noopener noreferrer" class="dropdown__link"><span>Pulsar</span></a></li></ul></div><a class="navbar__item navbar__link" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/contact">Contact</a></li><li><a class="dropdown__link" href="/contributing">Contributing</a></li><li><a class="dropdown__link" href="/coding-guide">Coding guide</a></li><li><a class="dropdown__link" href="/events">Events</a></li><li><a href="https://twitter.com/Apache_Pulsar" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Twitter<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/apache/pulsar/wiki" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Wiki<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/apache/pulsar/issues" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Issue tracking<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://pulsar-summit.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Pulsar Summit<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a class="dropdown__link" href="/resources">Resources</a></li><li><a class="dropdown__link" href="/team">Team</a></li><li><a class="dropdown__link" href="/powered-by">Powered By</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Apache</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Foundation<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>License<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Sponsorship<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Thanks<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/security" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Security<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link" href="/docs">Previous Versions</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs">2.9.1</a></li><li><a class="dropdown__link" href="/docs/2.9.0/">2.9.0</a></li><li><a class="dropdown__link" href="/docs/2.8.0/">2.8.0</a></li><li><a class="dropdown__link" href="/docs/2.7.0/">2.7.0</a></li><li><a class="dropdown__link" href="/docs/2.6.0/">2.6.0</a></li></ul></div><a href="https://pulsar.staged.apache.org/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Old Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_iQ2x toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><main class="docMainContainer_r8cw docMainContainerEnhanced_SOUu"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Apache Pulsar<!-- --> <b>2.2.1</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/io-cdc">latest version</a></b> (<!-- -->2.9.1<!-- -->).</div></div><div class="docItemContainer_oiyr"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->2.2.1</span><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>CDC Connector</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="source">Source<a class="hash-link" href="#source" title="Direct link to heading">â€‹</a></h2><p>The CDC Source connector is used to capture change log of existing databases like MySQL, MongoDB, PostgreSQL into Pulsar.</p><p>The CDC Source connector is built on top of <a href="https://debezium.io/" target="_blank" rel="noopener noreferrer">Debezium</a>. This connector stores all data into Pulsar Cluster in a persistent, replicated and partitioned way.
This CDC Source are tested by using MySQL, and you could get more information regarding how it works at <a href="https://debezium.io/docs/connectors/mysql/" target="_blank" rel="noopener noreferrer">this link</a>.
Regarding how Debezium works, please reference to <a href="https://debezium.io/docs/tutorial/" target="_blank" rel="noopener noreferrer">Debezium tutorial</a>. It is recommended that you go through this tutorial first.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="source-configuration-options">Source Configuration Options<a class="hash-link" href="#source-configuration-options" title="Direct link to heading">â€‹</a></h3><p>The Configuration is mostly related to Debezium task config, besides this we should provides the service URL of Pulsar cluster, and topic names that used to store offset and history.</p><table><thead><tr><th>Name</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>task.class</code></td><td><code>true</code></td><td><code>null</code></td><td>A source task class that implemented in Debezium.</td></tr><tr><td><code>database.hostname</code></td><td><code>true</code></td><td><code>null</code></td><td>The address of the Database server.</td></tr><tr><td><code>database.port</code></td><td><code>true</code></td><td><code>null</code></td><td>The port number of the Database server..</td></tr><tr><td><code>database.user</code></td><td><code>true</code></td><td><code>null</code></td><td>The name of the Database user that has the required privileges.</td></tr><tr><td><code>database.password</code></td><td><code>true</code></td><td><code>null</code></td><td>The password for the Database user that has the required privileges.</td></tr><tr><td><code>database.server.id</code></td><td><code>true</code></td><td><code>null</code></td><td>The connectorâ€™s identifier that must be unique within the Database cluster and similar to Databaseâ€™s server-id configuration property.</td></tr><tr><td><code>database.server.name</code></td><td><code>true</code></td><td><code>null</code></td><td>The logical name of the Database server/cluster, which forms a namespace and is used in all the names of the Kafka topics to which the connector writes, the Kafka Connect schema names, and the namespaces of the corresponding Avro schema when the Avro Connector is used.</td></tr><tr><td><code>database.whitelist</code></td><td><code>false</code></td><td><code>null</code></td><td>A list of all databases hosted by this server that this connector will monitor. This is optional, and there are other properties for listing the databases and tables to include or exclude from monitoring.</td></tr><tr><td><code>key.converter</code></td><td><code>true</code></td><td><code>null</code></td><td>The converter provided by Kafka Connect to convert record key.</td></tr><tr><td><code>value.converter</code></td><td><code>true</code></td><td><code>null</code></td><td>The converter provided by Kafka Connect to convert record value.</td></tr><tr><td><code>database.history</code></td><td><code>true</code></td><td><code>null</code></td><td>The name of the database history class name.</td></tr><tr><td><code>database.history.pulsar.topic</code></td><td><code>true</code></td><td><code>null</code></td><td>The name of the database history topic where the connector will write and recover DDL statements. This topic is for internal use only and should not be used by consumers.</td></tr><tr><td><code>database.history.pulsar.service.url</code></td><td><code>true</code></td><td><code>null</code></td><td>Pulsar cluster service url for history topic.</td></tr><tr><td><code>pulsar.service.url</code></td><td><code>true</code></td><td><code>null</code></td><td>Pulsar cluster service URL for the offset topic used in Debezium. You can use the <code>bin/pulsar-admin --admin-url http://pulsar:8080 sources localrun --source-config-file configs/pg-pulsar-config.yaml</code> command to point to the target Pulsar cluster.</td></tr><tr><td><code>offset.storage.topic</code></td><td><code>true</code></td><td><code>null</code></td><td>Record the last committed offsets that the connector successfully completed.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_y2LR" id="configuration-example">Configuration Example<a class="hash-link" href="#configuration-example" title="Direct link to heading">â€‹</a></h3><p>Here is a configuration Json example:</p><div class="codeBlockContainer_J+bg language-$json theme-code-block"><div class="codeBlockContent_csEI $json"><pre tabindex="0" class="prism-code language-$json codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;tenant&quot;: &quot;public&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;namespace&quot;: &quot;default&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;name&quot;: &quot;debezium-kafka-source&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;className&quot;: &quot;org.apache.pulsar.io.kafka.connect.KafkaConnectSource&quot; ,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;topicName&quot;: &quot;kafka-connect-topic&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;configs&quot;:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;task.class&quot;: &quot;io.debezium.connector.mysql.MySqlConnectorTask&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;database.hostname&quot;: &quot;localhost&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;database.port&quot;: &quot;3306&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;database.user&quot;: &quot;debezium&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;database.password&quot;: &quot;dbz&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;database.server.id&quot;: &quot;184054&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;database.server.name&quot;: &quot;dbserver1&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;database.whitelist&quot;: &quot;inventory&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;database.history&quot;: &quot;org.apache.pulsar.io.debezium.PulsarDatabaseHistory&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;database.history.pulsar.topic&quot;: &quot;history-topic&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;database.history.pulsar.service.url&quot;: &quot;pulsar://127.0.0.1:6650&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;key.converter&quot;: &quot;org.apache.kafka.connect.json.JsonConverter&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;value.converter&quot;: &quot;org.apache.kafka.connect.json.JsonConverter&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;pulsar.service.url&quot;: &quot;pulsar://127.0.0.1:6650&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;offset.storage.topic&quot;: &quot;offset-topic&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;archive&quot;: &quot;connectors/pulsar-io-kafka-connect-adaptor-2.3.0-SNAPSHOT.nar&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You could also find the yaml example in this <a href="https://github.com/apache/pulsar/blob/master/pulsar-io/kafka-connect-adaptor/src/main/resources/debezium-mysql-source-config.yaml" target="_blank" rel="noopener noreferrer">file</a>, which has similar content below:</p><div class="codeBlockContainer_J+bg language-$yaml theme-code-block"><div class="codeBlockContent_csEI $yaml"><pre tabindex="0" class="prism-code language-$yaml codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tenant: &quot;public&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">namespace: &quot;default&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">name: &quot;debezium-kafka-source&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">topicName: &quot;kafka-connect-topic&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">archive: &quot;connectors/pulsar-io-kafka-connect-adaptor-2.3.0-SNAPSHOT.nar&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">##autoAck: true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">parallelism: 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">configs:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ## sourceTask</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  task.class: &quot;io.debezium.connector.mysql.MySqlConnectorTask&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ## config for mysql, docker image: debezium/example-mysql:0.8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  database.hostname: &quot;localhost&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  database.port: &quot;3306&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  database.user: &quot;debezium&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  database.password: &quot;dbz&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  database.server.id: &quot;184054&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  database.server.name: &quot;dbserver1&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  database.whitelist: &quot;inventory&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  database.history: &quot;org.apache.pulsar.io.debezium.PulsarDatabaseHistory&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  database.history.pulsar.topic: &quot;history-topic&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  database.history.pulsar.service.url: &quot;pulsar://127.0.0.1:6650&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ## KEY_CONVERTER_CLASS_CONFIG, VALUE_CONVERTER_CLASS_CONFIG</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  key.converter: &quot;org.apache.kafka.connect.json.JsonConverter&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  value.converter: &quot;org.apache.kafka.connect.json.JsonConverter&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ## PULSAR_SERVICE_URL_CONFIG</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  pulsar.service.url: &quot;pulsar://127.0.0.1:6650&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ## OFFSET_STORAGE_TOPIC_CONFIG</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  offset.storage.topic: &quot;offset-topic&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="usage-example">Usage example<a class="hash-link" href="#usage-example" title="Direct link to heading">â€‹</a></h3><p>Here is a simple example to store MySQL change data using above example config.</p><ul><li>Start a MySQL server with an example database, from which Debezium can capture changes.</li></ul><div class="codeBlockContainer_J+bg language-$bash theme-code-block"><div class="codeBlockContent_csEI $bash"><pre tabindex="0" class="prism-code language-$bash codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> docker run -it --rm --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=debezium -e MYSQL_USER=mysqluser -e MYSQL_PASSWORD=mysqlpw debezium/example-mysql:0.8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>Start a Pulsar service locally in standalone mode.</li></ul><div class="codeBlockContainer_J+bg language-$bash theme-code-block"><div class="codeBlockContent_csEI $bash"><pre tabindex="0" class="prism-code language-$bash codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> bin/pulsar standalone</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>Start pulsar debezium connector, with local run mode, and using above yaml config file. Please make sure that the nar file is available as configured in path <code>connectors/pulsar-io-kafka-connect-adaptor-2.3.0-SNAPSHOT.nar</code>.</li></ul><div class="codeBlockContainer_J+bg language-$bash theme-code-block"><div class="codeBlockContent_csEI $bash"><pre tabindex="0" class="prism-code language-$bash codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> bin/pulsar-admin source localrun  --sourceConfigFile debezium-mysql-source-config.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>Subscribe the topic for table <code>inventory.products</code>.</li></ul><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> bin/pulsar-client consume -s &quot;sub-products&quot; public/default/dbserver1.inventory.products -n 0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>start a MySQL cli docker connector, and use it we could change to the table <code>products</code> in MySQL server.</li></ul><div class="codeBlockContainer_J+bg language-$bash theme-code-block"><div class="codeBlockContent_csEI $bash"><pre tabindex="0" class="prism-code language-$bash codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$docker run -it --rm --name mysqlterm --link mysql --rm mysql:5.7 sh -c &#x27;exec mysql -h&quot;$MYSQL_PORT_3306_TCP_ADDR&quot; -P&quot;$MYSQL_PORT_3306_TCP_PORT&quot; -uroot -p&quot;$MYSQL_ENV_MYSQL_ROOT_PASSWORD&quot;&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This command will pop out MySQL cli, in this cli, we could do a change in table products, use commands below to change the name of 2 items in table products:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql&gt; use inventory;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql&gt; show tables;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql&gt; SELECT * FROM  products ;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql&gt; UPDATE products SET name=&#x27;1111111111&#x27; WHERE id=101;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql&gt; UPDATE products SET name=&#x27;1111111111&#x27; WHERE id=107;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>In above subscribe topic terminal tab, we could find that 2 changes has been kept into products topic.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/apache/pulsar/edit/master/site2/website-next/versioned_docs/version-2.2.1/io-cdc.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#source" class="table-of-contents__link toc-highlight">Source</a><ul><li><a href="#source-configuration-options" class="table-of-contents__link toc-highlight">Source Configuration Options</a></li><li><a href="#configuration-example" class="table-of-contents__link toc-highlight">Configuration Example</a></li><li><a href="#usage-example" class="table-of-contents__link toc-highlight">Usage example</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Inc.Copyright Â© 2021 The Apache Software Foundation. All Rights Reserved. Apache, Apache Pulsar and the Apache feather logo are trademarks of The Apache Software Foundation.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.0f262bb9.js"></script>
<script src="/assets/js/main.3f063f0a.js"></script>
</body>
</html>