<!doctype html>
<html class="docs-version-2.8.2" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Pulsar RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Pulsar Atom Feed"><title data-react-helmet="true">Authentication using Athenz | Apache Pulsar</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://pulsar.apache.com/docs/2.8.2/security-athenz"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="2.8.2"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-2.8.2"><meta data-react-helmet="true" property="og:title" content="Authentication using Athenz | Apache Pulsar"><meta data-react-helmet="true" name="description" content="Athenz is a role-based authentication/authorization system. In Pulsar, you can use Athenz role tokens (also known as z-tokens) to establish the identify of the client."><meta data-react-helmet="true" property="og:description" content="Athenz is a role-based authentication/authorization system. In Pulsar, you can use Athenz role tokens (also known as z-tokens) to establish the identify of the client."><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://pulsar.apache.com/docs/2.8.2/security-athenz"><link data-react-helmet="true" rel="alternate" href="https://pulsar.apache.com/docs/2.8.2/security-athenz" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://pulsar.apache.com/docs/2.8.2/security-athenz" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.7e3a3d28.css">
<link rel="preload" href="/assets/js/runtime~main.9b3e68a4.js" as="script">
<link rel="preload" href="/assets/js/main.68a1441a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="tailwind navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Apache Pulsar" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.svg" alt="Apache Pulsar" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title"></b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/2.8.2/">Docs</a><a class="navbar__item navbar__link" href="/versions">Versions</a><a class="navbar__item navbar__link" href="/download">Download</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/2.8.2/client-libraries">Clients</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">REST APIs</a><ul class="dropdown__menu"><li><a href="/admin-rest-api" rel="noopener noreferrer" class="dropdown__link"><span>Admin REST API</span></a></li><li><a href="/functions-rest-api" rel="noopener noreferrer" class="dropdown__link"><span>Functions</span></a></li><li><a href="/source-rest-api" rel="noopener noreferrer" class="dropdown__link"><span>Sources</span></a></li><li><a href="/sink-rest-api" rel="noopener noreferrer" class="dropdown__link"><span>Sinks</span></a></li><li><a href="/packages-rest-api" rel="noopener noreferrer" class="dropdown__link"><span>Packages</span></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">CLI</a><ul class="dropdown__menu"><li><a href="/pulsar-admin-cli" rel="noopener noreferrer" class="dropdown__link"><span>Pulsar Admin</span></a></li><li><a href="/pulsar-client-cli" rel="noopener noreferrer" class="dropdown__link"><span>Pulsar Client</span></a></li><li><a href="/pulsar-perf-cli" rel="noopener noreferrer" class="dropdown__link"><span>Pulsar Perf</span></a></li><li><a href="/pulsar-cli" rel="noopener noreferrer" class="dropdown__link"><span>Pulsar</span></a></li></ul></div><a class="navbar__item navbar__link" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/contact">Contact</a></li><li><a class="dropdown__link" href="/contributing">Contributing</a></li><li><a class="dropdown__link" href="/coding-guide">Coding guide</a></li><li><a class="dropdown__link" href="/events">Events</a></li><li><a href="https://twitter.com/Apache_Pulsar" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Twitter<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/apache/pulsar/wiki" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Wiki<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/apache/pulsar/issues" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Issue tracking<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://pulsar-summit.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Pulsar Summit<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a class="dropdown__link" href="/resources">Resources</a></li><li><a class="dropdown__link" href="/team">Team</a></li><li><a class="dropdown__link" href="/powered-by">Powered By</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Apache</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Foundation<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>License<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Sponsorship<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Thanks<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/security" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Security<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link" href="/docs">Previous Versions</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs">2.9.1</a></li><li><a class="dropdown__link" href="/docs/2.9.0/">2.9.0</a></li><li><a class="dropdown__link" href="/docs/2.8.0/">2.8.0</a></li><li><a class="dropdown__link" href="/docs/2.7.0/">2.7.0</a></li><li><a class="dropdown__link" href="/docs/2.6.0/">2.6.0</a></li></ul></div><a href="https://pulsar.staged.apache.org/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Old Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_iQ2x toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/2.8.2/">Get Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/2.8.2/concepts-overview">Concepts and Architecture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/2.8.2/schema-get-started">Pulsar Schema</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/2.8.2/functions-overview">Pulsar Functions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/2.8.2/io-overview">Pulsar IO</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/2.8.2/sql-overview">Pulsar SQL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/2.8.2/tiered-storage-overview">Tiered Storage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/2.8.2/txn-why">Transactions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/2.8.2/helm-overview">Kubernetes (Helm)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/2.8.2/deploy-aws">Deployment</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/2.8.2/administration-zk-bk">Administration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/docs/2.8.2/security-overview">Security</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.8.2/security-overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.8.2/security-tls-transport">Transport Encryption using TLS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.8.2/security-tls-authentication">Authentication using TLS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.8.2/security-tls-keystore">Using TLS with KeyStore configure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.8.2/security-jwt">Authentication using JWT</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/2.8.2/security-athenz">Authentication using Athenz</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.8.2/security-kerberos">Authentication using Kerberos</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.8.2/security-oauth2">Authentication using OAuth 2.0 access tokens</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.8.2/security-authorization">Authorization and ACLs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.8.2/security-encryption">End-to-End Encryption</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.8.2/security-extending">Extending</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.8.2/security-bouncy-castle">Bouncy Castle Providers</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/2.8.2/performance-pulsar-perf">Performance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/2.8.2/client-libraries">Client Libraries</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/2.8.2/admin-api-overview">Admin API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/2.8.2/adaptors-kafka">Adaptors</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/2.8.2/cookbooks-compaction">Cookbooks</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/2.8.2/develop-tools">Development</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/2.8.2/reference-terminology">Reference</a></div></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Apache Pulsar<!-- --> <b>2.8.2</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/security-athenz">latest version</a></b> (<!-- -->2.9.1<!-- -->).</div></div><div class="docItemContainer_oiyr"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->2.8.2</span><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Authentication using Athenz</h1></header><p><a href="https://github.com/AthenZ/athenz" target="_blank" rel="noopener noreferrer">Athenz</a> is a role-based authentication/authorization system. In Pulsar, you can use Athenz role tokens (also known as <em>z-tokens</em>) to establish the identify of the client.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="athenz-authentication-settings">Athenz authentication settings<a class="hash-link" href="#athenz-authentication-settings" title="Direct link to heading">â€‹</a></h2><p>A <a href="https://github.com/AthenZ/athenz/blob/master/docs/decent_authz_flow.md" target="_blank" rel="noopener noreferrer">decentralized Athenz system</a> contains an <a href="https://github.com/AthenZ/athenz/blob/master/docs/setup_zms.md" target="_blank" rel="noopener noreferrer">authori<strong>Z</strong>ation <strong>M</strong>anagement <strong>S</strong>ystem</a> (ZMS) server and an <a href="https://github.com/AthenZ/athenz/blob/master/docs/setup_zts" target="_blank" rel="noopener noreferrer">authori<strong>Z</strong>ation <strong>T</strong>oken <strong>S</strong>ystem</a> (ZTS) server.</p><p>To begin, you need to set up Athenz service access control. You need to create domains for the <em>provider</em> (which provides some resources to other services with some authentication/authorization policies) and the <em>tenant</em> (which is provisioned to access some resources in a provider). In this case, the provider corresponds to the Pulsar service itself and the tenant corresponds to each application using Pulsar (typically, a <a href="/docs/2.8.2/reference-terminology#tenant">tenant</a> in Pulsar).</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="create-the-tenant-domain-and-service">Create the tenant domain and service<a class="hash-link" href="#create-the-tenant-domain-and-service" title="Direct link to heading">â€‹</a></h3><p>On the <a href="/docs/2.8.2/reference-terminology#tenant">tenant</a> side, you need to do the following things:</p><ol><li>Create a domain, such as <code>shopping</code></li><li>Generate a private/public key pair</li><li>Create a service, such as <code>some_app</code>, on the domain with the public key</li></ol><p>Note that you need to specify the private key generated in step 2 when the Pulsar client connects to the <a href="/docs/2.8.2/reference-terminology#broker">broker</a> (see client configuration examples for <a href="/docs/2.8.2/client-libraries-java#tls-authentication">Java</a> and <a href="/docs/2.8.2/client-libraries-cpp#tls-authentication">C++</a>).</p><p>For more specific steps involving the Athenz UI, refer to <a href="https://github.com/AthenZ/athenz/blob/master/docs/example_service_athenz_setup.md#client-tenant-domain" target="_blank" rel="noopener noreferrer">Example Service Access Control Setup</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="create-the-provider-domain-and-add-the-tenant-service-to-some-role-members">Create the provider domain and add the tenant service to some role members<a class="hash-link" href="#create-the-provider-domain-and-add-the-tenant-service-to-some-role-members" title="Direct link to heading">â€‹</a></h3><p>On the provider side, you need to do the following things:</p><ol><li>Create a domain, such as <code>pulsar</code></li><li>Create a role</li><li>Add the tenant service to members of the role</li></ol><p>Note that you can specify any action and resource in step 2 since they are not used on Pulsar. In other words, Pulsar uses the Athenz role token only for authentication, <em>not</em> for authorization.</p><p>For more specific steps involving UI, refer to <a href="https://github.com/AthenZ/athenz/blob/master/docs/example_service_athenz_setup.md#server-provider-domain" target="_blank" rel="noopener noreferrer">Example Service Access Control Setup</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="configure-the-broker-for-athenz">Configure the broker for Athenz<a class="hash-link" href="#configure-the-broker-for-athenz" title="Direct link to heading">â€‹</a></h2><blockquote><h3 class="anchor anchorWithStickyNavbar_y2LR" id="tls-encryption">TLS encryption<a class="hash-link" href="#tls-encryption" title="Direct link to heading">â€‹</a></h3><p>Note that when you are using Athenz as an authentication provider, you had better use TLS encryption
as it can protect role tokens from being intercepted and reused. (for more details involving TLS encryption see <a href="https://github.com/AthenZ/athenz/blob/master/docs/data_model" target="_blank" rel="noopener noreferrer">Architecture - Data Model</a>).</p></blockquote><p>In the <code>conf/broker.conf</code> configuration file in your Pulsar installation, you need to provide the class name of the Athenz authentication provider as well as a comma-separated list of provider domain names.</p><div class="codeBlockContainer_J+bg language-properties theme-code-block"><div class="codeBlockContent_csEI properties"><pre tabindex="0" class="prism-code language-properties codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Add the Athenz auth provider</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">authenticationEnabled=true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">authorizationEnabled=true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">authenticationProviders=org.apache.pulsar.broker.authentication.AuthenticationProviderAthenz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">athenzDomainNames=pulsar</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Enable TLS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tlsEnabled=true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tlsCertificateFilePath=/path/to/broker-cert.pem</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tlsKeyFilePath=/path/to/broker-key.pem</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Authentication settings of the broker itself. Used when the broker connects to other brokers, either in same or other clusters</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">brokerClientAuthenticationPlugin=org.apache.pulsar.client.impl.auth.AuthenticationAthenz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">brokerClientAuthenticationParameters={&quot;tenantDomain&quot;:&quot;shopping&quot;,&quot;tenantService&quot;:&quot;some_app&quot;,&quot;providerDomain&quot;:&quot;pulsar&quot;,&quot;privateKey&quot;:&quot;file:///path/to/private.pem&quot;,&quot;keyId&quot;:&quot;v1&quot;}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>A full listing of parameters is available in the <code>conf/broker.conf</code> file, you can also find the default
values for those parameters in <a href="/docs/2.8.2/reference-configuration#broker">Broker Configuration</a>.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_y2LR" id="configure-clients-for-athenz">Configure clients for Athenz<a class="hash-link" href="#configure-clients-for-athenz" title="Direct link to heading">â€‹</a></h2><p>For more information on Pulsar client authentication using Athenz, see the following language-specific docs:</p><ul><li><a href="/docs/2.8.2/client-libraries-java#athenz">Java client</a></li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="configure-cli-tools-for-athenz">Configure CLI tools for Athenz<a class="hash-link" href="#configure-cli-tools-for-athenz" title="Direct link to heading">â€‹</a></h2><p><a href="/docs/2.8.2/reference-cli-tools">Command-line tools</a> like <a href="/docs/2.8.2/reference-pulsar-admin"><code>pulsar-admin</code></a>, <a href="/docs/2.8.2/reference-cli-tools#pulsar-perf"><code>pulsar-perf</code></a>, and <a href="/docs/2.8.2/reference-cli-tools#pulsar-client"><code>pulsar-client</code></a> use the <code>conf/client.conf</code> config file in a Pulsar installation.</p><p>You need to add the following authentication parameters to the <code>conf/client.conf</code> config file to use Athenz with CLI tools of Pulsar:</p><div class="codeBlockContainer_J+bg language-properties theme-code-block"><div class="codeBlockContent_csEI properties"><pre tabindex="0" class="prism-code language-properties codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># URL for the broker</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">serviceUrl=https://broker.example.com:8443/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Set Athenz auth plugin and its parameters</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">authPlugin=org.apache.pulsar.client.impl.auth.AuthenticationAthenz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">authParams={&quot;tenantDomain&quot;:&quot;shopping&quot;,&quot;tenantService&quot;:&quot;some_app&quot;,&quot;providerDomain&quot;:&quot;pulsar&quot;,&quot;privateKey&quot;:&quot;file:///path/to/private.pem&quot;,&quot;keyId&quot;:&quot;v1&quot;}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Enable TLS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">useTls=true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tlsAllowInsecureConnection=false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tlsTrustCertsFilePath=/path/to/cacert.pem</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/apache/pulsar/edit/master/site2/website-next/versioned_docs/version-2.8.2/security-athenz.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/2.8.2/security-jwt"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Authentication using JWT</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/2.8.2/security-kerberos"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Authentication using Kerberos</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#athenz-authentication-settings" class="table-of-contents__link toc-highlight">Athenz authentication settings</a><ul><li><a href="#create-the-tenant-domain-and-service" class="table-of-contents__link toc-highlight">Create the tenant domain and service</a></li><li><a href="#create-the-provider-domain-and-add-the-tenant-service-to-some-role-members" class="table-of-contents__link toc-highlight">Create the provider domain and add the tenant service to some role members</a></li></ul></li><li><a href="#configure-the-broker-for-athenz" class="table-of-contents__link toc-highlight">Configure the broker for Athenz</a></li><li><a href="#configure-clients-for-athenz" class="table-of-contents__link toc-highlight">Configure clients for Athenz</a></li><li><a href="#configure-cli-tools-for-athenz" class="table-of-contents__link toc-highlight">Configure CLI tools for Athenz</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Inc.Copyright Â© 2021 The Apache Software Foundation. All Rights Reserved. Apache, Apache Pulsar and the Apache feather logo are trademarks of The Apache Software Foundation.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.9b3e68a4.js"></script>
<script src="/assets/js/main.68a1441a.js"></script>
</body>
</html>