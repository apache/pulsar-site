<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-contribute docs-version-current docs-doc-page docs-doc-id-release-process" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Release process | Apache Pulsar</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://pulsar.apache.org/img/pulsar-social-media-card.png"><meta data-rh="true" name="twitter:image" content="https://pulsar.apache.org/img/pulsar-social-media-card.png"><meta data-rh="true" property="og:url" content="https://pulsar.apache.org/contribute/release-process/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-contribute-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-contribute-current"><meta data-rh="true" property="og:title" content="Release process | Apache Pulsar"><meta data-rh="true" name="description" content="This page contains instructions for Pulsar committers on how to perform a release."><meta data-rh="true" property="og:description" content="This page contains instructions for Pulsar committers on how to perform a release."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://pulsar.apache.org/contribute/release-process/"><link data-rh="true" rel="alternate" href="https://pulsar.apache.org/contribute/release-process/" hreflang="en"><link data-rh="true" rel="alternate" href="https://pulsar.apache.org/contribute/release-process/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://WK2YL0SALL-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Release process","item":"https://pulsar.apache.org/contribute/release-process"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Pulsar RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Pulsar Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="Apache Pulsar" href="/opensearch.xml">







<link rel="stylesheet" href="/css/katex-0.13.24.min.css" media="print" onload="this.media=&#39;all&#39;">
<script src="/js/sine-waves.min.js" async></script>
<script src="/js/matomo-agent.js"></script><link rel="stylesheet" href="/assets/css/styles.8505adb1.css">
<script src="/assets/js/runtime~main.59bcfe04.js" defer="defer"></script>
<script src="/assets/js/main.e342893f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style="background-color:#282826;color:#fff" role="banner"><div class="content_knG7 announcementBarContent_xLdY">
    <a class="announcement-bar" href="/blog/2025/09/09/announcing-apache-pulsar-4-1/" target="_blank">
      <div class="announcement-bar__content">
        <!-- <svg class="announcement-bar__icon">
          
<svg viewBox="0 0 33 32" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.5 19.6001H16.1L15.3 29.2001L26.5 12.4H17.06L18.1 2.80005L6.5 19.6001Z" stroke="#F7F7F7" stroke-width="1.5" stroke-linejoin="round"/>
</svg>

        </svg> -->

        <span>
          ✨ Apache Pulsar 4.1 is here! ✨
        </span>

        <svg class="announcement-bar__icon">
          
<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="20" height="20" transform="translate(6 6)" fill="white" fill-opacity="0.01"/>
<path d="M17.6667 10.1667L23.5 16.0001M23.5 16.0001L17.6667 21.8334M23.5 16.0001L8.5 16.0001" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
<rect x="0.5" y="0.5" width="31" height="31" rx="15.5" stroke="white"/>
</svg>

        </svg>
      </div>
    </a>
  </div></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-black.svg" alt="Apache Pulsar logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="25" width="127"><img src="/img/logo-black.svg" alt="Apache Pulsar logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="25" width="127"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Get Started</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/4.1.x/concepts-overview/">Concepts</a></li><li><a class="dropdown__link" href="/docs/4.1.x/">Quickstart</a></li><li><a class="dropdown__link" href="/ecosystem/">Ecosystem</a></li></ul></div><a class="navbar__item navbar__link" href="/docs/4.1.x/">Docs</a><a class="navbar__item navbar__link" href="/features/">Features</a><a class="navbar__item navbar__link" href="/use-cases/">Use Cases</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link community-dropdown">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link scroll-link scroll-welcome" id="scroll-welcome" href="/community/">Welcome</a></li><li><a class="dropdown__link scroll-link scroll-discussions" id="scroll-discussions" href="/community/#section-discussions">Discussions</a></li><li><a class="dropdown__link scroll-link" id="scroll-governance" href="/community/#section-governance">Governance</a></li><li><a class="dropdown__link scroll-link" id="scroll-community" href="/community/#section-community">Meet the Community</a></li><li><a class="dropdown__link scroll-link" id="scroll-contribute" href="/community/#section-contribute">Contribute</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/contribute/">Contribution Guide</a></li><li><a href="https://github.com/apache/pulsar/wiki" target="_blank" rel="noopener noreferrer" class="dropdown__link">Wiki</a></li><li><a href="https://github.com/apache/pulsar/issues" target="_blank" rel="noopener noreferrer" class="dropdown__link">Issue Tracking</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/blog/">Blog</a></li><li><a class="dropdown__link" href="/books/">Books</a></li><li><a class="dropdown__link" href="/case-studies/">Case Studies</a></li><li><a class="dropdown__link" href="/articles/">Articles</a></li><li><a class="dropdown__link" href="/presentations/">Presentations</a></li><li><a class="dropdown__link" href="/events/">Events</a></li></ul></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link navbar_download_button" href="/download/">Download</a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_mhZE"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/contribute/">About</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/contribute/setup-building/">Getting started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/contribute/develop-coding-conventions/">Development</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/contribute/testing-licenses/">Testing and CI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/contribute/site-intro/">Website</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/contribute/document-intro/">Documentation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/contribute/release-policy/">Releases</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contribute/release-policy/">Release policy</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" tabindex="0" href="/contribute/release-process/">Release process</a><button aria-label="Collapse sidebar category &#x27;Release process&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/contribute/create-gpg-keys/">Creating GPG keys</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/contribute/release-note-guide/">Writing release notes</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contribute/maintenance-process/">Cherry-picking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contribute/validate-release-candidate/">Validating release candidates</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/contribute/become-core-developer/">Committers</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Releases</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Release process</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Release process</h1></header><p>This page contains instructions for Pulsar committers on how to perform a release.</p>
<p>The term feature/patch releases used throughout this document is defined as follows:</p>
<ul>
<li>Feature releases contain 2.10.0, 2.11.0, 3.0.0, and so on.</li>
<li>Patch releases refer to bug-fix releases, such as 2.10.1, 2.10.2, and so on.</li>
<li>Preview release refer to LTS release preview releases that happen in the releasing of a LTS version.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="preparation">Preparation<a href="#preparation" class="hash-link" aria-label="Direct link to Preparation" title="Direct link to Preparation">​</a></h2>
<p>Open a discussion on <a href="mailto:dev@pulsar.apache.org" target="_blank" rel="noopener noreferrer">dev@pulsar.apache.org</a> to notify others that you volunteer to be the release manager of a specific release. If there are no disagreements, you can start the release process.</p>
<p>For LTS and feature releases, you should create a new branch named <code>branch-X.Y</code> once all PRs with the X.Y.0 milestone are merged. If some PRs with the X.Y.0 milestone are still working in progress and might take much time to complete, you can move them to the next milestone if they are not important. In this case, you&#x27;d better notify the author in the PR.</p>
<p>For preview releases of a LTS release, a branch <code>branch-X.0-preview</code> is created. This branch will is used to hold the commit to change the version to the preview version. Preview releases will be tagged in this branch.</p>
<p>For patch releases, if there are no disagreements, you should cherry-pick all merged PRs labeled with <code>release/X.Y.Z</code> into <code>branch-X.Y</code>. After these PRs are cherry-picked, you should add the <code>cherry-picked/branch-X.Y</code> labels.</p>
<p>Sometimes some PRs cannot be cherry-picked cleanly, you might need to create a separate PR and move the <code>release/X.Y.Z</code> label from the original PR to it. In this case, you can ask the author to help create the new PR.</p>
<p>For PRs that are still open, you can choose to delay them to the next release or ping others to review so that they can be merged.</p>
<p>If you haven&#x27;t already done it, <a href="/contribute/create-gpg-keys/">create and publish the GPG key</a>. You will use the key to sign the release artifacts.</p>
<p>Before you start the next release steps, make sure you have installed these software:</p>
<ul>
<li>Amazon Corretto OpenJDK<!-- -->
<ul>
<li>JDK 21 for Pulsar version &gt;= 3.3<!-- -->
<ul>
<li>code will be compiled for Java 17 with Java 21</li>
<li>Pulsar docker images are running Java 21 since 3.3.0</li>
</ul>
</li>
<li>JDK 17 for Pulsar version &gt;= 2.11</li>
<li>JDK 11 for earlier versions</li>
</ul>
</li>
<li>Maven 3.9.9 (most recent stable Maven 3.9.x version)<!-- -->
<ul>
<li>Install using <code>sdkman i maven 3.9.9</code></li>
</ul>
</li>
<li>Zip</li>
</ul>
<p>Please refer to <a href="/contribute/setup-buildtools/">&quot;Setting up JDKs and Maven using SDKMAN&quot;</a> for details on how to install JDKs and Maven using SDKMAN.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prepare-the-release-branch">Prepare the release branch<a href="#prepare-the-release-branch" class="hash-link" aria-label="Direct link to Prepare the release branch" title="Direct link to Prepare the release branch">​</a></h2>
<p>Before starting a release, besides handling the PRs, it&#x27;s necessary to check that there aren&#x27;t open critical security vulnerabilities in the dependencies. This can be checked from GitHub Security Alerts and the <a href="https://github.com/apache/pulsar/actions/workflows/ci-owasp-dependency-check.yaml" target="_blank" rel="noopener noreferrer">OWASP Dependency Check workflow run logs</a>.</p>
<p>In addition, it&#x27;s useful to check whether there&#x27;s <a href="https://netty.io/news/index.html" target="_blank" rel="noopener noreferrer">a new release of Netty available</a> with important fixes.</p>
<p>To verify the release branch is not broken, you should trigger a Pulsar CI builds for the <a href="https://github.com/apache/pulsar/actions/workflows/pulsar-ci.yaml" target="_blank" rel="noopener noreferrer">pulsar-ci.yaml</a> and <a href="https://github.com/apache/pulsar/actions/workflows/pulsar-ci-flaky.yaml" target="_blank" rel="noopener noreferrer">pulsar-ci-flaky.yaml</a> workflows. The builds must pass before a release is performed.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="env-vars">Set environment variables to be used across the commands<a href="#env-vars" class="hash-link" aria-label="Direct link to Set environment variables to be used across the commands" title="Direct link to Set environment variables to be used across the commands">​</a></h2>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">VERSION_RC</span><span class="token operator">=</span><span class="token number">4.0</span><span class="token plain">.7-candidate-1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">VERSION_WITHOUT_RC</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${VERSION_RC</span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">%</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">-candidate-*}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">NEXT_VERSION_WITHOUT_RC</span><span class="token operator">=</span><span class="token number">4.0</span><span class="token plain">.8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">VERSION_BRANCH</span><span class="token operator">=</span><span class="token plain">branch-4.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">UPSTREAM_REMOTE</span><span class="token operator">=</span><span class="token plain">origin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">SDKMAN_JAVA_VERSION</span><span class="token operator">=</span><span class="token number">21</span><br></span></code></pre></div></div>
<p>for 3.x releases, use Java 17:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># for 3.x releases, use Java 17 instead of Java 21</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">SDKMAN_JAVA_VERSION</span><span class="token operator">=</span><span class="token number">17</span><br></span></code></pre></div></div>
<p>Example for preview releases:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">VERSION_RC</span><span class="token operator">=</span><span class="token number">4.0</span><span class="token plain">.0-preview.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">VERSION_WITHOUT_RC</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${VERSION_RC</span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">%</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">-candidate-*}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">VERSION_BRANCH</span><span class="token operator">=</span><span class="token plain">branch-4.0-preview</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">UPSTREAM_REMOTE</span><span class="token operator">=</span><span class="token plain">origin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">SDKMAN_JAVA_VERSION</span><span class="token operator">=</span><span class="token number">21</span><br></span></code></pre></div></div>
<p>Set your ASF user id</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">APACHE_USER</span><span class="token operator">=</span><span class="token operator">&lt;</span><span class="token plain">your ASF userid</span><span class="token operator">&gt;</span><br></span></code></pre></div></div>
<p>In addition, you will need to set <code>PULSAR_PATH</code> to point to the cleanly checked out working directory for the release branch.</p>
<p>If you run into problems with GPG signing set this</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">GPG_TTY</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">tty</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><br></span></code></pre></div></div>
<p>For some commands, a template is copied to the clipboard using <code>pbcopy</code>.
This is already available on MacOS. For Linux, create a shell alias:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># Linux only</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># install xsel if it is missing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">apt</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> xsel</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># create alias pbcopy for copying stdin to clipboard</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">pbcopy</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;xsel --clipboard --input&quot;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-release-candidate">Create a release candidate<a href="#create-a-release-candidate" class="hash-link" aria-label="Direct link to Create a release candidate" title="Direct link to Create a release candidate">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-release-branch">Create the release branch<a href="#create-the-release-branch" class="hash-link" aria-label="Direct link to Create the release branch" title="Direct link to Create the release branch">​</a></h3>
<p>We are going to create a release branch where the tag will be generated and where new fixes will be applied as part of the maintenance for the release.</p>
<p>The branch needs only to be created for feature releases, and not for patch releases like <code>3.3.2</code>. For patch releases, go to the next step.</p>
<p>For example, when working on <code>3.3.0</code> release, the branch <code>branch-3.3</code> will be created; but for <code>3.3.1</code>, the existing <code>branch-3.3</code> will be used.</p>
<p>It is recommended to create a fresh clone of the repository to avoid any local files interfering in the process:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> clone https://github.com/apache/pulsar</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> pulsar</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">PULSAR_PATH</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable builtin class-name" style="color:rgb(189, 147, 249);font-style:italic">pwd</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> checkout </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-b</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_BRANCH</span><span class="token plain"> origin/master</span><br></span></code></pre></div></div>
<p>Alternatively, you can use a git workspace to create a new, clean directory on your machine without needing to re-download the project.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> worktree </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">/pulsar-release-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_BRANCH</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_BRANCH</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">/pulsar-release-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_BRANCH</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">PULSAR_PATH</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable builtin class-name" style="color:rgb(189, 147, 249);font-style:italic">pwd</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><br></span></code></pre></div></div>
<p>if you get an error that the branch is already checked out, go to that directory detach it from the branch. After this the above command should succeed</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> checkout </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--detach</span><span class="token plain"> HEAD</span><br></span></code></pre></div></div>
<p>After the release, you can cleanup the worktree in the main repository directory</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> worktree remove </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">/pulsar-release-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_BRANCH</span><br></span></code></pre></div></div>
<p>If you created a new branch, update the <a href="https://github.com/apache/pulsar/blob/master/.github/workflows/ci-owasp-dependency-check.yaml" target="_blank" rel="noopener noreferrer">CI - OWASP Dependency Check</a> workflow so that it will run on the new branch. Note that you should also remove the branches for previous Pulsar versions that are no longer <a href="https://pulsar.apache.org/contribute/release-policy/#supported-versions" target="_blank" rel="noopener noreferrer">supported for security updates</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cherry-picking-changes-scheduled-for-the-release">Cherry-picking changes scheduled for the release<a href="#cherry-picking-changes-scheduled-for-the-release" class="hash-link" aria-label="Direct link to Cherry-picking changes scheduled for the release" title="Direct link to Cherry-picking changes scheduled for the release">​</a></h3>
<p>Please read the <a href="/contribute/maintenance-process/">separate guide about maintenance tasks and cherry-picking</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-github-label-for-the-next-release-and-move-prs-labeled-with-the-current-release-to-the-new-label">Create a GitHub label for the next release and move PRs labeled with the current release to the new label<a href="#create-a-github-label-for-the-next-release-and-move-prs-labeled-with-the-current-release-to-the-new-label" class="hash-link" aria-label="Direct link to Create a GitHub label for the next release and move PRs labeled with the current release to the new label" title="Direct link to Create a GitHub label for the next release and move PRs labeled with the current release to the new label">​</a></h3>
<p>In the previous cherry-picking step, all PRs labeled with the current release were cherry-picked to the release branch.</p>
<p>Now, we need to create a new label for the next release. From now on, PRs should be labeled with the new release label instead of the current release label.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">gh label create </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;release/</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$NEXT_VERSION_WITHOUT_RC</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--color</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;#1D76DB&quot;</span><br></span></code></pre></div></div>
<p>If there are any PRs that are still labeled with the current release label, you need to move them to the new release label. Please check the <a href="/contribute/maintenance-process/">cherry-picking guide</a> to find out how to search for them.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-project-version-and-tag">Update project version and tag<a href="#update-project-version-and-tag" class="hash-link" aria-label="Direct link to Update project version and tag" title="Direct link to Update project version and tag">​</a></h3>
<p>During the release process, you are going to initially create &quot;candidate&quot; tags, that after verification and approval will get promoted to the &quot;real&quot; final tag.</p>
<p>In this process, the maven version of the project will always be the final one.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># Bump to the release version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$PULSAR_PATH</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">./src/set-project-version.sh </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Commit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> commit </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-m</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Release </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-a</span><br></span></code></pre></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># Create a &quot;candidate&quot; tag</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> tag </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-u</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$APACHE_USER</span><span class="token plain">@apache.org </span><span class="token function" style="color:rgb(80, 250, 123)">v</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-m</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Release </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Verify that you signed your tag before pushing it:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> tag </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-v</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">v</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Push both the branch and the tag to Github repo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> push </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$UPSTREAM_REMOTE</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_BRANCH</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> push </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$UPSTREAM_REMOTE</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">v</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><br></span></code></pre></div></div>
<p>If there&#x27;s a need to restart the release with more commits, you can delete the tag.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># only if you restart the release before it has been published for voting. Don&#x27;t run this after that!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># delete local tag</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> tag </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-d</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">v</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># delete tag in remote</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> push </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$UPSTREAM_REMOTE</span><span class="token plain"> :v</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="specify-maven_opts">Specify MAVEN_OPTS<a href="#specify-maven_opts" class="hash-link" aria-label="Direct link to Specify MAVEN_OPTS" title="Direct link to Specify MAVEN_OPTS">​</a></h2>
<p>Set <code>MAVEN_OPTS</code> to avoid issues in the build process.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">MAVEN_OPTS</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-Xss1500k -Xmx3072m -XX:+UnlockDiagnosticVMOptions -XX:GCLockerRetryAllocationCount=100&quot;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cleaning-up-locally-compiled-bookkeeper-artifacts">Cleaning up locally compiled BookKeeper artifacts<a href="#cleaning-up-locally-compiled-bookkeeper-artifacts" class="hash-link" aria-label="Direct link to Cleaning up locally compiled BookKeeper artifacts" title="Direct link to Cleaning up locally compiled BookKeeper artifacts">​</a></h2>
<p>It is necessary to make sure that BookKeeper artifacts are fetched from the Maven repository instead of using locally compiled BookKeeper artifacts (<a href="https://lists.apache.org/thread/gsbh95b2d9xtcg5fmtxpm9k9q6w68gd2" target="_blank" rel="noopener noreferrer">reference</a>).</p>
<p>Cleaning up the local Maven repository Bookkeeper artifacts for the version used by Pulsar:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$PULSAR_PATH</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sdk u </span><span class="token function" style="color:rgb(80, 250, 123)">java</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$SDKMAN_JAVA_VERSION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">BOOKKEEPER_VERSION</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable builtin class-name" style="color:rgb(189, 147, 249);font-style:italic">command</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> mvn initialize help:evaluate </span><span class="token variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-Dexpression</span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">bookkeeper.version </span><span class="token variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-pl</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable builtin class-name" style="color:rgb(189, 147, 249);font-style:italic">.</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-q</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-DforceStdout</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;BookKeeper version is </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$BOOKKEEPER_VERSION</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-n</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$BOOKKEEPER_VERSION</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ls</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-G</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-d</span><span class="token plain"> ~/.m2/repository/org/apache/bookkeeper/**/</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">${BOOKKEEPER_VERSION}</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"> </span><span class="token operator file-descriptor important">2</span><span class="token operator">&gt;</span><span class="token plain"> /dev/null </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">xargs</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-r</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-rf</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-release-artifacts">Build release artifacts<a href="#build-release-artifacts" class="hash-link" aria-label="Direct link to Build release artifacts" title="Direct link to Build release artifacts">​</a></h3>
<p>Run the following command to build the artifacts:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$PULSAR_PATH</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ensure the correct JDK version is used for building</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sdk u </span><span class="token function" style="color:rgb(80, 250, 123)">java</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$SDKMAN_JAVA_VERSION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># build the binaries</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">command</span><span class="token plain"> mvn clean </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-DskipTests</span><br></span></code></pre></div></div>
<p>After the build, you should find the following tarballs, zip files, and the connectors directory with all the Pulsar IO nar files:</p>
<ul>
<li><code>distribution/server/target/apache-pulsar-3.X.Y-bin.tar.gz</code></li>
<li><code>distribution/offloaders/target/apache-pulsar-offloaders-3.X.Y-bin.tar.gz</code></li>
<li><code>distribution/shell/target/apache-pulsar-shell-3.X.Y-bin.tar.gz</code></li>
<li><code>distribution/shell/target/apache-pulsar-shell-3.X.Y-bin.zip</code></li>
<li>directory <code>distribution/io/target/apache-pulsar-io-connectors-3.X.Y-bin</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="check-licenses">Check licenses<a href="#check-licenses" class="hash-link" aria-label="Direct link to Check licenses" title="Direct link to Check licenses">​</a></h3>
<p>First, check that the <code>LICENSE</code> and <code>NOTICE</code> files cover all included jars for the bin package. You can use script to cross-validate <code>LICENSE</code> file with included jars:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$PULSAR_PATH</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">src/check-binary-license.sh distribution/server/target/apache-pulsar-*-bin.tar.gz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">src/check-binary-license.sh distribution/shell/target/apache-pulsar-*-bin.tar.gz</span><br></span></code></pre></div></div>
<p>In some older branches, the script is called <code>src/check-binary-license</code> instead of <code>src/check-binary-license.sh</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-and-publish-the-gpg-key-if-you-havent-already-done-this">Create and publish the GPG key if you haven&#x27;t already done this<a href="#create-and-publish-the-gpg-key-if-you-havent-already-done-this" class="hash-link" aria-label="Direct link to Create and publish the GPG key if you haven&#x27;t already done this" title="Direct link to Create and publish the GPG key if you haven&#x27;t already done this">​</a></h3>
<p>If you haven&#x27;t already done it, <a href="/contribute/create-gpg-keys/">create and publish the GPG key</a>. You will use the key to sign the release artifacts.</p>
<p>Before running the script below, make sure that the <code>&lt;yourname&gt;@apache.org</code> code signing key is the default gpg signing key.</p>
<p>One way to ensure this is to create/edit file <code>~/.gnupg/gpg.conf</code> and add a line:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">default-key &lt;key fingerprint&gt;</span><br></span></code></pre></div></div>
<p>... where <code>&lt;key fingerprint&gt;</code> should be replaced with the private key fingerprint for the <code>&lt;yourname&gt;@apache.org</code> key. The key fingerprint can be found in <code>gpg -K</code> output.</p>
<p>This can be automated with this command:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># KEY_ID is in short format, subset key id visible in gpg -K</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">KEY_ID</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">gpg --list-keys --with-colons $APACHE_USER@apache.org </span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">|</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">egrep</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&quot;^pub&quot;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">|</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">awk</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> -F: </span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&#x27;{print $5}&#x27;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;default-key </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$KEY_ID</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"> </span><span class="token operator">&gt;&gt;</span><span class="token plain"> ~/.gnupg/gpg.conf</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sign-and-stage-the-artifacts-to-local-svn-directory">Sign and stage the artifacts to local SVN directory<a href="#sign-and-stage-the-artifacts-to-local-svn-directory" class="hash-link" aria-label="Direct link to Sign and stage the artifacts to local SVN directory" title="Direct link to Sign and stage the artifacts to local SVN directory">​</a></h3>
<p>The src and bin artifacts need to be signed and finally uploaded to the dist SVN repository for staging. This step should not run inside the $PULSAR_PATH.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># make sure to run svn mkdir commmand in a different dir(NOT IN $PULSAR_PATH).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">mkdir</span><span class="token plain"> ~/pulsar-svn-release-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> ~/pulsar-svn-release-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># create an empty directory in the SVN server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">svn </span><span class="token function" style="color:rgb(80, 250, 123)">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--username</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$APACHE_USER</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-m</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Add directory for pulsar </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token string" style="color:rgb(255, 121, 198)"> release&quot;</span><span class="token plain"> https://dist.apache.org/repos/dist/dev/pulsar/pulsar-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># checkout the empty directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">svn co https://dist.apache.org/repos/dist/dev/pulsar/pulsar-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># cd into the directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> pulsar-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># stage the release artifacts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$PULSAR_PATH</span><span class="token plain">/src/stage-release.sh </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Please check the size of the files in the `pulsar-3.X.Y-candidate-1`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># If you build the artifacts without a clean workspace, the `apache-pulsar-3.X.Y-src.tar.gz` files</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># may be too large to be unable to upload.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">ls</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-ltra</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">du</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-ms</span><span class="token plain"> *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Verify the artifacts are correctly signed have correct checksums:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:rgb(189, 147, 249);font-style:italic">i</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> **/*.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">tar.gz</span><span class="token operator">|</span><span class="token function" style="color:rgb(80, 250, 123)">zip</span><span class="token operator">|</span><span class="token plain">nar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">do</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> gpg </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--verify</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$i</span><span class="token plain">.asc </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$i</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">exit</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">done</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:rgb(189, 147, 249);font-style:italic">i</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> **/*.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">tar.gz</span><span class="token operator">|</span><span class="token function" style="color:rgb(80, 250, 123)">zip</span><span class="token operator">|</span><span class="token plain">nar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">do</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> shasum </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-a</span><span class="token plain"> </span><span class="token number">512</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-c</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$i</span><span class="token plain">.sha512 </span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">exit</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">done</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># don&#x27;t commit and upload yet, there&#x27;s a separate step for handling that</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="validate-the-release-files">Validate the release files<a href="#validate-the-release-files" class="hash-link" aria-label="Direct link to Validate the release files" title="Direct link to Validate the release files">​</a></h3>
<p>Then use instructions in <a href="/contribute/validate-release-candidate/">verifying release candidates</a> page to do some sanity checks on the produced binary distributions.</p>
<p>Make sure to run Apache RAT to verify the license headers in the src package:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> /tmp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">tar</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-xvzf</span><span class="token plain"> ~/pulsar-svn-release-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${VERSION_RC}</span><span class="token plain">/pulsar-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token plain">/apache-pulsar-*-src.tar.gz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> apache-pulsar-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token plain">-src</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">command</span><span class="token plain"> mvn apache-rat:check</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="commit-and-upload-the-staged-files-in-the-local-svn-directory-to-asf-svn-server">Commit and upload the staged files in the local SVN directory to ASF SVN server<a href="#commit-and-upload-the-staged-files-in-the-local-svn-directory-to-asf-svn-server" class="hash-link" aria-label="Direct link to Commit and upload the staged files in the local SVN directory to ASF SVN server" title="Direct link to Commit and upload the staged files in the local SVN directory to ASF SVN server">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain">  ~/pulsar-svn-release-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token plain">/pulsar-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">svn </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">svn ci </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-m</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Staging artifacts and signature for Pulsar release </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="stage-maven-modules">Stage Maven modules<a href="#stage-maven-modules" class="hash-link" aria-label="Direct link to Stage Maven modules" title="Direct link to Stage Maven modules">​</a></h3>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Make sure to run only one release at a time when working on multiple releases in parallel. Running multiple builds simultaneously will result in all releases being placed into a single staging repository. Close <a href="https://repository.apache.org/#stagingRepositories" target="_blank" rel="noopener noreferrer">the staging repository</a> before performing another release.</p></div></div>
<p>Set your ASF password in the following line. Add a space as the first character on the command line so that your password doesn&#x27;t get recorded in shell history.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">APACHE_PASSWORD</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><br></span></code></pre></div></div>
<p>Upload the artifacts to <a href="https://repository.apache.org" target="_blank" rel="noopener noreferrer">ASF Nexus</a></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$PULSAR_PATH</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ensure the correct JDK version is used for building</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sdk u </span><span class="token function" style="color:rgb(80, 250, 123)">java</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$SDKMAN_JAVA_VERSION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Confirm if there are no other new dirs or files in the $PULSAR_PATH because all files in $PULSAR_PATH will be compressed and uploaded to ASF Nexus.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> status</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># src/settings.xml from master branch to /tmp/mvn-apache-settings.xml since it&#x27;s missing in some branches</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-s</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-o</span><span class="token plain"> /tmp/mvn-apache-settings.xml https://raw.githubusercontent.com/apache/pulsar/master/src/settings.xml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># publish artifacts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">command</span><span class="token plain"> mvn deploy </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-DskipTests</span><span class="token plain"> -Papache-release </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--settings</span><span class="token plain"> /tmp/mvn-apache-settings.xml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># publish org.apache.pulsar.tests:integration and it&#x27;s parent pom org.apache.pulsar.tests:tests-parent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">command</span><span class="token plain"> mvn deploy </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-DskipTests</span><span class="token plain"> -Papache-release </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--settings</span><span class="token plain"> /tmp/mvn-apache-settings.xml </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-f</span><span class="token plain"> tests/pom.xml </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-pl</span><span class="token plain"> org.apache.pulsar.tests:tests-parent,org.apache.pulsar.tests:integration</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The <code>GPG_TTY</code> environment variable must be set for all the following steps. Otherwise, some operations might fail by &quot;gpg failed to sign the data&quot;.</p></div></div>
<p>This will ask for the GPG key passphrase and then upload it to the staging repository.</p>
<p>Log in to the ASF Nexus repository at <a href="https://repository.apache.org" target="_blank" rel="noopener noreferrer">https://repository.apache.org</a></p>
<p>Click on &quot;Staging Repositories&quot; on the left sidebar and then select the current Pulsar staging repo. This should be called something like <code>orgapachepulsar-XYZ</code>.</p>
<p>Add a version string such as &quot;Apache Pulsar 3.0.4-candidate-1&quot; to the clipboard with this command:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">printf</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Apache Pulsar </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">pbcopy</span><br></span></code></pre></div></div>
<p>Use the &quot;Close&quot; button to close the repository.</p>
<p>Enter the version string in the description field before clicking &quot;Confirm&quot;.</p>
<p>This operation will take few minutes. Once complete click &quot;Refresh&quot; and now a link to the staging repository should be available, something like <a href="https://repository.apache.org/content/repositories/orgapachepulsar-XYZ" target="_blank" rel="noopener noreferrer">https://repository.apache.org/content/repositories/orgapachepulsar-XYZ</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="stage-docker-images">Stage Docker images<a href="#stage-docker-images" class="hash-link" aria-label="Direct link to Stage Docker images" title="Direct link to Stage Docker images">​</a></h3>
<p>After that, the following images will be built and pushed to your own DockerHub account:</p>
<ul>
<li>pulsar</li>
<li>pulsar-all</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="release-before-pulsar-30">Release before Pulsar 3.0<a href="#release-before-pulsar-30" class="hash-link" aria-label="Direct link to Release before Pulsar 3.0" title="Direct link to Release before Pulsar 3.0">​</a></h4>
<p>This is supported only on Intel platforms. On Mac Apple Silicon, you can run Linux amd64 in a virtual machine or a physical machine outside the Apple laptop and use <code>export DOCKER_HOST=tcp://x.x.x.x:port</code> to use use the remote docker engine for building the docker image. Don&#x27;t forward the TCP/IP connection over an unencrypted channel.
You can start a socket proxy with <code>socat TCP-LISTEN:2375,bind=0.0.0.0,reuseaddr,fork UNIX-CLIENT:/var/run/docker.sock</code> inside the Linux Intel machine.
For running the Linux Intel VM on Mac Apple Silicon, you could use <code>limactl create --name=linux_amd64 --rosetta --arch x86_64</code> to create a VM using <a href="https://lima-vm.io/" target="_blank" rel="noopener noreferrer">https://lima-vm.io/</a>.
However, it is simpler to do the release on a Linux arm64 / x86_64 VM directly.</p>
<p>Run the following commands on a Linux machine (or with Mac where DOCKER_HOST points to a Linux amd64/Intel machine):</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$PULSAR_PATH</span><span class="token plain">/docker</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ensure the correct JDK version is used for building</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sdk u </span><span class="token function" style="color:rgb(80, 250, 123)">java</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$SDKMAN_JAVA_VERSION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">./build.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">DOCKER_USER</span><span class="token operator">=</span><span class="token operator">&lt;</span><span class="token plain">your-username</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">DOCKER_PASSWORD</span><span class="token operator">=</span><span class="token operator">&lt;</span><span class="token plain">your-password</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">DOCKER_ORG</span><span class="token operator">=</span><span class="token operator">&lt;</span><span class="token plain">your-organization</span><span class="token operator">&gt;</span><span class="token plain"> ./publish.sh</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-pulsar-30-and-later">Release Pulsar 3.0 and later<a href="#release-pulsar-30-and-later" class="hash-link" aria-label="Direct link to Release Pulsar 3.0 and later" title="Direct link to Release Pulsar 3.0 and later">​</a></h3>
<p>Before building docker images, clean up build history so that you don&#x27;t run out of diskspace in the middle of the build.
Docker buildx in Docker Desktop limits the build history size to 20GB by default.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># check total docker disk usage</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> system </span><span class="token function" style="color:rgb(80, 250, 123)">df</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># check total size of build cache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> buildx </span><span class="token function" style="color:rgb(80, 250, 123)">du</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># cleanup disk space</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># this is mandatory, if usage shown in previous step is over 10GB</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> buildx prune</span><br></span></code></pre></div></div>
<p>For creating and publishing the docker images, run the following commands:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># set your dockerhub username</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">DOCKER_USER</span><span class="token operator">=</span><span class="token operator">&lt;</span><span class="token plain">your-dockerhub-username</span><span class="token operator">&gt;</span><br></span></code></pre></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># login to dockerhub</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> login </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-u</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$DOCKER_USER</span><br></span></code></pre></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># ensure that you have the most recent base image locally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> pull ubuntu:22.04 </span><span class="token comment" style="color:rgb(98, 114, 164)"># for 3.0.x</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> pull alpine:3.21 </span><span class="token comment" style="color:rgb(98, 114, 164)"># for 3.3.x+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$PULSAR_PATH</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ensure the correct JDK version is used for building</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sdk u </span><span class="token function" style="color:rgb(80, 250, 123)">java</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$SDKMAN_JAVA_VERSION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">command</span><span class="token plain"> mvn </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-pl</span><span class="token plain"> docker/pulsar,docker/pulsar-all </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-DskipTests</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -Pmain,docker,docker-push </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-Ddocker.platforms</span><span class="token operator">=</span><span class="token plain">linux/amd64,linux/arm64 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-Ddocker.organization</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$DOCKER_USER</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-Ddocker.noCache</span><span class="token operator">=</span><span class="token plain">true </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-Ddocker.skip.tag</span><span class="token operator">=</span><span class="token plain">false</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="call-for-the-vote-to-release-a-version-based-on-the-release-candidate">Call for the vote to release a version based on the release candidate<a href="#call-for-the-vote-to-release-a-version-based-on-the-release-candidate" class="hash-link" aria-label="Direct link to Call for the vote to release a version based on the release candidate" title="Direct link to Call for the vote to release a version based on the release candidate">​</a></h2>
<p>Start a voting thread on the dev mailing list.</p>
<p>Here is a way to render the template for the voting email.</p>
<p>Set these shell variables</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">DOCKER_USER</span><span class="token operator">=</span><span class="token operator">&lt;</span><span class="token plain">your-dockerhub-username</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">STAGING_REPO</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&lt;enter staging repo from https://repository.apache.org/#stagingRepositories&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">MY_NAME</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Firstname Lastname&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">PREVIOUS_VERSION_WITHOUT_RC</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;4.0.6&quot;</span><br></span></code></pre></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Go to https://hub.docker.com/r/</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$DOCKER_USER</span><span class="token string" style="color:rgb(255, 121, 198)">/pulsar/tags to find the layer URL for the pulsar image&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Go to https://hub.docker.com/r/</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$DOCKER_USER</span><span class="token string" style="color:rgb(255, 121, 198)">/pulsar-all/tags to find the layer URL for the pulsar image&quot;</span><br></span></code></pre></div></div>
<p>Set these additional shell variable after looking up the URLs</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">PULSAR_IMAGE_URL</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&lt;looked up in previous step&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">PULSAR_ALL_IMAGE_URL</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&lt;looked up in previous step&gt;&quot;</span><br></span></code></pre></div></div>
<p>Set also these</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">PULSAR_IMAGE_NAME</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$DOCKER_USER</span><span class="token string" style="color:rgb(255, 121, 198)">/pulsar:</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token string" style="color:rgb(255, 121, 198)">-</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable function" style="color:rgb(80, 250, 123);font-style:italic">git</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> rev-parse </span><span class="token string variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--short</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">=</span><span class="token string variable number" style="color:rgb(189, 147, 249);font-style:italic">7</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> v$VERSION_RC^</span><span class="token string variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">{</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">commit</span><span class="token string variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">}</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">PULSAR_ALL_IMAGE_NAME</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$DOCKER_USER</span><span class="token string" style="color:rgb(255, 121, 198)">/pulsar-all:</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token string" style="color:rgb(255, 121, 198)">-</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable function" style="color:rgb(80, 250, 123);font-style:italic">git</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> rev-parse </span><span class="token string variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--short</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">=</span><span class="token string variable number" style="color:rgb(189, 147, 249);font-style:italic">7</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> v$VERSION_RC^</span><span class="token string variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">{</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">commit</span><span class="token string variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">}</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><br></span></code></pre></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># check that Pulsar standalone starts (use CTRL-C to terminate) for both architectures</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--platform</span><span class="token plain"> linux/arm64 </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--rm</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$PULSAR_IMAGE_NAME</span><span class="token plain"> /pulsar/bin/pulsar standalone</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--platform</span><span class="token plain"> linux/amd64 </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--rm</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$PULSAR_IMAGE_NAME</span><span class="token plain"> /pulsar/bin/pulsar standalone</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--platform</span><span class="token plain"> linux/arm64 </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--rm</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$PULSAR_ALL_IMAGE_NAME</span><span class="token plain"> /pulsar/bin/pulsar standalone</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--platform</span><span class="token plain"> linux/amd64 </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--rm</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$PULSAR_ALL_IMAGE_NAME</span><span class="token plain"> /pulsar/bin/pulsar standalone</span><br></span></code></pre></div></div>
<p>Now you can render the template to the clipboard</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">VOTE_DURATION</span><span class="token operator">=</span><span class="token number">72</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">tee</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">pbcopy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">To: dev@pulsar.apache.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Subject: [VOTE] Release Apache Pulsar </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token string" style="color:rgb(255, 121, 198)"> based on </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Hello Apache Pulsar Community,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">This is a call for the vote to release the Apache Pulsar version </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token string" style="color:rgb(255, 121, 198)"> based on </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token string" style="color:rgb(255, 121, 198)">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Included changes since the previous release:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">https://github.com/apache/pulsar/compare/v</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$PREVIOUS_VERSION_WITHOUT_RC</span><span class="token string" style="color:rgb(255, 121, 198)">...v</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">*** Please download, test and vote on this release. This vote will stay open</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">for at least </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VOTE_DURATION</span><span class="token string" style="color:rgb(255, 121, 198)"> hours ***</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Only votes from PMC members are binding, but members of the community are</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">encouraged to test the release and vote with &quot;(non-binding)&quot;.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Note that we are voting upon the source (tag), binaries are provided for</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">convenience.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">The release candidate is available at:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">https://dist.apache.org/repos/dist/dev/pulsar/pulsar-</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token string" style="color:rgb(255, 121, 198)">/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">SHA-512 checksums:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable function" style="color:rgb(80, 250, 123);font-style:italic">cat</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token string variable environment constant" style="color:rgb(189, 147, 249);font-style:italic">$HOME</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">/pulsar-svn-release-$VERSION_RC/pulsar-$VERSION_RC/apache-pulsar-$VERSION_WITHOUT_RC-src.tar.gz.sha512 </span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">|</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token string variable function" style="color:rgb(80, 250, 123);font-style:italic">sed</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token string variable string" style="color:rgb(255, 121, 198);font-style:italic">&#x27;s|\./||g&#x27;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable function" style="color:rgb(80, 250, 123);font-style:italic">cat</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token string variable environment constant" style="color:rgb(189, 147, 249);font-style:italic">$HOME</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">/pulsar-svn-release-$VERSION_RC/pulsar-$VERSION_RC/apache-pulsar-$VERSION_WITHOUT_RC-bin.tar.gz.sha512 </span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">|</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token string variable function" style="color:rgb(80, 250, 123);font-style:italic">sed</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token string variable string" style="color:rgb(255, 121, 198);font-style:italic">&#x27;s|\./||g&#x27;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Maven staging repo:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$STAGING_REPO</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">The tag to be voted upon:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">v</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token string" style="color:rgb(255, 121, 198)"> (commit </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable function" style="color:rgb(80, 250, 123);font-style:italic">git</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> rev-parse v$VERSION_RC^</span><span class="token string variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">{</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">commit</span><span class="token string variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">}</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)">)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">https://github.com/apache/pulsar/releases/tag/v</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Pulsar&#x27;s KEYS file containing PGP keys you use to sign the release:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">https://downloads.apache.org/pulsar/KEYS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Docker images:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">docker pull </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$PULSAR_IMAGE_NAME</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$PULSAR_IMAGE_URL</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">docker pull </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$PULSAR_ALL_IMAGE_NAME</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$PULSAR_ALL_IMAGE_URL</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Please download the source package, and follow the README to build</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">and run the Pulsar standalone service.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">More advanced release validation instructions can be found at</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">https://pulsar.apache.org/contribute/validate-release-candidate/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Thanks,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$MY_NAME</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><br></span></code></pre></div></div>
<p>The vote should be open for at least 72 hours (3 days). Votes from Pulsar PMC members will be considered binding, while anyone else is encouraged to verify the release and vote as well.</p>
<p>If the release is approved here with 3 +1 binding votes, you can then proceed to the next step. Otherwise, you should repeat the previous steps and prepare another release candidate to vote.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="lts-preview-release-steps-this-only-applies-to-preview-releases-such-as-400-preview1">LTS Preview release steps (this only applies to preview releases such as 4.0.0-preview.1)<a href="#lts-preview-release-steps-this-only-applies-to-preview-releases-such-as-400-preview1" class="hash-link" aria-label="Direct link to LTS Preview release steps (this only applies to preview releases such as 4.0.0-preview.1)" title="Direct link to LTS Preview release steps (this only applies to preview releases such as 4.0.0-preview.1)">​</a></h2>
<p>For preview releases there is no release voting. The preview release is directly announced on Pulsar user and dev mailing lists to get release feedback before the official LTS release.</p>
<p>A preview release is not an official Apache release and it&#x27;s comparable to a nightly build of a project.
The preview release artifacts will be made available on Maven central and Docker Hub so that users can practically use the artifacts in their existing build pipelines and provide feedback to the project. Binaries are complementary in Apache projects and don&#x27;t state an official ASF release.</p>
<p>Before continuing, perform a local <a href="/contribute/validate-release-candidate/">release validation</a> for the artifacts.
After this, follow the steps &quot;Release Maven modules&quot; and &quot;Release Docker images&quot; to publish the preview release in Maven central and DockerHub. The preview release isn&#x27;t an official release and therefore the sources should NOT be released on SVN.</p>
<p>Set the environment variables:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">PULSAR_IMAGE_NAME</span><span class="token operator">=</span><span class="token plain">apachepulsar/pulsar:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">PULSAR_ALL_IMAGE_NAME</span><span class="token operator">=</span><span class="token plain">apachepulsar/pulsar-all:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">LTS_RELEASE</span><span class="token operator">=</span><span class="token number">4.0</span><br></span></code></pre></div></div>
<p>To announce a LTS preview release, you can use this template:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">tee</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">pbcopy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">To: dev@pulsar.apache.org, users@pulsar.apache.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Subject: Apache Pulsar </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token string" style="color:rgb(255, 121, 198)"> available for testing - Feedback requested</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Dear Apache Pulsar Community,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">We&#x27;re excited to announce the availability of Apache Pulsar </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token string" style="color:rgb(255, 121, 198)">, a preview release aimed at gathering user feedback for the upcoming Pulsar </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$LTS_RELEASE</span><span class="token string" style="color:rgb(255, 121, 198)"> LTS release. This preview is not an official Apache release but provides an early look at the new features and changes.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Preview artifacts are now available on Maven Central and Docker Hub, enabling users to integrate and test them in their build pipelines and environments. You can find downloadable artifacts at https://dist.apache.org/repos/dist/dev/pulsar/pulsar-</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token string" style="color:rgb(255, 121, 198)">/.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Repository tag: v</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token string" style="color:rgb(255, 121, 198)"> (commit </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable function" style="color:rgb(80, 250, 123);font-style:italic">git</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> rev-parse v$VERSION_RC^</span><span class="token string variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">{</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">commit</span><span class="token string variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">}</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)">)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">https://github.com/apache/pulsar/releases/tag/v</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Changes since </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$PREVIOUS_VERSION_WITHOUT_RC</span><span class="token string" style="color:rgb(255, 121, 198)">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">https://github.com/apache/pulsar/compare/v</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$PREVIOUS_VERSION_WITHOUT_RC</span><span class="token string" style="color:rgb(255, 121, 198)">...v</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Docker images: </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$PULSAR_IMAGE_NAME</span><span class="token string" style="color:rgb(255, 121, 198)"> and </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$PULSAR_ALL_IMAGE_NAME</span><span class="token string" style="color:rgb(255, 121, 198)">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Docker image tag is &quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">For Java client testing, we recommend using the Pulsar BOM in Maven or Gradle builds with version &quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Pulsar BOM usage is explained at https://pulsar.apache.org/docs/next/client-libraries-java-setup/#pulsar-bom.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">We urge you to test this preview in your environments and provide feedback. Please report any issues on our GitHub issue tracker at https://github.com/apache/pulsar/issues, checking for existing reports first.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Known blockers are tracked with the &quot;release/blocker&quot; label at https://github.com/apache/pulsar/labels/release%2Fblocker.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Pulsar </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$LTS_RELEASE</span><span class="token string" style="color:rgb(255, 121, 198)"> timeline:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable function" style="color:rgb(80, 250, 123);font-style:italic">date</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token string variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-I</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)">: </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$LTS_RELEASE</span><span class="token string" style="color:rgb(255, 121, 198)"> preview 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable function" style="color:rgb(80, 250, 123);font-style:italic">date</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token string variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--date</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">=</span><span class="token string variable string" style="color:rgb(255, 121, 198);font-style:italic">&quot;10 days&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token string variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-I</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)">: Target for </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$LTS_RELEASE</span><span class="token string" style="color:rgb(255, 121, 198)"> preview 2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable function" style="color:rgb(80, 250, 123);font-style:italic">date</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token string variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--date</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">=</span><span class="token string variable string" style="color:rgb(255, 121, 198);font-style:italic">&quot;10 days&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token string variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-I</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)">: Code freeze for </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$LTS_RELEASE</span><span class="token string" style="color:rgb(255, 121, 198)"> by branching branch-</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$LTS_RELEASE</span><span class="token string" style="color:rgb(255, 121, 198)"> from the master branch</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable function" style="color:rgb(80, 250, 123);font-style:italic">date</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token string variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--date</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">=</span><span class="token string variable string" style="color:rgb(255, 121, 198);font-style:italic">&quot;13 days&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token string variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-I</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)">: Target for </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$LTS_RELEASE</span><span class="token string" style="color:rgb(255, 121, 198)"> release candidate 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable function" style="color:rgb(80, 250, 123);font-style:italic">date</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token string variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--date</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">=</span><span class="token string variable string" style="color:rgb(255, 121, 198);font-style:italic">&quot;18 days&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token string variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-I</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)">: Reserved for </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$LTS_RELEASE</span><span class="token string" style="color:rgb(255, 121, 198)"> release candidate 2 if needed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable function" style="color:rgb(80, 250, 123);font-style:italic">date</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token string variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--date</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">=</span><span class="token string variable string" style="color:rgb(255, 121, 198);font-style:italic">&quot;20 days&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token string variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-I</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)">: Planned </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$LTS_RELEASE</span><span class="token string" style="color:rgb(255, 121, 198)">.0 announcement (if release candidate 1 passes)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Your participation is crucial in shaping the quality of Pulsar </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$LTS_RELEASE</span><span class="token string" style="color:rgb(255, 121, 198)">. We appreciate your support and feedback.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Best regards,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$MY_NAME</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="summarize-the-voting-for-the-release">Summarize the voting for the release<a href="#summarize-the-voting-for-the-release" class="hash-link" aria-label="Direct link to Summarize the voting for the release" title="Direct link to Summarize the voting for the release">​</a></h2>
<p>Once the vote has been passed, you will need to send a result vote to <a href="mailto:dev@pulsar.apache.org" target="_blank" rel="noopener noreferrer">dev@pulsar.apache.org</a> on the voting thread.</p>
<p>Message:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">tee</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">pbcopy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Hello all,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">The vote to release Apache Pulsar version </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">${VERSION_WITHOUT_RC}</span><span class="token string" style="color:rgb(255, 121, 198)"> based on </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">${VERSION_RC}</span><span class="token string" style="color:rgb(255, 121, 198)"> is now closed.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">The vote PASSED with X binding &quot;+1&quot;, Y non-binding &quot;+1&quot; and 0 &quot;-1&quot; votes:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">&quot;+1&quot; Binding votes:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">  - &lt;name&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">&quot;+1&quot; Non-Binding votes:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">  - &lt;name&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">I&#x27;ll continue with the release process and the release announcement will follow shortly.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Thanks,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">&lt;your name&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="promote-the-release">Promote the release<a href="#promote-the-release" class="hash-link" aria-label="Direct link to Promote the release" title="Direct link to Promote the release">​</a></h2>
<p>For commands below, you need to set the environment variables <code>VERSION_RC</code>, <code>VERSION_WITHOUT_RC</code>, <code>UPSTREAM_REMOTE</code> and <code>APACHE_USER</code>.
Please check the <a href="#env-vars">environment variables step</a> for doing that.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="publish-the-final-tag">Publish the final tag<a href="#publish-the-final-tag" class="hash-link" aria-label="Direct link to Publish the final tag" title="Direct link to Publish the final tag">​</a></h3>
<p>Create and push the final Git tag:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> tag </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-u</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$APACHE_USER</span><span class="token plain">@apache.org </span><span class="token function" style="color:rgb(80, 250, 123)">v</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">git</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> rev-parse v$VERSION_RC^</span><span class="token variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">{</span><span class="token variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">}</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-m</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Release v</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> push </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$UPSTREAM_REMOTE</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">v</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-release-notes-in-github">Create release notes in GitHub<a href="#create-release-notes-in-github" class="hash-link" aria-label="Direct link to Create release notes in GitHub" title="Direct link to Create release notes in GitHub">​</a></h3>
<p>Then, you can <a href="https://docs.github.com/en/repositories/releasing-projects-on-github/managing-releases-in-a-repository#creating-a-release" target="_blank" rel="noopener noreferrer">create a GitHub release</a> based on the tag.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># open this URL and create release notes by clicking &quot;Create release from tag&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> https://github.com/apache/pulsar/releases/tag/v</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${VERSION_WITHOUT_RC}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># cherry-picked changes template</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;[&quot;</span><span class="token plain">&quot;Cherry-picked changes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">https://github.com/apache/pulsar/pulls?q</span><span class="token operator">=</span><span class="token plain">is%3Apr+is%3Amerged+label%3Arelease%2F</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${VERSION_WITHOUT_RC}</span><span class="token plain">+label%3Acherry-picked%2F</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${VERSION_BRANCH}</span><span class="token plain">+sort%3Acreated-asc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">&quot;</span><span class="token operator">|</span><span class="token plain">pbcopy</span><br></span></code></pre></div></div>
<ol>
<li>Open the above URL in a browser and create release notes by clicking &quot;Create release from tag&quot;.</li>
<li>Find &quot;Previous tag: auto&quot; in the UI above the text box and choose the previous release there.</li>
<li>Click &quot;Generate release notes&quot;.</li>
<li>Review the generated release notes.</li>
<li>Since changes are cherry-picked, you will have to include a link such as <a href="https://github.com/apache/pulsar/pulls?q=is%3Apr+is%3Amerged+label%3Arelease%2F2.11.4+label%3Acherry-picked%2Fbranch-2.11+sort%3Acreated-asc" target="_blank" rel="noopener noreferrer">Cherry-picked changes</a>. There&#x27;s a <a href="/contribute/release-note-guide/">separate guide for generating automated release notes</a>.</li>
<li>Unselect &quot;Set as the latest release&quot; (that should be only selected for the actual latest release of Pulsar)</li>
<li>Click &quot;Publish release&quot;.</li>
</ol>
<p>The <a href="/contribute/release-note-guide/">Writing release notes</a> guide should be followed to generate a proper release notes. That is covered in the &quot;Update the document&quot; section.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-the-artifacts-on-svn">Release the artifacts on SVN<a href="#release-the-artifacts-on-svn" class="hash-link" aria-label="Direct link to Release the artifacts on SVN" title="Direct link to Release the artifacts on SVN">​</a></h3>
<p>Promote the artifacts on the release SVN repo <a href="https://dist.apache.org/repos/dist/release" target="_blank" rel="noopener noreferrer">https://dist.apache.org/repos/dist/release</a>. Note that this repo is limited to PMC members, You may need a PMC member&#x27;s help if you are not one:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">svn move </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-m</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Release Apache Pulsar </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  https://dist.apache.org/repos/dist/dev/pulsar/pulsar-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_RC</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  https://dist.apache.org/repos/dist/release/pulsar/pulsar-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-maven-modules">Release Maven modules<a href="#release-maven-modules" class="hash-link" aria-label="Direct link to Release Maven modules" title="Direct link to Release Maven modules">​</a></h3>
<p>Promote the Maven staging repository for release. Login to <a href="https://repository.apache.org" target="_blank" rel="noopener noreferrer">https://repository.apache.org</a> and select the staging repository associated with the RC candidate that was approved.
Double check the staging repository name from the release vote email.
Select the repository and click on &quot;Release&quot;. Artifacts will now be made available on Maven central.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-docker-images">Release Docker images<a href="#release-docker-images" class="hash-link" aria-label="Direct link to Release Docker images" title="Direct link to Release Docker images">​</a></h3>
<p>This step is performed by a Apache Pulsar PMC member. Please request help from a PMC member for completing this step.</p>
<p><code>regctl</code> from <a href="https://github.com/regclient/regclient" target="_blank" rel="noopener noreferrer">regclient</a> is needed for copying multi-arch images. Install with <code>brew install regclient</code> or with <a href="https://github.com/regclient/regclient/blob/main/docs/install.md" target="_blank" rel="noopener noreferrer">other installation options</a> of regclient. The benefit of <code>regctl</code> over using <code>docker pull/tag/push</code> is that it will handle copying both <code>amd64</code> and the <code>arm64</code> image.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">RELEASE_MANAGER_DOCKER_USER</span><span class="token operator">=</span><span class="token plain">otheruser</span><br></span></code></pre></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">CANDIDATE_TAG</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${VERSION_WITHOUT_RC}</span><span class="token plain">-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">git</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> rev-parse </span><span class="token variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--short</span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">=</span><span class="token variable number" style="color:rgb(189, 147, 249);font-style:italic">7</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> v$VERSION_RC^</span><span class="token variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">{</span><span class="token variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">}</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">regctl image copy </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${RELEASE_MANAGER_DOCKER_USER}</span><span class="token plain">/pulsar:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${CANDIDATE_TAG}</span><span class="token plain"> apachepulsar/pulsar:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">regctl image copy </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${RELEASE_MANAGER_DOCKER_USER}</span><span class="token plain">/pulsar-all:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${CANDIDATE_TAG}</span><span class="token plain"> apachepulsar/pulsar-all:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><br></span></code></pre></div></div>
<p>Go to check the result:</p>
<ul>
<li><a href="https://hub.docker.com/r/apachepulsar/pulsar/tags" target="_blank" rel="noopener noreferrer">https://hub.docker.com/r/apachepulsar/pulsar/tags</a></li>
<li><a href="https://hub.docker.com/r/apachepulsar/pulsar-all/tags" target="_blank" rel="noopener noreferrer">https://hub.docker.com/r/apachepulsar/pulsar-all/tags</a></li>
</ul>
<p>Ensure that newer than 3.x images support both amd64 and arm64. Older 2.x images should be amd64 only.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>This step is for the latest release only.</p></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">regctl image copy apachepulsar/pulsar:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token plain"> apachepulsar/pulsar:latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">regctl image copy apachepulsar/pulsar-all:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token plain"> apachepulsar/pulsar-all:latest</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-helm-chart">Release Helm Chart<a href="#release-helm-chart" class="hash-link" aria-label="Direct link to Release Helm Chart" title="Direct link to Release Helm Chart">​</a></h3>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>This step is for the latest <em>LTS</em> release only</p></div></div>
<ol>
<li>Bump the image version in the Helm Chart: <a href="https://github.com/apache/pulsar-helm-chart/blob/master/charts/pulsar/values.yaml" target="_blank" rel="noopener noreferrer">charts/pulsar/values.yaml</a></li>
<li>Bump the chart version and <code>appVersion</code> in the Helm Chart to the released version: <a href="https://github.com/apache/pulsar-helm-chart/blob/master/charts/pulsar/Chart.yaml" target="_blank" rel="noopener noreferrer">charts/pulsar/Chart.yaml</a></li>
<li>Send a pull request for reviews and get it merged.</li>
<li>Once it is merged, the chart will be automatically released to GitHub releases at <a href="https://github.com/apache/pulsar-helm-chart" target="_blank" rel="noopener noreferrer">https://github.com/apache/pulsar-helm-chart</a> and updated to <a href="https://pulsar.apache.org/charts/index.yaml" target="_blank" rel="noopener noreferrer">https://pulsar.apache.org/charts/index.yaml</a>.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-homebrew-libpulsar-package">Release Homebrew libpulsar package<a href="#release-homebrew-libpulsar-package" class="hash-link" aria-label="Direct link to Release Homebrew libpulsar package" title="Direct link to Release Homebrew libpulsar package">​</a></h3>
<p>For 2.8, 2.9 and 2.10 releases, you should release the libpulsar package on Homebrew.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>The C++ client is now developing in a <a href="https://github.com/apache/pulsar-client-cpp" target="_blank" rel="noopener noreferrer">separated repo</a>. You should check its own release guide if you&#x27;re releasing version &gt;= 3.0.0.</p></div></div>
<p>Release a new version of libpulsar for Homebrew, You can follow the example <a href="https://github.com/Homebrew/homebrew-core/pull/53514" target="_blank" rel="noopener noreferrer">here</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-python-client">Release Python client<a href="#release-python-client" class="hash-link" aria-label="Direct link to Release Python client" title="Direct link to Release Python client">​</a></h3>
<p>For 2.8, 2.9 and 2.10 releases, you should release the Python client.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><ol>
<li>You need to create an account on PyPI: <a href="https://pypi.org/account/register/" target="_blank" rel="noopener noreferrer">https://pypi.org/account/register/</a></li>
<li>Ask anyone that has been a release manager before to add you as a maintainer for pulsar-docker on PyPI</li>
<li>Once you have completed the following steps in this section, you can check if the wheels are uploaded successfully in <a href="https://pypi.org/project/pulsar-client/#files" target="_blank" rel="noopener noreferrer">Download files</a>. Remember to switch to the correct version in <a href="https://pypi.org/project/pulsar-client/#history" target="_blank" rel="noopener noreferrer">Release history</a>.</li>
</ol></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Make sure you run following command at the release tag!</p></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>The Python client is now developing in a <a href="https://github.com/apache/pulsar-client-python" target="_blank" rel="noopener noreferrer">separated repo</a>. You should check its own release guide if you&#x27;re releasing version &gt;= 3.0.0.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="linux">Linux<a href="#linux" class="hash-link" aria-label="Direct link to Linux" title="Direct link to Linux">​</a></h4>
<p>There is a script that builds and packages the Python client inside Docker images:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">pulsar-client-cpp/docker/build-wheels.sh</span><br></span></code></pre></div></div>
<p>The wheel files will be left under <code>pulsar-client-cpp/python/wheelhouse</code>. Make sure all the files have <code>manylinux</code> in the filenames. Otherwise, those files will not be able to upload to PyPI.</p>
<p>Run the following command to push the built wheel files:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> pulsar-client-cpp/python/wheelhouse</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pip </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> twine</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">twine upload pulsar_client-*.whl</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="macos">macOS<a href="#macos" class="hash-link" aria-label="Direct link to macOS" title="Direct link to macOS">​</a></h4>
<p>There is a script that builds and packages the Python client inside Docker images:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">pulsar-client-cpp/python/build-mac-wheels.sh</span><br></span></code></pre></div></div>
<p>The wheel files will be generated at each platform directory under <code>pulsar-client-cpp/python/pkg/osx/</code>. Then you can run <code>twin upload</code> to upload those wheel files.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="update-the-document">Update the document<a href="#update-the-document" class="hash-link" aria-label="Direct link to Update the document" title="Direct link to Update the document">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-notes">Release notes<a href="#release-notes" class="hash-link" aria-label="Direct link to Release notes" title="Direct link to Release notes">​</a></h3>
<p>This step is for every release. Read the specific guide for <a href="/contribute/release-note-guide/">writing release notes</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="swagger-files">Swagger files<a href="#swagger-files" class="hash-link" aria-label="Direct link to Swagger files" title="Direct link to Swagger files">​</a></h3>
<p>This step is for every release.</p>
<p>First, build swagger files from apache/pulsar repo at the released tag:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># ensure the correct JDK version is used for building</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sdk u </span><span class="token function" style="color:rgb(80, 250, 123)">java</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$SDKMAN_JAVA_VERSION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> checkout </span><span class="token function" style="color:rgb(80, 250, 123)">v</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">command</span><span class="token plain"> mvn </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-ntp</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> -Pcore-modules,swagger,-main </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-DskipTests</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-DskipSourceReleaseAssembly</span><span class="token operator">=</span><span class="token plain">true </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-Dspotbugs.skip</span><span class="token operator">=</span><span class="token plain">true </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-Dlicense.skip</span><span class="token operator">=</span><span class="token plain">true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">PULSAR_PATH</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable builtin class-name" style="color:rgb(189, 147, 249);font-style:italic">pwd</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><br></span></code></pre></div></div>
<p>Now, run the following script from the main branch of apache/pulsar-site repo:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> tools/pytools</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">poetry </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">poetry run bin/rest-apidoc-generator.py --master-path</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$PULSAR_PATH</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--version</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><br></span></code></pre></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># commit files</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># move to pulsar-site root</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">/</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-u</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> static/swagger/</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> commit </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-m</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;update rest-apidoc for </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><br></span></code></pre></div></div>
<p>Read more on the manual of <a href="https://github.com/apache/pulsar-site/tree/main/tools/pytools/README.md" target="_blank" rel="noopener noreferrer">pytools</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="javadoc">Javadoc<a href="#javadoc" class="hash-link" aria-label="Direct link to Javadoc" title="Direct link to Javadoc">​</a></h3>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>This step is for feature releases only, unless you&#x27;re sure that significant Javadoc fixes are made against the patch release.</p></div></div>
<p>After publish Java libraries, run the following script from the main branch of apache/pulsar-site repo:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> tools/pytools</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">poetry </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">poetry run bin/java-apidoc-generator.py </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$PULSAR_PATH</span><br></span></code></pre></div></div>
<p>Once the docs are generated, you can add them and submit them in a PR. The expected doc output is:</p>
<ul>
<li><code>static/api/admin</code></li>
<li><code>static/api/client</code></li>
<li><code>static/api/pulsar-functions</code></li>
</ul>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">/</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> static/api/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> commit </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-m</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;update java-apidoc for </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><br></span></code></pre></div></div>
<p>Read more on the manual of <a href="https://github.com/apache/pulsar-site/tree/main/tools/pytools/README.md" target="_blank" rel="noopener noreferrer">pytools</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>This step is for feature releases only, unless you&#x27;re sure that significant reference fixes are made against the patch release.</p></div></div>
<p>You can generate references of config and command-line tool by running the following script from the main branch of apache/pulsar-site repo:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># build Pulsar distributions under /path/to/pulsar-3.X.Y</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> tools/pytools</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">poetry </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ensure that defaults using Runtime.getRuntime().availableProcessors() will be based on 1 as the number of CPUs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">_JAVA_OPTIONS</span><span class="token operator">=</span><span class="token plain">-XX:ActiveProcessorCount</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"> poetry run bin/reference-doc-generator.py --master-path</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$PULSAR_PATH</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--version</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><br></span></code></pre></div></div>
<p>For new feature releases, you will need to manually edit <code>src/static/reference/index.html</code> and add a new entry for the feature release (for example <code>4.1.x</code>) in 2 locations:</p>
<div class="language-patch codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-patch codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">+          &#x27;&lt;option value=&quot;4.1.x&quot;&gt;4.1.x&lt;/value&gt;&#x27; +</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-            values: [&quot;2.6.x&quot;, &quot;2.7.x&quot;, &quot;2.8.x&quot;, &quot;2.9.x&quot;, &quot;2.10.x&quot;, &quot;2.11.x&quot;, &quot;3.0.x&quot;, &quot;3.1.x&quot;, &quot;3.2.x&quot;, &quot;3.3.x&quot;, &quot;4.0.x&quot;, &quot;next&quot;],</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+            values: [&quot;2.6.x&quot;, &quot;2.7.x&quot;, &quot;2.8.x&quot;, &quot;2.9.x&quot;, &quot;2.10.x&quot;, &quot;2.11.x&quot;, &quot;3.0.x&quot;, &quot;3.1.x&quot;, &quot;3.2.x&quot;, &quot;3.3.x&quot;, &quot;4.0.x&quot;, &quot;4.1.x&quot;, &quot;next&quot;],</span><br></span></code></pre></div></div>
<p>Commit the changes:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">/</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> static/reference/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> commit </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-m</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;update reference for </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><br></span></code></pre></div></div>
<p>Once the docs are generated, you can add them and submit them in a PR. The expected doc output is <code>static/reference/2.X.x</code></p>
<p>Read more on the manual of <a href="https://github.com/apache/pulsar-site/tree/main/tools/pytools/README.md" target="_blank" rel="noopener noreferrer">pytools</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="update-docs-redirect">Update <code>/docs</code> redirect<a href="#update-docs-redirect" class="hash-link" aria-label="Direct link to update-docs-redirect" title="Direct link to update-docs-redirect">​</a></h2>
<p><a href="https://pulsar.apache.org/docs" target="_blank" rel="noopener noreferrer">https://pulsar.apache.org/docs</a> should redirect to the latest feature release documentation.</p>
<p>If you&#x27;re working on a patch release for an older feature version of Pulsar, you can skip this step.</p>
<p>Otherwise, you should update the version in this file: <code>static/.htaccess</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="update-docs-version-list-dropdown">Update <code>/docs</code> version list dropdown<a href="#update-docs-version-list-dropdown" class="hash-link" aria-label="Direct link to update-docs-version-list-dropdown" title="Direct link to update-docs-version-list-dropdown">​</a></h2>
<p>The dropdown should have the following items:</p>
<ul>
<li>Next</li>
<li>Active versions <a href="/contribute/release-policy/#supported-versions">still in support</a></li>
<li>Others</li>
</ul>
<p>LTS versions should be labeled this way: <code>&lt;version&gt; LTS</code>.</p>
<img alt="docs version dropdown" src="/img/version-dropdown.png" width="320px">
<p>If you&#x27;re working on a patch release for an older feature version of Pulsar, you can skip this step.</p>
<p>Otherwise, you should update the dropdown version list in this file: <code>src/theme/DocsVersionDropdownNavbarItem.js</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="announce-the-release">Announce the release<a href="#announce-the-release" class="hash-link" aria-label="Direct link to Announce the release" title="Direct link to Announce the release">​</a></h2>
<p>Once the release artifacts are available in the Apache Mirrors and the website is updated, you need to announce the release. You should email to <a href="mailto:dev@pulsar.apache.org" target="_blank" rel="noopener noreferrer">dev@pulsar.apache.org</a>, <a href="mailto:users@pulsar.apache.org" target="_blank" rel="noopener noreferrer">users@pulsar.apache.org</a>, and <a href="mailto:announce@apache.org" target="_blank" rel="noopener noreferrer">announce@apache.org</a>. Here is a sample content:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">tee</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">pbcopy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">To: dev@pulsar.apache.org, users@pulsar.apache.org, announce@apache.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Subject: [ANNOUNCE] Apache Pulsar </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token string" style="color:rgb(255, 121, 198)"> released</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">The Apache Pulsar team is proud to announce Apache Pulsar version </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token string" style="color:rgb(255, 121, 198)">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Pulsar is a highly scalable, low latency messaging platform running on</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">commodity hardware. It provides simple pub-sub semantics over topics,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">guaranteed at-least-once delivery of messages, automatic cursor management for</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">subscribers, and cross-datacenter replication.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">For Pulsar release details and downloads, visit:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">https://pulsar.apache.org/download</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Release Notes are at:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">https://pulsar.apache.org/release-notes/versioned/pulsar-</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION_WITHOUT_RC</span><span class="token string" style="color:rgb(255, 121, 198)">/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">We would like to thank the contributors that made the release possible.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Regards,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">The Pulsar Team</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><br></span></code></pre></div></div>
<p>Send the email in plain text mode since the <a href="mailto:announce@apache.org" target="_blank" rel="noopener noreferrer">announce@apache.org</a> mailing list will reject messages with text/html content.</p>
<p>In Gmail, there&#x27;s an option to set &quot;Plain text mode&quot; in the &quot;⋮&quot; menu.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="write-a-blog-post-optional">Write a blog post (optional)<a href="#write-a-blog-post-optional" class="hash-link" aria-label="Direct link to Write a blog post (optional)" title="Direct link to Write a blog post (optional)">​</a></h2>
<p>It is encouraged to write a blog post to summarize the features introduced in this release, especially for feature releases.</p>
<p>You can follow the example <a href="https://github.com/apache/pulsar/pull/2308" target="_blank" rel="noopener noreferrer">here</a>. Be aware that the source of blog is moved to <a href="https://github.com/apache/pulsar-site/tree/main/blog" target="_blank" rel="noopener noreferrer">here</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="remove-old-releases">Remove old releases<a href="#remove-old-releases" class="hash-link" aria-label="Direct link to Remove old releases" title="Direct link to Remove old releases">​</a></h2>
<p>Remove the old releases (if any). You only need the latest release there, and older releases are available through the Apache archive:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># Get the list of releases</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">svn </span><span class="token function" style="color:rgb(80, 250, 123)">ls</span><span class="token plain"> https://dist.apache.org/repos/dist/release/pulsar</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Delete each release (except for the last one)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">svn </span><span class="token function" style="color:rgb(80, 250, 123)">rm</span><span class="token plain"> https://dist.apache.org/repos/dist/release/pulsar/pulsar-3.X.X</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="move-to-next-version-in-pomxml">Move to next version in pom.xml<a href="#move-to-next-version-in-pomxml" class="hash-link" aria-label="Direct link to Move to next version in pom.xml" title="Direct link to Move to next version in pom.xml">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="feature-releases-master-branch">Feature releases (master branch)<a href="#feature-releases-master-branch" class="hash-link" aria-label="Direct link to Feature releases (master branch)" title="Direct link to Feature releases (master branch)">​</a></h3>
<p>You need to move the master version to the next iteration <code>Y</code> (<code>X + 1</code>).</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> checkout master</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">./src/set-project-version.sh </span><span class="token number">3</span><span class="token plain">.Y.0-SNAPSHOT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> commit </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-a</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-s</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-m</span><span class="token plain"> &quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">cleanup</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Bumped version to </span><span class="token number">3</span><span class="token plain">.Y.0-SNAPSHOT&#x27;</span><br></span></code></pre></div></div>
<p>Since this needs to be merged into <code>master</code>, you need to follow the regular process and create a Pull Request on GitHub.</p>
<p>For feature releases, since a new branch is created for the release, the new branch needs to be protected against force pushes to prevent corrupting the commit history. This is done by adding a rule to the branch protection settings for the new branch in <code>.asf.yaml</code>.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">export RELEASE_BRANCH=&quot;branch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">X.Y&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># use yq to add the new branch to the .asf.yaml file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">yq </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">i &#x27;.github.protected_branches</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">strenv(RELEASE_BRANCH)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">=</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain">&#x27; .asf.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># commit the change to .asf.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">git add .asf.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">git commit </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">m &quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">improve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">ci</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Protect $RELEASE_BRANCH from force pushes&#x27;</span><br></span></code></pre></div></div>
<p>This will prevent force pushing to the release branch, which is important to maintain the integrity of the commit history.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="for-maintenance-branches">For maintenance branches<a href="#for-maintenance-branches" class="hash-link" aria-label="Direct link to For maintenance branches" title="Direct link to For maintenance branches">​</a></h3>
<p>After the release process, you should bump the project version and append it with <code>-SNAPSHOT</code>.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">./src/set-project-version.sh x.x.x-SNAPSHOT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-u</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> commit </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-m</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Bump version to next snapshot version&quot;</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/apache/pulsar-site/edit/main/contribute/release-process.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-10-02T04:04:04.000Z" itemprop="dateModified">Oct 2, 2025</time></b> by <b>Lari Hotari</b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/contribute/release-policy/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Release policy</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/contribute/create-gpg-keys/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Creating GPG keys</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_jeP5 thin-scrollbar theme-doc-toc-desktop"><div class="border"><div style="color:var(--ifm-toc-link-color)">Was this helpful?</div><div style="border-width:1px;padding:3px;display:flex"><div style="justify-content:center;display:flex;border-radius:99999px;width:2.5rem;height:2.5rem;cursor:pointer"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="24" fill="none" style="width:initial;height:initial" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M10.086 1.594A1 1 0 0 1 11 1a4 4 0 0 1 4 4v3h4.655a3 3 0 0 1 2.994 3.45l-1.38 9A3 3 0 0 1 18.275 23H4a3 3 0 0 1-3-3v-7a3 3 0 0 1 3-3h2.35zM8 11.212l3.608-8.117A2 2 0 0 1 13 5v4a1 1 0 0 0 1 1h5.671a1 1 0 0 1 1 1.15l-1.38 9a1 1 0 0 1-1 .85H8zM6 21v-9H4a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1z" clip-rule="evenodd"></path></svg></div><div style="justify-content:center;display:flex;border-radius:99999px;width:2.5rem;height:2.5rem;cursor:pointer"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="24" fill="none" style="width:initial;height:initial" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M20.563 3.316A1.3 1.3 0 0 0 19.687 3h-1.688v9h1.688a1.31 1.31 0 0 0 1.312-1.077V4.077a1.3 1.3 0 0 0-.436-.761M16 12.788l-3.608 8.118A2 2 0 0 1 11 19v-4a1 1 0 0 0-1-1H4.328a1.002 1.002 0 0 1-1-1.15l1.38-9a1 1 0 0 1 1-.85h10.291zM19.661 1a3.31 3.31 0 0 1 3.329 2.866Q23 3.933 23 4v7q0 .068-.01.134A3.31 3.31 0 0 1 19.661 14h-2.012l-3.736 8.406a1 1 0 0 1-.914.594 4 4 0 0 1-4-4v-3H4.344a3 3 0 0 1-2.994-3.45l1.38-9A3 3 0 0 1 5.724 1z" clip-rule="evenodd"></path></svg></div></div><div class="Actions_uugI"><a target="_blank" class="Action_iBHd" href="https://github.com/apache/pulsar/issues/new?assignees=&amp;labels=doc-required&amp;projects=&amp;template=doc.yml&amp;title=%5BDoc%5D+">💡 Suggest changes</a><a target="_blank" class="Action_iBHd" href="https://github.com/apache/pulsar/discussions/new?category=q-a">🛟 Get support</a></div></div><ul class="table-of-contents table-of-contents__left-border"><li><a href="#preparation" class="table-of-contents__link toc-highlight">Preparation</a></li><li><a href="#prepare-the-release-branch" class="table-of-contents__link toc-highlight">Prepare the release branch</a></li><li><a href="#env-vars" class="table-of-contents__link toc-highlight">Set environment variables to be used across the commands</a></li><li><a href="#create-a-release-candidate" class="table-of-contents__link toc-highlight">Create a release candidate</a><ul><li><a href="#create-the-release-branch" class="table-of-contents__link toc-highlight">Create the release branch</a></li><li><a href="#cherry-picking-changes-scheduled-for-the-release" class="table-of-contents__link toc-highlight">Cherry-picking changes scheduled for the release</a></li><li><a href="#create-a-github-label-for-the-next-release-and-move-prs-labeled-with-the-current-release-to-the-new-label" class="table-of-contents__link toc-highlight">Create a GitHub label for the next release and move PRs labeled with the current release to the new label</a></li><li><a href="#update-project-version-and-tag" class="table-of-contents__link toc-highlight">Update project version and tag</a></li></ul></li><li><a href="#specify-maven_opts" class="table-of-contents__link toc-highlight">Specify MAVEN_OPTS</a></li><li><a href="#cleaning-up-locally-compiled-bookkeeper-artifacts" class="table-of-contents__link toc-highlight">Cleaning up locally compiled BookKeeper artifacts</a><ul><li><a href="#build-release-artifacts" class="table-of-contents__link toc-highlight">Build release artifacts</a></li><li><a href="#check-licenses" class="table-of-contents__link toc-highlight">Check licenses</a></li><li><a href="#create-and-publish-the-gpg-key-if-you-havent-already-done-this" class="table-of-contents__link toc-highlight">Create and publish the GPG key if you haven&#39;t already done this</a></li><li><a href="#sign-and-stage-the-artifacts-to-local-svn-directory" class="table-of-contents__link toc-highlight">Sign and stage the artifacts to local SVN directory</a></li><li><a href="#validate-the-release-files" class="table-of-contents__link toc-highlight">Validate the release files</a></li><li><a href="#commit-and-upload-the-staged-files-in-the-local-svn-directory-to-asf-svn-server" class="table-of-contents__link toc-highlight">Commit and upload the staged files in the local SVN directory to ASF SVN server</a></li><li><a href="#stage-maven-modules" class="table-of-contents__link toc-highlight">Stage Maven modules</a></li><li><a href="#stage-docker-images" class="table-of-contents__link toc-highlight">Stage Docker images</a></li><li><a href="#release-pulsar-30-and-later" class="table-of-contents__link toc-highlight">Release Pulsar 3.0 and later</a></li></ul></li><li><a href="#call-for-the-vote-to-release-a-version-based-on-the-release-candidate" class="table-of-contents__link toc-highlight">Call for the vote to release a version based on the release candidate</a></li><li><a href="#lts-preview-release-steps-this-only-applies-to-preview-releases-such-as-400-preview1" class="table-of-contents__link toc-highlight">LTS Preview release steps (this only applies to preview releases such as 4.0.0-preview.1)</a></li><li><a href="#summarize-the-voting-for-the-release" class="table-of-contents__link toc-highlight">Summarize the voting for the release</a></li><li><a href="#promote-the-release" class="table-of-contents__link toc-highlight">Promote the release</a><ul><li><a href="#publish-the-final-tag" class="table-of-contents__link toc-highlight">Publish the final tag</a></li><li><a href="#create-release-notes-in-github" class="table-of-contents__link toc-highlight">Create release notes in GitHub</a></li><li><a href="#release-the-artifacts-on-svn" class="table-of-contents__link toc-highlight">Release the artifacts on SVN</a></li><li><a href="#release-maven-modules" class="table-of-contents__link toc-highlight">Release Maven modules</a></li><li><a href="#release-docker-images" class="table-of-contents__link toc-highlight">Release Docker images</a></li><li><a href="#release-helm-chart" class="table-of-contents__link toc-highlight">Release Helm Chart</a></li><li><a href="#release-homebrew-libpulsar-package" class="table-of-contents__link toc-highlight">Release Homebrew libpulsar package</a></li><li><a href="#release-python-client" class="table-of-contents__link toc-highlight">Release Python client</a></li></ul></li><li><a href="#update-the-document" class="table-of-contents__link toc-highlight">Update the document</a><ul><li><a href="#release-notes" class="table-of-contents__link toc-highlight">Release notes</a></li><li><a href="#swagger-files" class="table-of-contents__link toc-highlight">Swagger files</a></li><li><a href="#javadoc" class="table-of-contents__link toc-highlight">Javadoc</a></li><li><a href="#reference" class="table-of-contents__link toc-highlight">Reference</a></li></ul></li><li><a href="#update-docs-redirect" class="table-of-contents__link toc-highlight">Update <code>/docs</code> redirect</a></li><li><a href="#update-docs-version-list-dropdown" class="table-of-contents__link toc-highlight">Update <code>/docs</code> version list dropdown</a></li><li><a href="#announce-the-release" class="table-of-contents__link toc-highlight">Announce the release</a></li><li><a href="#write-a-blog-post-optional" class="table-of-contents__link toc-highlight">Write a blog post (optional)</a></li><li><a href="#remove-old-releases" class="table-of-contents__link toc-highlight">Remove old releases</a></li><li><a href="#move-to-next-version-in-pomxml" class="table-of-contents__link toc-highlight">Move to next version in pom.xml</a><ul><li><a href="#feature-releases-master-branch" class="table-of-contents__link toc-highlight">Feature releases (master branch)</a></li><li><a href="#for-maintenance-branches" class="table-of-contents__link toc-highlight">For maintenance branches</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Foundation<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Events<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="footer__link-item">License<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.apache.org/foundation/thanks" target="_blank" rel="noopener noreferrer" class="footer__link-item">Thanks<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.apache.org/foundation/sponsorship" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sponsorship<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/security/">Security</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/policies/privacy.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/contact/">Contact</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item">
                <div class="social-icons">
                  <a target="_blank" href="https://communityinviter.com/apps/apache-pulsar/apache-pulsar" aria-label="Join the Apache Pulsar Slack workspace">
                    <img alt="Slack logo" src="/img/slack-white.svg" width="26">
                  </a>
                  <a target="_blank" href="https://github.com/apache/pulsar/" aria-label="View the Apache Pulsar project on GitHub">
                    <img alt="GitHub logo" src="/img/github-white.svg" width="26">
                  </a>
                </div>
              </li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a class="footerLogoLink_BH7S" href="/"><img src="/img/pulsar-white.svg" alt="Pulsar Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/pulsar-white.svg" alt="Pulsar Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">
        <div>
          <img class="footer-apache-logo" src="/img/feather-logo-white.svg" alt="" width="20">
          The Apache Software Foundation
        </div>
        <p>Apache Pulsar is available under the Apache License, version 2.0. Apache Pulsar is an open-source, distributed messaging and streaming platform built for the cloud.</p>
        <p>Copyright © 2025 The Apache Software Foundation. All Rights Reserved. Apache, Pulsar, Apache Pulsar, and the Apache feather logo are trademarks or registered trademarks of The Apache Software Foundation.</p>
      </div></div></div></footer></div>
</body>
</html>