<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>pulsar-client-cpp: pulsar::ConsumerInterceptor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">pulsar-client-cpp
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a href="namespacepulsar.html">pulsar</a></li><li class="navelem"><a href="classpulsar_1_1_consumer_interceptor.html">ConsumerInterceptor</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classpulsar_1_1_consumer_interceptor-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">pulsar::ConsumerInterceptor Class Reference<span class="mlabels"><span class="mlabel abstract">abstract</span></span></div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_consumer_interceptor_8h_source.html">ConsumerInterceptor.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abe9d12923a7f6b3bc56c9596a4bac7bc" id="r_abe9d12923a7f6b3bc56c9596a4bac7bc"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abe9d12923a7f6b3bc56c9596a4bac7bc">close</a> ()</td></tr>
<tr class="memitem:a390ea752b64d895a6cca218255ba1398" id="r_a390ea752b64d895a6cca218255ba1398"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classpulsar_1_1_message.html">Message</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a390ea752b64d895a6cca218255ba1398">beforeConsume</a> (const <a class="el" href="classpulsar_1_1_consumer.html">Consumer</a> &amp;consumer, const <a class="el" href="classpulsar_1_1_message.html">Message</a> &amp;message)=0</td></tr>
<tr class="memitem:a9d45879671a6585c244b996e0f8e0eae" id="r_a9d45879671a6585c244b996e0f8e0eae"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9d45879671a6585c244b996e0f8e0eae">onAcknowledge</a> (const <a class="el" href="classpulsar_1_1_consumer.html">Consumer</a> &amp;consumer, <a class="el" href="namespacepulsar.html#a23832680be30b95d54755b56310e9079">Result</a> result, const <a class="el" href="classpulsar_1_1_message_id.html">MessageId</a> &amp;messageID)=0</td></tr>
<tr class="memitem:aaa831e0a16b86333a43ee7fed04ab0a1" id="r_aaa831e0a16b86333a43ee7fed04ab0a1"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaa831e0a16b86333a43ee7fed04ab0a1">onAcknowledgeCumulative</a> (const <a class="el" href="classpulsar_1_1_consumer.html">Consumer</a> &amp;consumer, <a class="el" href="namespacepulsar.html#a23832680be30b95d54755b56310e9079">Result</a> result, const <a class="el" href="classpulsar_1_1_message_id.html">MessageId</a> &amp;messageID)=0</td></tr>
<tr class="memitem:a8f11afb9ec2c367cd5006f4a2df45f30" id="r_a8f11afb9ec2c367cd5006f4a2df45f30"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8f11afb9ec2c367cd5006f4a2df45f30">onNegativeAcksSend</a> (const <a class="el" href="classpulsar_1_1_consumer.html">Consumer</a> &amp;consumer, const std::set&lt; <a class="el" href="classpulsar_1_1_message_id.html">MessageId</a> &gt; &amp;messageIds)=0</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A plugin interface that allows you to intercept (and possibly mutate) messages received by the consumer.</p>
<p>A primary use case is to hook into consumer applications for custom monitoring, logging, etc.</p>
<p>Exceptions thrown by interceptor methods will be caught, logged, but not propagated further. </p>
</div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a390ea752b64d895a6cca218255ba1398" name="a390ea752b64d895a6cca218255ba1398"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a390ea752b64d895a6cca218255ba1398">&#9670;&#160;</a></span>beforeConsume()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classpulsar_1_1_message.html">Message</a> pulsar::ConsumerInterceptor::beforeConsume </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classpulsar_1_1_consumer.html">Consumer</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>consumer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classpulsar_1_1_message.html">Message</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>message</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel pure-virtual">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This is called just before the message is consumed.</p>
<p>This method is allowed to modify message, in which case the new message will be returned.</p>
<p>Any exception thrown by this method will be caught by the caller, logged, but not propagated to client.</p>
<p>Since the consumer may run multiple interceptors, a particular interceptor's <span class="tt"><a class="el" href="#a390ea752b64d895a6cca218255ba1398">beforeConsume</a></span> callback will be called in the order. The first interceptor in the list gets the consumed message, the following interceptor will be passed the message returned by the previous interceptor, and so on. Since interceptors are allowed to modify message, interceptors may potentially get the messages already modified by other interceptors. However building a pipeline of mutable interceptors that depend on the output of the previous interceptor is discouraged, because of potential side-effects caused by interceptors potentially failing to modify the message and throwing an exception. if one of interceptors in the list throws an exception from <span class="tt"><a class="el" href="#a390ea752b64d895a6cca218255ba1398">beforeConsume</a></span>, the exception is caught, logged, and the next interceptor is called with the message returned by the last successful interceptor in the list, or otherwise the original consumed message.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">consumer</td><td>the consumer which contains the interceptor </td></tr>
    <tr><td class="paramname">message</td><td>the message to be consumed by the client </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>message that is either modified by the interceptor or same message passed into the method. </dd></dl>

</div>
</div>
<a id="abe9d12923a7f6b3bc56c9596a4bac7bc" name="abe9d12923a7f6b3bc56c9596a4bac7bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe9d12923a7f6b3bc56c9596a4bac7bc">&#9670;&#160;</a></span>close()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void pulsar::ConsumerInterceptor::close </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Close the interceptor </p>

</div>
</div>
<a id="a9d45879671a6585c244b996e0f8e0eae" name="a9d45879671a6585c244b996e0f8e0eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d45879671a6585c244b996e0f8e0eae">&#9670;&#160;</a></span>onAcknowledge()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void pulsar::ConsumerInterceptor::onAcknowledge </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classpulsar_1_1_consumer.html">Consumer</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>consumer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacepulsar.html#a23832680be30b95d54755b56310e9079">Result</a></td>          <td class="paramname"><span class="paramname"><em>result</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classpulsar_1_1_message_id.html">MessageId</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>messageID</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel pure-virtual">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This is called before consumer sends the acknowledgment to the broker.</p>
<p>Any exception thrown by this method will be ignored by the caller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">consumer</td><td>the consumer which contains the interceptor </td></tr>
    <tr><td class="paramname">result</td><td>the result of the acknowledgement </td></tr>
    <tr><td class="paramname">messageID</td><td>the message id to be acknowledged </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaa831e0a16b86333a43ee7fed04ab0a1" name="aaa831e0a16b86333a43ee7fed04ab0a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa831e0a16b86333a43ee7fed04ab0a1">&#9670;&#160;</a></span>onAcknowledgeCumulative()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void pulsar::ConsumerInterceptor::onAcknowledgeCumulative </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classpulsar_1_1_consumer.html">Consumer</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>consumer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacepulsar.html#a23832680be30b95d54755b56310e9079">Result</a></td>          <td class="paramname"><span class="paramname"><em>result</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classpulsar_1_1_message_id.html">MessageId</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>messageID</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel pure-virtual">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This is called before consumer sends the cumulative acknowledgment to the broker.</p>
<p>Any exception thrown by this method will be ignored by the caller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">consumer</td><td>the consumer which contains the interceptor </td></tr>
    <tr><td class="paramname">result</td><td>the result of the cumulative acknowledgement </td></tr>
    <tr><td class="paramname">messageID</td><td>the message id to be acknowledged cumulatively </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8f11afb9ec2c367cd5006f4a2df45f30" name="a8f11afb9ec2c367cd5006f4a2df45f30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f11afb9ec2c367cd5006f4a2df45f30">&#9670;&#160;</a></span>onNegativeAcksSend()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void pulsar::ConsumerInterceptor::onNegativeAcksSend </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classpulsar_1_1_consumer.html">Consumer</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>consumer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::set&lt; <a class="el" href="classpulsar_1_1_message_id.html">MessageId</a> &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>messageIds</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel pure-virtual">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This method will be called when a redelivery from a negative acknowledge occurs.</p>
<p>Any exception thrown by this method will be ignored by the caller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">consumer</td><td>the consumer which contains the interceptor </td></tr>
    <tr><td class="paramname">messageIds</td><td>the set of message ids to negative ack </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/pulsar/<a class="el" href="_consumer_interceptor_8h_source.html">ConsumerInterceptor.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
